# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

V_3D_UNDUMP_METADATA = Metadata(
    id="e0919ef65f657db4fbb40c7df0c11d28b1620a3e.boutiques",
    name="3dUndump",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_V3dUndumpParamsDictNoTag = typing.TypedDict('_V3dUndumpParamsDictNoTag', {
    "input_files": list[InputPathType],
    "prefix": typing.NotRequired[str | None],
    "master": typing.NotRequired[InputPathType | None],
    "dimensions": typing.NotRequired[list[float] | None],
    "mask": typing.NotRequired[InputPathType | None],
    "datatype": typing.NotRequired[str | None],
    "dval": typing.NotRequired[float | None],
    "fval": typing.NotRequired[float | None],
    "ijk": bool,
    "xyz": bool,
    "sphere_radius": typing.NotRequired[float | None],
    "cube_mode": bool,
    "orient": typing.NotRequired[str | None],
    "head_only": bool,
    "roimask": typing.NotRequired[InputPathType | None],
    "allow_nan": bool,
})
V3dUndumpParamsDictTagged = typing.TypedDict('V3dUndumpParamsDictTagged', {
    "@type": typing.Literal["afni/3dUndump"],
    "input_files": list[InputPathType],
    "prefix": typing.NotRequired[str | None],
    "master": typing.NotRequired[InputPathType | None],
    "dimensions": typing.NotRequired[list[float] | None],
    "mask": typing.NotRequired[InputPathType | None],
    "datatype": typing.NotRequired[str | None],
    "dval": typing.NotRequired[float | None],
    "fval": typing.NotRequired[float | None],
    "ijk": bool,
    "xyz": bool,
    "sphere_radius": typing.NotRequired[float | None],
    "cube_mode": bool,
    "orient": typing.NotRequired[str | None],
    "head_only": bool,
    "roimask": typing.NotRequired[InputPathType | None],
    "allow_nan": bool,
})
V3dUndumpParamsDict = _V3dUndumpParamsDictNoTag | V3dUndumpParamsDictTagged


class V3dUndumpOutputs(typing.NamedTuple):
    """
    Output object returned when calling `V3dUndumpParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    outfile: OutputPathType | None
    """Main output dataset"""


def v_3d_undump_params(
    input_files: list[InputPathType],
    prefix: str | None = None,
    master: InputPathType | None = None,
    dimensions: list[float] | None = None,
    mask: InputPathType | None = None,
    datatype: str | None = None,
    dval: float | None = None,
    fval: float | None = None,
    ijk: bool = False,
    xyz: bool = False,
    sphere_radius: float | None = None,
    cube_mode: bool = False,
    orient: str | None = None,
    head_only: bool = False,
    roimask: InputPathType | None = None,
    allow_nan: bool = False,
) -> V3dUndumpParamsDictTagged:
    """
    Build parameters.
    
    Args:
        input_files: Input ASCII file(s), with one voxel specification per\
            line.
        prefix: 'ppp' is the prefix for the output dataset [default = undump].
        master: 'mmm' is the master dataset, whose geometry will determine the\
            geometry of the output.
        dimensions: Sets the dimensions of the output dataset to be I by J by K\
            voxels.
        mask: Specifies a mask dataset 'MMM', which will control which voxels\
            are allowed to get values set.
        datatype: 'type' determines the voxel data type of the output, which\
            may be byte, short, or float [default = short].
        dval: 'vvv' is the default value stored in each input voxel that does\
            not have a value supplied in the input file [default = 1].
        fval: 'fff' is the fill value, used for each voxel in the output\
            dataset that is NOT listed in the input file [default = 0].
        ijk: Coordinates in the input file are (i,j,k) index triples.
        xyz: Coordinates in the input file are (x,y,z) spatial coordinates, in\
            mm.
        sphere_radius: Specifies that a sphere of radius 'rrr' will be filled\
            about each input (x,y,z) or (i,j,k) voxel.
        cube_mode: Put cubes down instead of spheres. The 'radius' then is half\
            the length of a side.
        orient: Specifies the coordinate order used by -xyz. The code must be 3\
            letters, one each from the pairs {R,L} {A,P} {I,S}.
        head_only: Creates only the .HEAD file.
        roimask: Specifies which voxels get what numbers by using a dataset\
            'rrr', instead of coordinates.
        allow_nan: Allow NaN (not-a-number) values to be entered.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/3dUndump",
        "input_files": input_files,
        "ijk": ijk,
        "xyz": xyz,
        "cube_mode": cube_mode,
        "head_only": head_only,
        "allow_nan": allow_nan,
    }
    if prefix is not None:
        params["prefix"] = prefix
    if master is not None:
        params["master"] = master
    if dimensions is not None:
        params["dimensions"] = dimensions
    if mask is not None:
        params["mask"] = mask
    if datatype is not None:
        params["datatype"] = datatype
    if dval is not None:
        params["dval"] = dval
    if fval is not None:
        params["fval"] = fval
    if sphere_radius is not None:
        params["sphere_radius"] = sphere_radius
    if orient is not None:
        params["orient"] = orient
    if roimask is not None:
        params["roimask"] = roimask
    return params


def v_3d_undump_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `V3dUndumpParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("input_files", None) is None:
        raise StyxValidationError("`input_files` must not be None")
    if not isinstance(params["input_files"], list):
        raise StyxValidationError(f'`input_files` has the wrong type: Received `{type(params.get("input_files", None))}` expected `list[InputPathType]`')
    for e in params["input_files"]:
        if not isinstance(e, (pathlib.Path, str)):
            raise StyxValidationError(f'`input_files` has the wrong type: Received `{type(params.get("input_files", None))}` expected `list[InputPathType]`')
    if params.get("prefix", None) is not None:
        if not isinstance(params["prefix"], str):
            raise StyxValidationError(f'`prefix` has the wrong type: Received `{type(params.get("prefix", None))}` expected `str | None`')
    if params.get("master", None) is not None:
        if not isinstance(params["master"], (pathlib.Path, str)):
            raise StyxValidationError(f'`master` has the wrong type: Received `{type(params.get("master", None))}` expected `InputPathType | None`')
    if params.get("dimensions", None) is not None:
        if not isinstance(params["dimensions"], list):
            raise StyxValidationError(f'`dimensions` has the wrong type: Received `{type(params.get("dimensions", None))}` expected `list[float] | None`')
        if len(params["dimensions"]) > 3:
            raise StyxValidationError("Parameter `dimensions` must contain at most 3 elements")
        for e in params["dimensions"]:
            if not isinstance(e, (float, int)):
                raise StyxValidationError(f'`dimensions` has the wrong type: Received `{type(params.get("dimensions", None))}` expected `list[float] | None`')
    if params.get("mask", None) is not None:
        if not isinstance(params["mask"], (pathlib.Path, str)):
            raise StyxValidationError(f'`mask` has the wrong type: Received `{type(params.get("mask", None))}` expected `InputPathType | None`')
    if params.get("datatype", None) is not None:
        if not isinstance(params["datatype"], str):
            raise StyxValidationError(f'`datatype` has the wrong type: Received `{type(params.get("datatype", None))}` expected `str | None`')
    if params.get("dval", None) is not None:
        if not isinstance(params["dval"], (float, int)):
            raise StyxValidationError(f'`dval` has the wrong type: Received `{type(params.get("dval", None))}` expected `float | None`')
    if params.get("fval", None) is not None:
        if not isinstance(params["fval"], (float, int)):
            raise StyxValidationError(f'`fval` has the wrong type: Received `{type(params.get("fval", None))}` expected `float | None`')
    if params.get("ijk", False) is None:
        raise StyxValidationError("`ijk` must not be None")
    if not isinstance(params["ijk"], bool):
        raise StyxValidationError(f'`ijk` has the wrong type: Received `{type(params.get("ijk", False))}` expected `bool`')
    if params.get("xyz", False) is None:
        raise StyxValidationError("`xyz` must not be None")
    if not isinstance(params["xyz"], bool):
        raise StyxValidationError(f'`xyz` has the wrong type: Received `{type(params.get("xyz", False))}` expected `bool`')
    if params.get("sphere_radius", None) is not None:
        if not isinstance(params["sphere_radius"], (float, int)):
            raise StyxValidationError(f'`sphere_radius` has the wrong type: Received `{type(params.get("sphere_radius", None))}` expected `float | None`')
    if params.get("cube_mode", False) is None:
        raise StyxValidationError("`cube_mode` must not be None")
    if not isinstance(params["cube_mode"], bool):
        raise StyxValidationError(f'`cube_mode` has the wrong type: Received `{type(params.get("cube_mode", False))}` expected `bool`')
    if params.get("orient", None) is not None:
        if not isinstance(params["orient"], str):
            raise StyxValidationError(f'`orient` has the wrong type: Received `{type(params.get("orient", None))}` expected `str | None`')
    if params.get("head_only", False) is None:
        raise StyxValidationError("`head_only` must not be None")
    if not isinstance(params["head_only"], bool):
        raise StyxValidationError(f'`head_only` has the wrong type: Received `{type(params.get("head_only", False))}` expected `bool`')
    if params.get("roimask", None) is not None:
        if not isinstance(params["roimask"], (pathlib.Path, str)):
            raise StyxValidationError(f'`roimask` has the wrong type: Received `{type(params.get("roimask", None))}` expected `InputPathType | None`')
    if params.get("allow_nan", False) is None:
        raise StyxValidationError("`allow_nan` must not be None")
    if not isinstance(params["allow_nan"], bool):
        raise StyxValidationError(f'`allow_nan` has the wrong type: Received `{type(params.get("allow_nan", False))}` expected `bool`')


def v_3d_undump_cargs(
    params: V3dUndumpParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("3dUndump")
    cargs.extend([execution.input_file(f) for f in params.get("input_files", None)])
    if params.get("prefix", None) is not None:
        cargs.extend([
            "-prefix",
            params.get("prefix", None)
        ])
    if params.get("master", None) is not None:
        cargs.extend([
            "-master",
            execution.input_file(params.get("master", None))
        ])
    if params.get("dimensions", None) is not None:
        cargs.extend([
            "-dimen",
            *map(str, params.get("dimensions", None))
        ])
    if params.get("mask", None) is not None:
        cargs.extend([
            "-mask",
            execution.input_file(params.get("mask", None))
        ])
    if params.get("datatype", None) is not None:
        cargs.extend([
            "-datum",
            params.get("datatype", None)
        ])
    if params.get("dval", None) is not None:
        cargs.extend([
            "-dval",
            str(params.get("dval", None))
        ])
    if params.get("fval", None) is not None:
        cargs.extend([
            "-fval",
            str(params.get("fval", None))
        ])
    if params.get("ijk", False):
        cargs.append("-ijk")
    if params.get("xyz", False):
        cargs.append("-xyz")
    if params.get("sphere_radius", None) is not None:
        cargs.extend([
            "-srad",
            str(params.get("sphere_radius", None))
        ])
    if params.get("cube_mode", False):
        cargs.append("-cubes")
    if params.get("orient", None) is not None:
        cargs.extend([
            "-orient",
            params.get("orient", None)
        ])
    if params.get("head_only", False):
        cargs.append("-head_only")
    if params.get("roimask", None) is not None:
        cargs.extend([
            "-ROImask",
            execution.input_file(params.get("roimask", None))
        ])
    if params.get("allow_nan", False):
        cargs.append("-allow_NaN")
    return cargs


def v_3d_undump_outputs(
    params: V3dUndumpParamsDict,
    execution: Execution,
) -> V3dUndumpOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = V3dUndumpOutputs(
        root=execution.output_file("."),
        outfile=execution.output_file(params.get("prefix", None) + ".nii.gz") if (params.get("prefix") is not None) else None,
    )
    return ret


def v_3d_undump_execute(
    params: V3dUndumpParamsDict,
    runner: Runner | None = None,
) -> V3dUndumpOutputs:
    """
    3dUndump
    
    Assembles a 3D dataset from an ASCII list of coordinates and optionally
    values.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `V3dUndumpOutputs`).
    """
    v_3d_undump_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(V_3D_UNDUMP_METADATA)
    params = execution.params(params)
    cargs = v_3d_undump_cargs(params, execution)
    ret = v_3d_undump_outputs(params, execution)
    execution.run(cargs)
    return ret


def v_3d_undump(
    input_files: list[InputPathType],
    prefix: str | None = None,
    master: InputPathType | None = None,
    dimensions: list[float] | None = None,
    mask: InputPathType | None = None,
    datatype: str | None = None,
    dval: float | None = None,
    fval: float | None = None,
    ijk: bool = False,
    xyz: bool = False,
    sphere_radius: float | None = None,
    cube_mode: bool = False,
    orient: str | None = None,
    head_only: bool = False,
    roimask: InputPathType | None = None,
    allow_nan: bool = False,
    runner: Runner | None = None,
) -> V3dUndumpOutputs:
    """
    3dUndump
    
    Assembles a 3D dataset from an ASCII list of coordinates and optionally
    values.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        input_files: Input ASCII file(s), with one voxel specification per\
            line.
        prefix: 'ppp' is the prefix for the output dataset [default = undump].
        master: 'mmm' is the master dataset, whose geometry will determine the\
            geometry of the output.
        dimensions: Sets the dimensions of the output dataset to be I by J by K\
            voxels.
        mask: Specifies a mask dataset 'MMM', which will control which voxels\
            are allowed to get values set.
        datatype: 'type' determines the voxel data type of the output, which\
            may be byte, short, or float [default = short].
        dval: 'vvv' is the default value stored in each input voxel that does\
            not have a value supplied in the input file [default = 1].
        fval: 'fff' is the fill value, used for each voxel in the output\
            dataset that is NOT listed in the input file [default = 0].
        ijk: Coordinates in the input file are (i,j,k) index triples.
        xyz: Coordinates in the input file are (x,y,z) spatial coordinates, in\
            mm.
        sphere_radius: Specifies that a sphere of radius 'rrr' will be filled\
            about each input (x,y,z) or (i,j,k) voxel.
        cube_mode: Put cubes down instead of spheres. The 'radius' then is half\
            the length of a side.
        orient: Specifies the coordinate order used by -xyz. The code must be 3\
            letters, one each from the pairs {R,L} {A,P} {I,S}.
        head_only: Creates only the .HEAD file.
        roimask: Specifies which voxels get what numbers by using a dataset\
            'rrr', instead of coordinates.
        allow_nan: Allow NaN (not-a-number) values to be entered.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `V3dUndumpOutputs`).
    """
    params = v_3d_undump_params(
        input_files=input_files,
        prefix=prefix,
        master=master,
        dimensions=dimensions,
        mask=mask,
        datatype=datatype,
        dval=dval,
        fval=fval,
        ijk=ijk,
        xyz=xyz,
        sphere_radius=sphere_radius,
        cube_mode=cube_mode,
        orient=orient,
        head_only=head_only,
        roimask=roimask,
        allow_nan=allow_nan,
    )
    return v_3d_undump_execute(params, runner)


__all__ = [
    "V3dUndumpOutputs",
    "V3dUndumpParamsDict",
    "V3dUndumpParamsDictTagged",
    "V_3D_UNDUMP_METADATA",
    "v_3d_undump",
    "v_3d_undump_execute",
    "v_3d_undump_params",
]
