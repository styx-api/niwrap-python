# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

XMAT_TOOL_PY_METADATA = Metadata(
    id="c4f4d93cb6f2d3928a755ef50fd462733504124e.boutiques",
    name="xmat_tool.py",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_XmatToolPyParamsDictNoTag = typing.TypedDict('_XmatToolPyParamsDictNoTag', {
    "no_gui": bool,
    "load_xmat": typing.NotRequired[InputPathType | None],
    "load_1d": typing.NotRequired[InputPathType | None],
    "choose_cols": typing.NotRequired[str | None],
    "choose_nonzero_cols": bool,
    "chrono": bool,
    "cormat_cutoff": typing.NotRequired[float | None],
    "cosmat_cutoff": typing.NotRequired[float | None],
    "cosmat_motion": bool,
    "verb": typing.NotRequired[float | None],
    "show_col_types": bool,
    "show_conds": bool,
    "show_cormat": bool,
    "show_cormat_warnings": bool,
    "show_cosmat": bool,
    "show_cosmat_warnings": bool,
    "show_fit_betas": bool,
    "show_fit_ts": bool,
    "show_xmat": bool,
    "show_1d": bool,
    "gui_plot_xmat_as_one": bool,
})
XmatToolPyParamsDictTagged = typing.TypedDict('XmatToolPyParamsDictTagged', {
    "@type": typing.Literal["afni/xmat_tool.py"],
    "no_gui": bool,
    "load_xmat": typing.NotRequired[InputPathType | None],
    "load_1d": typing.NotRequired[InputPathType | None],
    "choose_cols": typing.NotRequired[str | None],
    "choose_nonzero_cols": bool,
    "chrono": bool,
    "cormat_cutoff": typing.NotRequired[float | None],
    "cosmat_cutoff": typing.NotRequired[float | None],
    "cosmat_motion": bool,
    "verb": typing.NotRequired[float | None],
    "show_col_types": bool,
    "show_conds": bool,
    "show_cormat": bool,
    "show_cormat_warnings": bool,
    "show_cosmat": bool,
    "show_cosmat_warnings": bool,
    "show_fit_betas": bool,
    "show_fit_ts": bool,
    "show_xmat": bool,
    "show_1d": bool,
    "gui_plot_xmat_as_one": bool,
})
XmatToolPyParamsDict = _XmatToolPyParamsDictNoTag | XmatToolPyParamsDictTagged


class XmatToolPyOutputs(typing.NamedTuple):
    """
    Output object returned when calling `XmatToolPyParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_fitts: OutputPathType
    """Output fit time series"""


def xmat_tool_py_params(
    no_gui: bool = False,
    load_xmat: InputPathType | None = None,
    load_1d: InputPathType | None = None,
    choose_cols: str | None = None,
    choose_nonzero_cols: bool = False,
    chrono: bool = False,
    cormat_cutoff: float | None = None,
    cosmat_cutoff: float | None = None,
    cosmat_motion: bool = False,
    verb: float | None = None,
    show_col_types: bool = False,
    show_conds: bool = False,
    show_cormat: bool = False,
    show_cormat_warnings: bool = False,
    show_cosmat: bool = False,
    show_cosmat_warnings: bool = False,
    show_fit_betas: bool = False,
    show_fit_ts: bool = False,
    show_xmat: bool = False,
    show_1d: bool = False,
    gui_plot_xmat_as_one: bool = False,
) -> XmatToolPyParamsDictTagged:
    """
    Build parameters.
    
    Args:
        no_gui: Do not start the GUI.
        load_xmat: Load the AFNI X-matrix.
        load_1d: Load the 1D time series.
        choose_cols: Select columns to fit against.
        choose_nonzero_cols: Select only non-zero columns.
        chrono: Apply options chronologically.
        cormat_cutoff: Set min cutoff for correlation matrix warnings.
        cosmat_cutoff: Set min cutoff for cosine matrix warnings.
        cosmat_motion: Include motion in cosine matrix warnings.
        verb: Set the verbose level. Valid levels are currently 0..5.
        show_col_types: Display columns by regressor types.
        show_conds: Display a list of condition numbers.
        show_cormat: Display the correlation matrix.
        show_cormat_warnings: Show correlation matrix warnings.
        show_cosmat: Display the cosine matrix.
        show_cosmat_warnings: Show cosine matrix warnings.
        show_fit_betas: Show fit betas.
        show_fit_ts: Show fit time series.
        show_xmat: Display general X-matrix information.
        show_1d: Display general 1D information.
        gui_plot_xmat_as_one: Plot Xmat columns on single axis.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/xmat_tool.py",
        "no_gui": no_gui,
        "choose_nonzero_cols": choose_nonzero_cols,
        "chrono": chrono,
        "cosmat_motion": cosmat_motion,
        "show_col_types": show_col_types,
        "show_conds": show_conds,
        "show_cormat": show_cormat,
        "show_cormat_warnings": show_cormat_warnings,
        "show_cosmat": show_cosmat,
        "show_cosmat_warnings": show_cosmat_warnings,
        "show_fit_betas": show_fit_betas,
        "show_fit_ts": show_fit_ts,
        "show_xmat": show_xmat,
        "show_1d": show_1d,
        "gui_plot_xmat_as_one": gui_plot_xmat_as_one,
    }
    if load_xmat is not None:
        params["load_xmat"] = load_xmat
    if load_1d is not None:
        params["load_1d"] = load_1d
    if choose_cols is not None:
        params["choose_cols"] = choose_cols
    if cormat_cutoff is not None:
        params["cormat_cutoff"] = cormat_cutoff
    if cosmat_cutoff is not None:
        params["cosmat_cutoff"] = cosmat_cutoff
    if verb is not None:
        params["verb"] = verb
    return params


def xmat_tool_py_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `XmatToolPyParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("no_gui", False) is None:
        raise StyxValidationError("`no_gui` must not be None")
    if not isinstance(params["no_gui"], bool):
        raise StyxValidationError(f'`no_gui` has the wrong type: Received `{type(params.get("no_gui", False))}` expected `bool`')
    if params.get("load_xmat", None) is not None:
        if not isinstance(params["load_xmat"], (pathlib.Path, str)):
            raise StyxValidationError(f'`load_xmat` has the wrong type: Received `{type(params.get("load_xmat", None))}` expected `InputPathType | None`')
    if params.get("load_1d", None) is not None:
        if not isinstance(params["load_1d"], (pathlib.Path, str)):
            raise StyxValidationError(f'`load_1d` has the wrong type: Received `{type(params.get("load_1d", None))}` expected `InputPathType | None`')
    if params.get("choose_cols", None) is not None:
        if not isinstance(params["choose_cols"], str):
            raise StyxValidationError(f'`choose_cols` has the wrong type: Received `{type(params.get("choose_cols", None))}` expected `str | None`')
    if params.get("choose_nonzero_cols", False) is None:
        raise StyxValidationError("`choose_nonzero_cols` must not be None")
    if not isinstance(params["choose_nonzero_cols"], bool):
        raise StyxValidationError(f'`choose_nonzero_cols` has the wrong type: Received `{type(params.get("choose_nonzero_cols", False))}` expected `bool`')
    if params.get("chrono", False) is None:
        raise StyxValidationError("`chrono` must not be None")
    if not isinstance(params["chrono"], bool):
        raise StyxValidationError(f'`chrono` has the wrong type: Received `{type(params.get("chrono", False))}` expected `bool`')
    if params.get("cormat_cutoff", None) is not None:
        if not isinstance(params["cormat_cutoff"], (float, int)):
            raise StyxValidationError(f'`cormat_cutoff` has the wrong type: Received `{type(params.get("cormat_cutoff", None))}` expected `float | None`')
    if params.get("cosmat_cutoff", None) is not None:
        if not isinstance(params["cosmat_cutoff"], (float, int)):
            raise StyxValidationError(f'`cosmat_cutoff` has the wrong type: Received `{type(params.get("cosmat_cutoff", None))}` expected `float | None`')
    if params.get("cosmat_motion", False) is None:
        raise StyxValidationError("`cosmat_motion` must not be None")
    if not isinstance(params["cosmat_motion"], bool):
        raise StyxValidationError(f'`cosmat_motion` has the wrong type: Received `{type(params.get("cosmat_motion", False))}` expected `bool`')
    if params.get("verb", None) is not None:
        if not isinstance(params["verb"], (float, int)):
            raise StyxValidationError(f'`verb` has the wrong type: Received `{type(params.get("verb", None))}` expected `float | None`')
    if params.get("show_col_types", False) is None:
        raise StyxValidationError("`show_col_types` must not be None")
    if not isinstance(params["show_col_types"], bool):
        raise StyxValidationError(f'`show_col_types` has the wrong type: Received `{type(params.get("show_col_types", False))}` expected `bool`')
    if params.get("show_conds", False) is None:
        raise StyxValidationError("`show_conds` must not be None")
    if not isinstance(params["show_conds"], bool):
        raise StyxValidationError(f'`show_conds` has the wrong type: Received `{type(params.get("show_conds", False))}` expected `bool`')
    if params.get("show_cormat", False) is None:
        raise StyxValidationError("`show_cormat` must not be None")
    if not isinstance(params["show_cormat"], bool):
        raise StyxValidationError(f'`show_cormat` has the wrong type: Received `{type(params.get("show_cormat", False))}` expected `bool`')
    if params.get("show_cormat_warnings", False) is None:
        raise StyxValidationError("`show_cormat_warnings` must not be None")
    if not isinstance(params["show_cormat_warnings"], bool):
        raise StyxValidationError(f'`show_cormat_warnings` has the wrong type: Received `{type(params.get("show_cormat_warnings", False))}` expected `bool`')
    if params.get("show_cosmat", False) is None:
        raise StyxValidationError("`show_cosmat` must not be None")
    if not isinstance(params["show_cosmat"], bool):
        raise StyxValidationError(f'`show_cosmat` has the wrong type: Received `{type(params.get("show_cosmat", False))}` expected `bool`')
    if params.get("show_cosmat_warnings", False) is None:
        raise StyxValidationError("`show_cosmat_warnings` must not be None")
    if not isinstance(params["show_cosmat_warnings"], bool):
        raise StyxValidationError(f'`show_cosmat_warnings` has the wrong type: Received `{type(params.get("show_cosmat_warnings", False))}` expected `bool`')
    if params.get("show_fit_betas", False) is None:
        raise StyxValidationError("`show_fit_betas` must not be None")
    if not isinstance(params["show_fit_betas"], bool):
        raise StyxValidationError(f'`show_fit_betas` has the wrong type: Received `{type(params.get("show_fit_betas", False))}` expected `bool`')
    if params.get("show_fit_ts", False) is None:
        raise StyxValidationError("`show_fit_ts` must not be None")
    if not isinstance(params["show_fit_ts"], bool):
        raise StyxValidationError(f'`show_fit_ts` has the wrong type: Received `{type(params.get("show_fit_ts", False))}` expected `bool`')
    if params.get("show_xmat", False) is None:
        raise StyxValidationError("`show_xmat` must not be None")
    if not isinstance(params["show_xmat"], bool):
        raise StyxValidationError(f'`show_xmat` has the wrong type: Received `{type(params.get("show_xmat", False))}` expected `bool`')
    if params.get("show_1d", False) is None:
        raise StyxValidationError("`show_1d` must not be None")
    if not isinstance(params["show_1d"], bool):
        raise StyxValidationError(f'`show_1d` has the wrong type: Received `{type(params.get("show_1d", False))}` expected `bool`')
    if params.get("gui_plot_xmat_as_one", False) is None:
        raise StyxValidationError("`gui_plot_xmat_as_one` must not be None")
    if not isinstance(params["gui_plot_xmat_as_one"], bool):
        raise StyxValidationError(f'`gui_plot_xmat_as_one` has the wrong type: Received `{type(params.get("gui_plot_xmat_as_one", False))}` expected `bool`')


def xmat_tool_py_cargs(
    params: XmatToolPyParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("xmat_tool.py")
    if params.get("no_gui", False):
        cargs.append("-no_gui")
    if params.get("load_xmat", None) is not None:
        cargs.extend([
            "-load_xmat",
            execution.input_file(params.get("load_xmat", None))
        ])
    if params.get("load_1d", None) is not None:
        cargs.extend([
            "-load_1D",
            execution.input_file(params.get("load_1d", None))
        ])
    if params.get("choose_cols", None) is not None:
        cargs.extend([
            "-choose_cols",
            params.get("choose_cols", None)
        ])
    if params.get("choose_nonzero_cols", False):
        cargs.append("-choose_nonzero_cols")
    if params.get("chrono", False):
        cargs.append("-chrono")
    if params.get("cormat_cutoff", None) is not None:
        cargs.extend([
            "-cormat_cutoff",
            str(params.get("cormat_cutoff", None))
        ])
    if params.get("cosmat_cutoff", None) is not None:
        cargs.extend([
            "-cosmat_cutoff",
            str(params.get("cosmat_cutoff", None))
        ])
    if params.get("cosmat_motion", False):
        cargs.append("-cosmat_motion")
    if params.get("verb", None) is not None:
        cargs.extend([
            "-verb",
            str(params.get("verb", None))
        ])
    if params.get("show_col_types", False):
        cargs.append("-show_col_types")
    if params.get("show_conds", False):
        cargs.append("-show_conds")
    if params.get("show_cormat", False):
        cargs.append("-show_cormat")
    if params.get("show_cormat_warnings", False):
        cargs.append("-show_cormat_warnings")
    if params.get("show_cosmat", False):
        cargs.append("-show_cosmat")
    if params.get("show_cosmat_warnings", False):
        cargs.append("-show_cosmat_warnings")
    if params.get("show_fit_betas", False):
        cargs.append("-show_fit_betas")
    if params.get("show_fit_ts", False):
        cargs.append("-show_fit_ts")
    if params.get("show_xmat", False):
        cargs.append("-show_xmat")
    if params.get("show_1d", False):
        cargs.append("-show_1D")
    if params.get("gui_plot_xmat_as_one", False):
        cargs.append("-gui_plot_xmat_as_one")
    return cargs


def xmat_tool_py_outputs(
    params: XmatToolPyParamsDict,
    execution: Execution,
) -> XmatToolPyOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = XmatToolPyOutputs(
        root=execution.output_file("."),
        output_fitts=execution.output_file("fitts.1D"),
    )
    return ret


def xmat_tool_py_execute(
    params: XmatToolPyParamsDict,
    runner: Runner | None = None,
) -> XmatToolPyOutputs:
    """
    xmat_tool.py
    
    A tool for evaluating an AFNI X-matrix.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `XmatToolPyOutputs`).
    """
    xmat_tool_py_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(XMAT_TOOL_PY_METADATA)
    params = execution.params(params)
    cargs = xmat_tool_py_cargs(params, execution)
    ret = xmat_tool_py_outputs(params, execution)
    execution.run(cargs)
    return ret


def xmat_tool_py(
    no_gui: bool = False,
    load_xmat: InputPathType | None = None,
    load_1d: InputPathType | None = None,
    choose_cols: str | None = None,
    choose_nonzero_cols: bool = False,
    chrono: bool = False,
    cormat_cutoff: float | None = None,
    cosmat_cutoff: float | None = None,
    cosmat_motion: bool = False,
    verb: float | None = None,
    show_col_types: bool = False,
    show_conds: bool = False,
    show_cormat: bool = False,
    show_cormat_warnings: bool = False,
    show_cosmat: bool = False,
    show_cosmat_warnings: bool = False,
    show_fit_betas: bool = False,
    show_fit_ts: bool = False,
    show_xmat: bool = False,
    show_1d: bool = False,
    gui_plot_xmat_as_one: bool = False,
    runner: Runner | None = None,
) -> XmatToolPyOutputs:
    """
    xmat_tool.py
    
    A tool for evaluating an AFNI X-matrix.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        no_gui: Do not start the GUI.
        load_xmat: Load the AFNI X-matrix.
        load_1d: Load the 1D time series.
        choose_cols: Select columns to fit against.
        choose_nonzero_cols: Select only non-zero columns.
        chrono: Apply options chronologically.
        cormat_cutoff: Set min cutoff for correlation matrix warnings.
        cosmat_cutoff: Set min cutoff for cosine matrix warnings.
        cosmat_motion: Include motion in cosine matrix warnings.
        verb: Set the verbose level. Valid levels are currently 0..5.
        show_col_types: Display columns by regressor types.
        show_conds: Display a list of condition numbers.
        show_cormat: Display the correlation matrix.
        show_cormat_warnings: Show correlation matrix warnings.
        show_cosmat: Display the cosine matrix.
        show_cosmat_warnings: Show cosine matrix warnings.
        show_fit_betas: Show fit betas.
        show_fit_ts: Show fit time series.
        show_xmat: Display general X-matrix information.
        show_1d: Display general 1D information.
        gui_plot_xmat_as_one: Plot Xmat columns on single axis.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `XmatToolPyOutputs`).
    """
    params = xmat_tool_py_params(
        no_gui=no_gui,
        load_xmat=load_xmat,
        load_1d=load_1d,
        choose_cols=choose_cols,
        choose_nonzero_cols=choose_nonzero_cols,
        chrono=chrono,
        cormat_cutoff=cormat_cutoff,
        cosmat_cutoff=cosmat_cutoff,
        cosmat_motion=cosmat_motion,
        verb=verb,
        show_col_types=show_col_types,
        show_conds=show_conds,
        show_cormat=show_cormat,
        show_cormat_warnings=show_cormat_warnings,
        show_cosmat=show_cosmat,
        show_cosmat_warnings=show_cosmat_warnings,
        show_fit_betas=show_fit_betas,
        show_fit_ts=show_fit_ts,
        show_xmat=show_xmat,
        show_1d=show_1d,
        gui_plot_xmat_as_one=gui_plot_xmat_as_one,
    )
    return xmat_tool_py_execute(params, runner)


__all__ = [
    "XMAT_TOOL_PY_METADATA",
    "XmatToolPyOutputs",
    "XmatToolPyParamsDict",
    "XmatToolPyParamsDictTagged",
    "xmat_tool_py",
    "xmat_tool_py_execute",
    "xmat_tool_py_params",
]
