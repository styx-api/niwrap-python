# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

V__ADD_EDGE_METADATA = Metadata(
    id="8cd52f727a7c5099091545565ae09d97e24fe8dd.boutiques",
    name="@AddEdge",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_VAddEdgeParamsDictNoTag = typing.TypedDict('_VAddEdgeParamsDictNoTag', {
    "input_files": list[InputPathType],
    "examine_list": typing.NotRequired[str | None],
    "ax_mont": typing.NotRequired[str | None],
    "ax_geom": typing.NotRequired[str | None],
    "sag_geom": typing.NotRequired[str | None],
    "layout_file": typing.NotRequired[str | None],
    "no_layout": bool,
    "edge_percentile": typing.NotRequired[int | None],
    "single_edge": bool,
    "opacity": typing.NotRequired[int | None],
    "keep_temp": bool,
    "no_deoblique": bool,
    "auto_record": bool,
    "auto": bool,
    "no_auto": bool,
})
VAddEdgeParamsDictTagged = typing.TypedDict('VAddEdgeParamsDictTagged', {
    "@type": typing.Literal["afni/@AddEdge"],
    "input_files": list[InputPathType],
    "examine_list": typing.NotRequired[str | None],
    "ax_mont": typing.NotRequired[str | None],
    "ax_geom": typing.NotRequired[str | None],
    "sag_geom": typing.NotRequired[str | None],
    "layout_file": typing.NotRequired[str | None],
    "no_layout": bool,
    "edge_percentile": typing.NotRequired[int | None],
    "single_edge": bool,
    "opacity": typing.NotRequired[int | None],
    "keep_temp": bool,
    "no_deoblique": bool,
    "auto_record": bool,
    "auto": bool,
    "no_auto": bool,
})
VAddEdgeParamsDict = _VAddEdgeParamsDictNoTag | VAddEdgeParamsDictTagged


class VAddEdgeOutputs(typing.NamedTuple):
    """
    Output object returned when calling `VAddEdgeParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    dset_nn_ec: OutputPathType
    """Edge composite image of dataset with its own edges"""
    base_dset_dset_nn_ec: OutputPathType
    """Edge composite image of base dataset together with the edges of the input
    dset_nn dataset"""
    base_dset_e3: OutputPathType
    """Edge-only datasets - used in single edge display option"""
    dset_nn_e3: OutputPathType
    """Edge-only input datasets - used in single edge display option"""


def v__add_edge_params(
    input_files: list[InputPathType],
    examine_list: str | None = None,
    ax_mont: str | None = None,
    ax_geom: str | None = None,
    sag_geom: str | None = None,
    layout_file: str | None = None,
    no_layout: bool = False,
    edge_percentile: int | None = None,
    single_edge: bool = False,
    opacity: int | None = None,
    keep_temp: bool = False,
    no_deoblique: bool = False,
    auto_record: bool = False,
    auto: bool = False,
    no_auto: bool = False,
) -> VAddEdgeParamsDictTagged:
    """
    Build parameters.
    
    Args:
        input_files: Input datasets.
        examine_list: Use list of paired datasets from file.
        ax_mont: Axial montage string (default='2x2:24').
        ax_geom: Axial image window geometry (default='777x702+433+334').
        sag_geom: Sagittal image window geometry (default='540x360+4+436').
        layout_file: Use AFNI layout file for display.
        no_layout: Do not use layout. Use AFNI as it is open.
        edge_percentile: Specify edge threshold value (default=30%).
        single_edge: Show only a single edge in composite image.
        opacity: Set opacity of overlay (default=9 opaque).
        keep_temp: Do not remove temporary files.
        no_deoblique: Do not deoblique any data to show overlap.
        auto_record: Save JPEG files of current slices without prompting.
        auto: Closes old AFNI sessions and relaunches a new one ready to listen\
            to @AddEdge in review mode.
        no_auto: Opposite of -auto.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/@AddEdge",
        "input_files": input_files,
        "no_layout": no_layout,
        "single_edge": single_edge,
        "keep_temp": keep_temp,
        "no_deoblique": no_deoblique,
        "auto_record": auto_record,
        "auto": auto,
        "no_auto": no_auto,
    }
    if examine_list is not None:
        params["examine_list"] = examine_list
    if ax_mont is not None:
        params["ax_mont"] = ax_mont
    if ax_geom is not None:
        params["ax_geom"] = ax_geom
    if sag_geom is not None:
        params["sag_geom"] = sag_geom
    if layout_file is not None:
        params["layout_file"] = layout_file
    if edge_percentile is not None:
        params["edge_percentile"] = edge_percentile
    if opacity is not None:
        params["opacity"] = opacity
    return params


def v__add_edge_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `VAddEdgeParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("input_files", None) is None:
        raise StyxValidationError("`input_files` must not be None")
    if not isinstance(params["input_files"], list):
        raise StyxValidationError(f'`input_files` has the wrong type: Received `{type(params.get("input_files", None))}` expected `list[InputPathType]`')
    for e in params["input_files"]:
        if not isinstance(e, (pathlib.Path, str)):
            raise StyxValidationError(f'`input_files` has the wrong type: Received `{type(params.get("input_files", None))}` expected `list[InputPathType]`')
    if params.get("examine_list", None) is not None:
        if not isinstance(params["examine_list"], str):
            raise StyxValidationError(f'`examine_list` has the wrong type: Received `{type(params.get("examine_list", None))}` expected `str | None`')
    if params.get("ax_mont", None) is not None:
        if not isinstance(params["ax_mont"], str):
            raise StyxValidationError(f'`ax_mont` has the wrong type: Received `{type(params.get("ax_mont", None))}` expected `str | None`')
    if params.get("ax_geom", None) is not None:
        if not isinstance(params["ax_geom"], str):
            raise StyxValidationError(f'`ax_geom` has the wrong type: Received `{type(params.get("ax_geom", None))}` expected `str | None`')
    if params.get("sag_geom", None) is not None:
        if not isinstance(params["sag_geom"], str):
            raise StyxValidationError(f'`sag_geom` has the wrong type: Received `{type(params.get("sag_geom", None))}` expected `str | None`')
    if params.get("layout_file", None) is not None:
        if not isinstance(params["layout_file"], str):
            raise StyxValidationError(f'`layout_file` has the wrong type: Received `{type(params.get("layout_file", None))}` expected `str | None`')
    if params.get("no_layout", False) is None:
        raise StyxValidationError("`no_layout` must not be None")
    if not isinstance(params["no_layout"], bool):
        raise StyxValidationError(f'`no_layout` has the wrong type: Received `{type(params.get("no_layout", False))}` expected `bool`')
    if params.get("edge_percentile", None) is not None:
        if not isinstance(params["edge_percentile"], int):
            raise StyxValidationError(f'`edge_percentile` has the wrong type: Received `{type(params.get("edge_percentile", None))}` expected `int | None`')
    if params.get("single_edge", False) is None:
        raise StyxValidationError("`single_edge` must not be None")
    if not isinstance(params["single_edge"], bool):
        raise StyxValidationError(f'`single_edge` has the wrong type: Received `{type(params.get("single_edge", False))}` expected `bool`')
    if params.get("opacity", None) is not None:
        if not isinstance(params["opacity"], int):
            raise StyxValidationError(f'`opacity` has the wrong type: Received `{type(params.get("opacity", None))}` expected `int | None`')
    if params.get("keep_temp", False) is None:
        raise StyxValidationError("`keep_temp` must not be None")
    if not isinstance(params["keep_temp"], bool):
        raise StyxValidationError(f'`keep_temp` has the wrong type: Received `{type(params.get("keep_temp", False))}` expected `bool`')
    if params.get("no_deoblique", False) is None:
        raise StyxValidationError("`no_deoblique` must not be None")
    if not isinstance(params["no_deoblique"], bool):
        raise StyxValidationError(f'`no_deoblique` has the wrong type: Received `{type(params.get("no_deoblique", False))}` expected `bool`')
    if params.get("auto_record", False) is None:
        raise StyxValidationError("`auto_record` must not be None")
    if not isinstance(params["auto_record"], bool):
        raise StyxValidationError(f'`auto_record` has the wrong type: Received `{type(params.get("auto_record", False))}` expected `bool`')
    if params.get("auto", False) is None:
        raise StyxValidationError("`auto` must not be None")
    if not isinstance(params["auto"], bool):
        raise StyxValidationError(f'`auto` has the wrong type: Received `{type(params.get("auto", False))}` expected `bool`')
    if params.get("no_auto", False) is None:
        raise StyxValidationError("`no_auto` must not be None")
    if not isinstance(params["no_auto"], bool):
        raise StyxValidationError(f'`no_auto` has the wrong type: Received `{type(params.get("no_auto", False))}` expected `bool`')


def v__add_edge_cargs(
    params: VAddEdgeParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("@AddEdge")
    cargs.extend([execution.input_file(f) for f in params.get("input_files", None)])
    if params.get("examine_list", None) is not None:
        cargs.extend([
            "-examinelist",
            params.get("examine_list", None)
        ])
    if params.get("ax_mont", None) is not None:
        cargs.extend([
            "-ax_mont",
            params.get("ax_mont", None)
        ])
    if params.get("ax_geom", None) is not None:
        cargs.extend([
            "-ax_geom",
            params.get("ax_geom", None)
        ])
    if params.get("sag_geom", None) is not None:
        cargs.extend([
            "-sag_geom",
            params.get("sag_geom", None)
        ])
    if params.get("layout_file", None) is not None:
        cargs.extend([
            "-layout",
            params.get("layout_file", None)
        ])
    if params.get("no_layout", False):
        cargs.append("-no_layout")
    if params.get("edge_percentile", None) is not None:
        cargs.extend([
            "-edge_percentile",
            str(params.get("edge_percentile", None))
        ])
    if params.get("single_edge", False):
        cargs.append("-single_edge")
    if params.get("opacity", None) is not None:
        cargs.extend([
            "-opa",
            str(params.get("opacity", None))
        ])
    if params.get("keep_temp", False):
        cargs.append("-keep_temp")
    if params.get("no_deoblique", False):
        cargs.append("-no_deoblique")
    if params.get("auto_record", False):
        cargs.append("-auto_record")
    if params.get("auto", False):
        cargs.append("-auto")
    if params.get("no_auto", False):
        cargs.append("-no_auto")
    return cargs


def v__add_edge_outputs(
    params: VAddEdgeParamsDict,
    execution: Execution,
) -> VAddEdgeOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = VAddEdgeOutputs(
        root=execution.output_file("."),
        dset_nn_ec=execution.output_file("dset_nn_ec"),
        base_dset_dset_nn_ec=execution.output_file("base_dset_dset_nn_ec"),
        base_dset_e3=execution.output_file("base_dset_e3"),
        dset_nn_e3=execution.output_file("dset_nn_e3"),
    )
    return ret


def v__add_edge_execute(
    params: VAddEdgeParamsDict,
    runner: Runner | None = None,
) -> VAddEdgeOutputs:
    """
    @AddEdge
    
    A script to create composite edge-enhanced datasets and drive the AFNI
    interface to display the results.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `VAddEdgeOutputs`).
    """
    v__add_edge_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(V__ADD_EDGE_METADATA)
    params = execution.params(params)
    cargs = v__add_edge_cargs(params, execution)
    ret = v__add_edge_outputs(params, execution)
    execution.run(cargs)
    return ret


def v__add_edge(
    input_files: list[InputPathType],
    examine_list: str | None = None,
    ax_mont: str | None = None,
    ax_geom: str | None = None,
    sag_geom: str | None = None,
    layout_file: str | None = None,
    no_layout: bool = False,
    edge_percentile: int | None = None,
    single_edge: bool = False,
    opacity: int | None = None,
    keep_temp: bool = False,
    no_deoblique: bool = False,
    auto_record: bool = False,
    auto: bool = False,
    no_auto: bool = False,
    runner: Runner | None = None,
) -> VAddEdgeOutputs:
    """
    @AddEdge
    
    A script to create composite edge-enhanced datasets and drive the AFNI
    interface to display the results.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        input_files: Input datasets.
        examine_list: Use list of paired datasets from file.
        ax_mont: Axial montage string (default='2x2:24').
        ax_geom: Axial image window geometry (default='777x702+433+334').
        sag_geom: Sagittal image window geometry (default='540x360+4+436').
        layout_file: Use AFNI layout file for display.
        no_layout: Do not use layout. Use AFNI as it is open.
        edge_percentile: Specify edge threshold value (default=30%).
        single_edge: Show only a single edge in composite image.
        opacity: Set opacity of overlay (default=9 opaque).
        keep_temp: Do not remove temporary files.
        no_deoblique: Do not deoblique any data to show overlap.
        auto_record: Save JPEG files of current slices without prompting.
        auto: Closes old AFNI sessions and relaunches a new one ready to listen\
            to @AddEdge in review mode.
        no_auto: Opposite of -auto.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `VAddEdgeOutputs`).
    """
    params = v__add_edge_params(
        input_files=input_files,
        examine_list=examine_list,
        ax_mont=ax_mont,
        ax_geom=ax_geom,
        sag_geom=sag_geom,
        layout_file=layout_file,
        no_layout=no_layout,
        edge_percentile=edge_percentile,
        single_edge=single_edge,
        opacity=opacity,
        keep_temp=keep_temp,
        no_deoblique=no_deoblique,
        auto_record=auto_record,
        auto=auto,
        no_auto=no_auto,
    )
    return v__add_edge_execute(params, runner)


__all__ = [
    "VAddEdgeOutputs",
    "VAddEdgeParamsDict",
    "VAddEdgeParamsDictTagged",
    "V__ADD_EDGE_METADATA",
    "v__add_edge",
    "v__add_edge_execute",
    "v__add_edge_params",
]
