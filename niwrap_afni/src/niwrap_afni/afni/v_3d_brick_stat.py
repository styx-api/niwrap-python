# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

V_3D_BRICK_STAT_METADATA = Metadata(
    id="e3c343d74218f80738d6518abc69819afe7c7458.boutiques",
    name="3dBrickStat",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_V3dBrickStatParamsDictNoTag = typing.TypedDict('_V3dBrickStatParamsDictNoTag', {
    "dataset": str,
    "quick": bool,
    "slow": bool,
    "min": bool,
    "max": bool,
    "mean": bool,
    "sum": bool,
    "var": bool,
    "stdev": bool,
    "count": bool,
    "volume": bool,
    "positive": bool,
    "negative": bool,
    "zero": bool,
    "non_positive": bool,
    "non_negative": bool,
    "non_zero": bool,
    "absolute": bool,
    "nan": bool,
    "nonan": bool,
    "mask": typing.NotRequired[str | None],
    "mrange": typing.NotRequired[list[float] | None],
    "mvalue": typing.NotRequired[float | None],
    "automask": bool,
    "percentile": typing.NotRequired[list[float] | None],
    "perclist": typing.NotRequired[list[float] | None],
    "median": bool,
    "perc_quiet": bool,
    "ver": bool,
    "help": bool,
})
V3dBrickStatParamsDictTagged = typing.TypedDict('V3dBrickStatParamsDictTagged', {
    "@type": typing.Literal["afni/3dBrickStat"],
    "dataset": str,
    "quick": bool,
    "slow": bool,
    "min": bool,
    "max": bool,
    "mean": bool,
    "sum": bool,
    "var": bool,
    "stdev": bool,
    "count": bool,
    "volume": bool,
    "positive": bool,
    "negative": bool,
    "zero": bool,
    "non_positive": bool,
    "non_negative": bool,
    "non_zero": bool,
    "absolute": bool,
    "nan": bool,
    "nonan": bool,
    "mask": typing.NotRequired[str | None],
    "mrange": typing.NotRequired[list[float] | None],
    "mvalue": typing.NotRequired[float | None],
    "automask": bool,
    "percentile": typing.NotRequired[list[float] | None],
    "perclist": typing.NotRequired[list[float] | None],
    "median": bool,
    "perc_quiet": bool,
    "ver": bool,
    "help": bool,
})
V3dBrickStatParamsDict = _V3dBrickStatParamsDictNoTag | V3dBrickStatParamsDictTagged


class V3dBrickStatOutputs(typing.NamedTuple):
    """
    Output object returned when calling `V3dBrickStatParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    console_output: OutputPathType
    """Console output of computed statistics"""


def v_3d_brick_stat_params(
    dataset: str,
    quick: bool = False,
    slow: bool = False,
    min_: bool = False,
    max_: bool = False,
    mean: bool = False,
    sum_: bool = False,
    var: bool = False,
    stdev: bool = False,
    count: bool = False,
    volume: bool = False,
    positive: bool = False,
    negative: bool = False,
    zero: bool = False,
    non_positive: bool = False,
    non_negative: bool = False,
    non_zero: bool = False,
    absolute: bool = False,
    nan: bool = False,
    nonan: bool = False,
    mask: str | None = None,
    mrange: list[float] | None = None,
    mvalue: float | None = None,
    automask: bool = False,
    percentile: list[float] | None = None,
    perclist: list[float] | None = None,
    median: bool = False,
    perc_quiet: bool = False,
    ver: bool = False,
    help_: bool = False,
) -> V3dBrickStatParamsDictTagged:
    """
    Build parameters.
    
    Args:
        dataset: Input dataset.
        quick: Get the information from the header only (default).
        slow: Read the whole dataset to find the min and max values.
        min_: Print the minimum value in dataset.
        max_: Print the maximum value in dataset (default).
        mean: Print the mean value in dataset.
        sum_: Print the sum of values in the dataset.
        var: Print the variance in the dataset.
        stdev: Print the standard deviation in the dataset.
        count: Print the number of voxels included.
        volume: Print the volume of voxels included in microliters.
        positive: Include only positive voxel values.
        negative: Include only negative voxel values.
        zero: Include only zero voxel values.
        non_positive: Include only voxel values 0 or negative.
        non_negative: Include only voxel values 0 or greater.
        non_zero: Include only voxel values not equal to 0.
        absolute: Use absolute value of voxel values for all calculations.
        nan: Include only voxel values that are NaN or inf. Forces -slow mode.
        nonan: Exclude voxel values that are NaN or inf.
        mask: Use the specified dataset as mask to include/exclude voxels.
        mrange: Only accept values between MIN and MAX (inclusive) from the\
            mask.
        mvalue: Only accept values equal to VAL from the mask.
        automask: Automatically compute mask for dataset. Cannot be combined\
            with -mask.
        percentile: Compute and print percentile values from p0% to p1% at a\
            step of ps%. Only one sub-brick is accepted as input with this option.
        perclist: Like -percentile, but output the given percentiles.
        median: Shortcut for -percentile 50 1 50 (or -perclist 1 50).
        perc_quiet: Only print percentile results, not input percentile cutoffs.
        ver: Print author and version info.
        help_: Print help screen.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/3dBrickStat",
        "dataset": dataset,
        "quick": quick,
        "slow": slow,
        "min": min_,
        "max": max_,
        "mean": mean,
        "sum": sum_,
        "var": var,
        "stdev": stdev,
        "count": count,
        "volume": volume,
        "positive": positive,
        "negative": negative,
        "zero": zero,
        "non_positive": non_positive,
        "non_negative": non_negative,
        "non_zero": non_zero,
        "absolute": absolute,
        "nan": nan,
        "nonan": nonan,
        "automask": automask,
        "median": median,
        "perc_quiet": perc_quiet,
        "ver": ver,
        "help": help_,
    }
    if mask is not None:
        params["mask"] = mask
    if mrange is not None:
        params["mrange"] = mrange
    if mvalue is not None:
        params["mvalue"] = mvalue
    if percentile is not None:
        params["percentile"] = percentile
    if perclist is not None:
        params["perclist"] = perclist
    return params


def v_3d_brick_stat_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `V3dBrickStatParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("dataset", None) is None:
        raise StyxValidationError("`dataset` must not be None")
    if not isinstance(params["dataset"], str):
        raise StyxValidationError(f'`dataset` has the wrong type: Received `{type(params.get("dataset", None))}` expected `str`')
    if params.get("quick", False) is None:
        raise StyxValidationError("`quick` must not be None")
    if not isinstance(params["quick"], bool):
        raise StyxValidationError(f'`quick` has the wrong type: Received `{type(params.get("quick", False))}` expected `bool`')
    if params.get("slow", False) is None:
        raise StyxValidationError("`slow` must not be None")
    if not isinstance(params["slow"], bool):
        raise StyxValidationError(f'`slow` has the wrong type: Received `{type(params.get("slow", False))}` expected `bool`')
    if params.get("min", False) is None:
        raise StyxValidationError("`min` must not be None")
    if not isinstance(params["min"], bool):
        raise StyxValidationError(f'`min` has the wrong type: Received `{type(params.get("min", False))}` expected `bool`')
    if params.get("max", False) is None:
        raise StyxValidationError("`max` must not be None")
    if not isinstance(params["max"], bool):
        raise StyxValidationError(f'`max` has the wrong type: Received `{type(params.get("max", False))}` expected `bool`')
    if params.get("mean", False) is None:
        raise StyxValidationError("`mean` must not be None")
    if not isinstance(params["mean"], bool):
        raise StyxValidationError(f'`mean` has the wrong type: Received `{type(params.get("mean", False))}` expected `bool`')
    if params.get("sum", False) is None:
        raise StyxValidationError("`sum` must not be None")
    if not isinstance(params["sum"], bool):
        raise StyxValidationError(f'`sum` has the wrong type: Received `{type(params.get("sum", False))}` expected `bool`')
    if params.get("var", False) is None:
        raise StyxValidationError("`var` must not be None")
    if not isinstance(params["var"], bool):
        raise StyxValidationError(f'`var` has the wrong type: Received `{type(params.get("var", False))}` expected `bool`')
    if params.get("stdev", False) is None:
        raise StyxValidationError("`stdev` must not be None")
    if not isinstance(params["stdev"], bool):
        raise StyxValidationError(f'`stdev` has the wrong type: Received `{type(params.get("stdev", False))}` expected `bool`')
    if params.get("count", False) is None:
        raise StyxValidationError("`count` must not be None")
    if not isinstance(params["count"], bool):
        raise StyxValidationError(f'`count` has the wrong type: Received `{type(params.get("count", False))}` expected `bool`')
    if params.get("volume", False) is None:
        raise StyxValidationError("`volume` must not be None")
    if not isinstance(params["volume"], bool):
        raise StyxValidationError(f'`volume` has the wrong type: Received `{type(params.get("volume", False))}` expected `bool`')
    if params.get("positive", False) is None:
        raise StyxValidationError("`positive` must not be None")
    if not isinstance(params["positive"], bool):
        raise StyxValidationError(f'`positive` has the wrong type: Received `{type(params.get("positive", False))}` expected `bool`')
    if params.get("negative", False) is None:
        raise StyxValidationError("`negative` must not be None")
    if not isinstance(params["negative"], bool):
        raise StyxValidationError(f'`negative` has the wrong type: Received `{type(params.get("negative", False))}` expected `bool`')
    if params.get("zero", False) is None:
        raise StyxValidationError("`zero` must not be None")
    if not isinstance(params["zero"], bool):
        raise StyxValidationError(f'`zero` has the wrong type: Received `{type(params.get("zero", False))}` expected `bool`')
    if params.get("non_positive", False) is None:
        raise StyxValidationError("`non_positive` must not be None")
    if not isinstance(params["non_positive"], bool):
        raise StyxValidationError(f'`non_positive` has the wrong type: Received `{type(params.get("non_positive", False))}` expected `bool`')
    if params.get("non_negative", False) is None:
        raise StyxValidationError("`non_negative` must not be None")
    if not isinstance(params["non_negative"], bool):
        raise StyxValidationError(f'`non_negative` has the wrong type: Received `{type(params.get("non_negative", False))}` expected `bool`')
    if params.get("non_zero", False) is None:
        raise StyxValidationError("`non_zero` must not be None")
    if not isinstance(params["non_zero"], bool):
        raise StyxValidationError(f'`non_zero` has the wrong type: Received `{type(params.get("non_zero", False))}` expected `bool`')
    if params.get("absolute", False) is None:
        raise StyxValidationError("`absolute` must not be None")
    if not isinstance(params["absolute"], bool):
        raise StyxValidationError(f'`absolute` has the wrong type: Received `{type(params.get("absolute", False))}` expected `bool`')
    if params.get("nan", False) is None:
        raise StyxValidationError("`nan` must not be None")
    if not isinstance(params["nan"], bool):
        raise StyxValidationError(f'`nan` has the wrong type: Received `{type(params.get("nan", False))}` expected `bool`')
    if params.get("nonan", False) is None:
        raise StyxValidationError("`nonan` must not be None")
    if not isinstance(params["nonan"], bool):
        raise StyxValidationError(f'`nonan` has the wrong type: Received `{type(params.get("nonan", False))}` expected `bool`')
    if params.get("mask", None) is not None:
        if not isinstance(params["mask"], str):
            raise StyxValidationError(f'`mask` has the wrong type: Received `{type(params.get("mask", None))}` expected `str | None`')
    if params.get("mrange", None) is not None:
        if not isinstance(params["mrange"], list):
            raise StyxValidationError(f'`mrange` has the wrong type: Received `{type(params.get("mrange", None))}` expected `list[float] | None`')
        if len(params["mrange"]) != 2:
            raise StyxValidationError("Parameter `mrange` must contain exactly 2 elements")
        for e in params["mrange"]:
            if not isinstance(e, (float, int)):
                raise StyxValidationError(f'`mrange` has the wrong type: Received `{type(params.get("mrange", None))}` expected `list[float] | None`')
    if params.get("mvalue", None) is not None:
        if not isinstance(params["mvalue"], (float, int)):
            raise StyxValidationError(f'`mvalue` has the wrong type: Received `{type(params.get("mvalue", None))}` expected `float | None`')
    if params.get("automask", False) is None:
        raise StyxValidationError("`automask` must not be None")
    if not isinstance(params["automask"], bool):
        raise StyxValidationError(f'`automask` has the wrong type: Received `{type(params.get("automask", False))}` expected `bool`')
    if params.get("percentile", None) is not None:
        if not isinstance(params["percentile"], list):
            raise StyxValidationError(f'`percentile` has the wrong type: Received `{type(params.get("percentile", None))}` expected `list[float] | None`')
        if len(params["percentile"]) != 3:
            raise StyxValidationError("Parameter `percentile` must contain exactly 3 elements")
        for e in params["percentile"]:
            if not isinstance(e, (float, int)):
                raise StyxValidationError(f'`percentile` has the wrong type: Received `{type(params.get("percentile", None))}` expected `list[float] | None`')
    if params.get("perclist", None) is not None:
        if not isinstance(params["perclist"], list):
            raise StyxValidationError(f'`perclist` has the wrong type: Received `{type(params.get("perclist", None))}` expected `list[float] | None`')
        for e in params["perclist"]:
            if not isinstance(e, (float, int)):
                raise StyxValidationError(f'`perclist` has the wrong type: Received `{type(params.get("perclist", None))}` expected `list[float] | None`')
    if params.get("median", False) is None:
        raise StyxValidationError("`median` must not be None")
    if not isinstance(params["median"], bool):
        raise StyxValidationError(f'`median` has the wrong type: Received `{type(params.get("median", False))}` expected `bool`')
    if params.get("perc_quiet", False) is None:
        raise StyxValidationError("`perc_quiet` must not be None")
    if not isinstance(params["perc_quiet"], bool):
        raise StyxValidationError(f'`perc_quiet` has the wrong type: Received `{type(params.get("perc_quiet", False))}` expected `bool`')
    if params.get("ver", False) is None:
        raise StyxValidationError("`ver` must not be None")
    if not isinstance(params["ver"], bool):
        raise StyxValidationError(f'`ver` has the wrong type: Received `{type(params.get("ver", False))}` expected `bool`')
    if params.get("help", False) is None:
        raise StyxValidationError("`help` must not be None")
    if not isinstance(params["help"], bool):
        raise StyxValidationError(f'`help` has the wrong type: Received `{type(params.get("help", False))}` expected `bool`')


def v_3d_brick_stat_cargs(
    params: V3dBrickStatParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("3dBrickStat")
    cargs.append(params.get("dataset", None))
    if params.get("quick", False):
        cargs.append("-quick")
    if params.get("slow", False):
        cargs.append("-slow")
    if params.get("min", False):
        cargs.append("-min")
    if params.get("max", False):
        cargs.append("-max")
    if params.get("mean", False):
        cargs.append("-mean")
    if params.get("sum", False):
        cargs.append("-sum")
    if params.get("var", False):
        cargs.append("-var")
    if params.get("stdev", False):
        cargs.append("-stdev")
    if params.get("count", False):
        cargs.append("-count")
    if params.get("volume", False):
        cargs.append("-volume")
    if params.get("positive", False):
        cargs.append("-positive")
    if params.get("negative", False):
        cargs.append("-negative")
    if params.get("zero", False):
        cargs.append("-zero")
    if params.get("non_positive", False):
        cargs.append("-non-positive")
    if params.get("non_negative", False):
        cargs.append("-non-negative")
    if params.get("non_zero", False):
        cargs.append("-non-zero")
    if params.get("absolute", False):
        cargs.append("-absolute")
    if params.get("nan", False):
        cargs.append("-nan")
    if params.get("nonan", False):
        cargs.append("-nonan")
    if params.get("mask", None) is not None:
        cargs.extend([
            "-mask",
            params.get("mask", None)
        ])
    if params.get("mrange", None) is not None:
        cargs.extend([
            "-mrange",
            *map(str, params.get("mrange", None))
        ])
    if params.get("mvalue", None) is not None:
        cargs.extend([
            "-mvalue",
            str(params.get("mvalue", None))
        ])
    if params.get("automask", False):
        cargs.append("-automask")
    if params.get("percentile", None) is not None:
        cargs.extend([
            "-percentile",
            *map(str, params.get("percentile", None))
        ])
    if params.get("perclist", None) is not None:
        cargs.extend([
            "-perclist",
            *map(str, params.get("perclist", None))
        ])
    if params.get("median", False):
        cargs.append("-median")
    if params.get("perc_quiet", False):
        cargs.append("-perc_quiet")
    if params.get("ver", False):
        cargs.append("-ver")
    if params.get("help", False):
        cargs.append("-help")
    return cargs


def v_3d_brick_stat_outputs(
    params: V3dBrickStatParamsDict,
    execution: Execution,
) -> V3dBrickStatOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = V3dBrickStatOutputs(
        root=execution.output_file("."),
        console_output=execution.output_file("output.txt"),
    )
    return ret


def v_3d_brick_stat_execute(
    params: V3dBrickStatParamsDict,
    runner: Runner | None = None,
) -> V3dBrickStatOutputs:
    """
    3dBrickStat
    
    Compute voxel statistics of an input dataset.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `V3dBrickStatOutputs`).
    """
    v_3d_brick_stat_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(V_3D_BRICK_STAT_METADATA)
    params = execution.params(params)
    cargs = v_3d_brick_stat_cargs(params, execution)
    ret = v_3d_brick_stat_outputs(params, execution)
    execution.run(cargs)
    return ret


def v_3d_brick_stat(
    dataset: str,
    quick: bool = False,
    slow: bool = False,
    min_: bool = False,
    max_: bool = False,
    mean: bool = False,
    sum_: bool = False,
    var: bool = False,
    stdev: bool = False,
    count: bool = False,
    volume: bool = False,
    positive: bool = False,
    negative: bool = False,
    zero: bool = False,
    non_positive: bool = False,
    non_negative: bool = False,
    non_zero: bool = False,
    absolute: bool = False,
    nan: bool = False,
    nonan: bool = False,
    mask: str | None = None,
    mrange: list[float] | None = None,
    mvalue: float | None = None,
    automask: bool = False,
    percentile: list[float] | None = None,
    perclist: list[float] | None = None,
    median: bool = False,
    perc_quiet: bool = False,
    ver: bool = False,
    help_: bool = False,
    runner: Runner | None = None,
) -> V3dBrickStatOutputs:
    """
    3dBrickStat
    
    Compute voxel statistics of an input dataset.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        dataset: Input dataset.
        quick: Get the information from the header only (default).
        slow: Read the whole dataset to find the min and max values.
        min_: Print the minimum value in dataset.
        max_: Print the maximum value in dataset (default).
        mean: Print the mean value in dataset.
        sum_: Print the sum of values in the dataset.
        var: Print the variance in the dataset.
        stdev: Print the standard deviation in the dataset.
        count: Print the number of voxels included.
        volume: Print the volume of voxels included in microliters.
        positive: Include only positive voxel values.
        negative: Include only negative voxel values.
        zero: Include only zero voxel values.
        non_positive: Include only voxel values 0 or negative.
        non_negative: Include only voxel values 0 or greater.
        non_zero: Include only voxel values not equal to 0.
        absolute: Use absolute value of voxel values for all calculations.
        nan: Include only voxel values that are NaN or inf. Forces -slow mode.
        nonan: Exclude voxel values that are NaN or inf.
        mask: Use the specified dataset as mask to include/exclude voxels.
        mrange: Only accept values between MIN and MAX (inclusive) from the\
            mask.
        mvalue: Only accept values equal to VAL from the mask.
        automask: Automatically compute mask for dataset. Cannot be combined\
            with -mask.
        percentile: Compute and print percentile values from p0% to p1% at a\
            step of ps%. Only one sub-brick is accepted as input with this option.
        perclist: Like -percentile, but output the given percentiles.
        median: Shortcut for -percentile 50 1 50 (or -perclist 1 50).
        perc_quiet: Only print percentile results, not input percentile cutoffs.
        ver: Print author and version info.
        help_: Print help screen.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `V3dBrickStatOutputs`).
    """
    params = v_3d_brick_stat_params(
        dataset=dataset,
        quick=quick,
        slow=slow,
        min_=min_,
        max_=max_,
        mean=mean,
        sum_=sum_,
        var=var,
        stdev=stdev,
        count=count,
        volume=volume,
        positive=positive,
        negative=negative,
        zero=zero,
        non_positive=non_positive,
        non_negative=non_negative,
        non_zero=non_zero,
        absolute=absolute,
        nan=nan,
        nonan=nonan,
        mask=mask,
        mrange=mrange,
        mvalue=mvalue,
        automask=automask,
        percentile=percentile,
        perclist=perclist,
        median=median,
        perc_quiet=perc_quiet,
        ver=ver,
        help_=help_,
    )
    return v_3d_brick_stat_execute(params, runner)


__all__ = [
    "V3dBrickStatOutputs",
    "V3dBrickStatParamsDict",
    "V3dBrickStatParamsDictTagged",
    "V_3D_BRICK_STAT_METADATA",
    "v_3d_brick_stat",
    "v_3d_brick_stat_execute",
    "v_3d_brick_stat_params",
]
