# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

V_3D_NWARP_APPLY_METADATA = Metadata(
    id="b697b26d251dbe1445c036c2a8bcc84105820fb1.boutiques",
    name="3dNwarpApply",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_V3dNwarpApplyParamsDictNoTag = typing.TypedDict('_V3dNwarpApplyParamsDictNoTag', {
    "nwarp": str,
    "iwarp": bool,
    "source": str,
    "master": typing.NotRequired[str | None],
    "newgrid": typing.NotRequired[str | None],
    "dxyz": typing.NotRequired[str | None],
    "interp": typing.NotRequired[str | None],
    "ainterp": typing.NotRequired[str | None],
    "prefix": typing.NotRequired[str | None],
    "suffix": typing.NotRequired[str | None],
    "short": bool,
    "wprefix": typing.NotRequired[str | None],
    "quiet": bool,
    "verb": bool,
})
V3dNwarpApplyParamsDictTagged = typing.TypedDict('V3dNwarpApplyParamsDictTagged', {
    "@type": typing.Literal["afni/3dNwarpApply"],
    "nwarp": str,
    "iwarp": bool,
    "source": str,
    "master": typing.NotRequired[str | None],
    "newgrid": typing.NotRequired[str | None],
    "dxyz": typing.NotRequired[str | None],
    "interp": typing.NotRequired[str | None],
    "ainterp": typing.NotRequired[str | None],
    "prefix": typing.NotRequired[str | None],
    "suffix": typing.NotRequired[str | None],
    "short": bool,
    "wprefix": typing.NotRequired[str | None],
    "quiet": bool,
    "verb": bool,
})
V3dNwarpApplyParamsDict = _V3dNwarpApplyParamsDictNoTag | V3dNwarpApplyParamsDictTagged


class V3dNwarpApplyOutputs(typing.NamedTuple):
    """
    Output object returned when calling `V3dNwarpApplyParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    warped_output: OutputPathType | None
    """Warped output dataset"""


def v_3d_nwarp_apply_params(
    nwarp: str,
    source: str,
    iwarp: bool = False,
    master: str | None = None,
    newgrid: str | None = None,
    dxyz: str | None = None,
    interp: str | None = None,
    ainterp: str | None = None,
    prefix: str | None = None,
    suffix: str | None = None,
    short: bool = False,
    wprefix: str | None = None,
    quiet: bool = False,
    verb: bool = False,
) -> V3dNwarpApplyParamsDictTagged:
    """
    Build parameters.
    
    Args:
        nwarp: The name of the 3D warp dataset. Multiple warps can be\
            catenated.
        source: The name of the source dataset to be warped. Multiple datasets\
            can be supplied.
        iwarp: Invert the warp specified in '-nwarp'.
        master: The name of the master dataset which defines the output grid.
        newgrid: The new grid spacing (cubical voxels, in mm).
        dxyz: Specify a different grid spacing (cubical voxels, in mm).
        interp: The interpolation mode ('NN', 'linear', 'cubic', 'quintic',\
            'wsinc5').
        ainterp: Specify a different interpolation mode for the data than the\
            warp.
        prefix: The name of the new output dataset. Multiple names can be\
            supplied if more than one source dataset is input.
        suffix: Change the default suffix '_Nwarp' to a user-defined suffix.
        short: Write output dataset using 16-bit short integers rather than the\
            usual 32-bit floats.
        wprefix: Save every warp generated in the process to a separate\
            dataset.
        quiet: Don't be verbose.
        verb: Be extra verbose.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/3dNwarpApply",
        "nwarp": nwarp,
        "iwarp": iwarp,
        "source": source,
        "short": short,
        "quiet": quiet,
        "verb": verb,
    }
    if master is not None:
        params["master"] = master
    if newgrid is not None:
        params["newgrid"] = newgrid
    if dxyz is not None:
        params["dxyz"] = dxyz
    if interp is not None:
        params["interp"] = interp
    if ainterp is not None:
        params["ainterp"] = ainterp
    if prefix is not None:
        params["prefix"] = prefix
    if suffix is not None:
        params["suffix"] = suffix
    if wprefix is not None:
        params["wprefix"] = wprefix
    return params


def v_3d_nwarp_apply_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `V3dNwarpApplyParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("nwarp", None) is None:
        raise StyxValidationError("`nwarp` must not be None")
    if not isinstance(params["nwarp"], str):
        raise StyxValidationError(f'`nwarp` has the wrong type: Received `{type(params.get("nwarp", None))}` expected `str`')
    if params.get("iwarp", False) is None:
        raise StyxValidationError("`iwarp` must not be None")
    if not isinstance(params["iwarp"], bool):
        raise StyxValidationError(f'`iwarp` has the wrong type: Received `{type(params.get("iwarp", False))}` expected `bool`')
    if params.get("source", None) is None:
        raise StyxValidationError("`source` must not be None")
    if not isinstance(params["source"], str):
        raise StyxValidationError(f'`source` has the wrong type: Received `{type(params.get("source", None))}` expected `str`')
    if params.get("master", None) is not None:
        if not isinstance(params["master"], str):
            raise StyxValidationError(f'`master` has the wrong type: Received `{type(params.get("master", None))}` expected `str | None`')
    if params.get("newgrid", None) is not None:
        if not isinstance(params["newgrid"], str):
            raise StyxValidationError(f'`newgrid` has the wrong type: Received `{type(params.get("newgrid", None))}` expected `str | None`')
    if params.get("dxyz", None) is not None:
        if not isinstance(params["dxyz"], str):
            raise StyxValidationError(f'`dxyz` has the wrong type: Received `{type(params.get("dxyz", None))}` expected `str | None`')
    if params.get("interp", None) is not None:
        if not isinstance(params["interp"], str):
            raise StyxValidationError(f'`interp` has the wrong type: Received `{type(params.get("interp", None))}` expected `str | None`')
    if params.get("ainterp", None) is not None:
        if not isinstance(params["ainterp"], str):
            raise StyxValidationError(f'`ainterp` has the wrong type: Received `{type(params.get("ainterp", None))}` expected `str | None`')
    if params.get("prefix", None) is not None:
        if not isinstance(params["prefix"], str):
            raise StyxValidationError(f'`prefix` has the wrong type: Received `{type(params.get("prefix", None))}` expected `str | None`')
    if params.get("suffix", None) is not None:
        if not isinstance(params["suffix"], str):
            raise StyxValidationError(f'`suffix` has the wrong type: Received `{type(params.get("suffix", None))}` expected `str | None`')
    if params.get("short", False) is None:
        raise StyxValidationError("`short` must not be None")
    if not isinstance(params["short"], bool):
        raise StyxValidationError(f'`short` has the wrong type: Received `{type(params.get("short", False))}` expected `bool`')
    if params.get("wprefix", None) is not None:
        if not isinstance(params["wprefix"], str):
            raise StyxValidationError(f'`wprefix` has the wrong type: Received `{type(params.get("wprefix", None))}` expected `str | None`')
    if params.get("quiet", False) is None:
        raise StyxValidationError("`quiet` must not be None")
    if not isinstance(params["quiet"], bool):
        raise StyxValidationError(f'`quiet` has the wrong type: Received `{type(params.get("quiet", False))}` expected `bool`')
    if params.get("verb", False) is None:
        raise StyxValidationError("`verb` must not be None")
    if not isinstance(params["verb"], bool):
        raise StyxValidationError(f'`verb` has the wrong type: Received `{type(params.get("verb", False))}` expected `bool`')


def v_3d_nwarp_apply_cargs(
    params: V3dNwarpApplyParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("3dNwarpApply")
    cargs.extend([
        "-nwarp",
        params.get("nwarp", None)
    ])
    if params.get("iwarp", False):
        cargs.append("-iwarp")
    cargs.extend([
        "-source",
        params.get("source", None)
    ])
    if params.get("master", None) is not None:
        cargs.extend([
            "-master",
            params.get("master", None)
        ])
    if params.get("newgrid", None) is not None:
        cargs.extend([
            "-newgrid",
            params.get("newgrid", None)
        ])
    if params.get("dxyz", None) is not None:
        cargs.extend([
            "-dxyz",
            params.get("dxyz", None)
        ])
    if params.get("interp", None) is not None:
        cargs.extend([
            "-interp",
            params.get("interp", None)
        ])
    if params.get("ainterp", None) is not None:
        cargs.extend([
            "-ainterp",
            params.get("ainterp", None)
        ])
    if params.get("prefix", None) is not None:
        cargs.extend([
            "-prefix",
            params.get("prefix", None)
        ])
    if params.get("suffix", None) is not None:
        cargs.extend([
            "-suffix",
            params.get("suffix", None)
        ])
    if params.get("short", False):
        cargs.append("-short")
    if params.get("wprefix", None) is not None:
        cargs.extend([
            "-wprefix",
            params.get("wprefix", None)
        ])
    if params.get("quiet", False):
        cargs.append("-quiet")
    if params.get("verb", False):
        cargs.append("-verb")
    return cargs


def v_3d_nwarp_apply_outputs(
    params: V3dNwarpApplyParamsDict,
    execution: Execution,
) -> V3dNwarpApplyOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = V3dNwarpApplyOutputs(
        root=execution.output_file("."),
        warped_output=execution.output_file(params.get("prefix", None) + "_" + params.get("source", None) + "_warped.nii.gz") if (params.get("prefix") is not None) else None,
    )
    return ret


def v_3d_nwarp_apply_execute(
    params: V3dNwarpApplyParamsDict,
    runner: Runner | None = None,
) -> V3dNwarpApplyOutputs:
    """
    3dNwarpApply
    
    Program to apply a nonlinear 3D warp saved from 3dQwarp (or 3dNwarpCat,
    etc.) to a 3D dataset, to produce a warped version of the source dataset.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `V3dNwarpApplyOutputs`).
    """
    v_3d_nwarp_apply_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(V_3D_NWARP_APPLY_METADATA)
    params = execution.params(params)
    cargs = v_3d_nwarp_apply_cargs(params, execution)
    ret = v_3d_nwarp_apply_outputs(params, execution)
    execution.run(cargs)
    return ret


def v_3d_nwarp_apply(
    nwarp: str,
    source: str,
    iwarp: bool = False,
    master: str | None = None,
    newgrid: str | None = None,
    dxyz: str | None = None,
    interp: str | None = None,
    ainterp: str | None = None,
    prefix: str | None = None,
    suffix: str | None = None,
    short: bool = False,
    wprefix: str | None = None,
    quiet: bool = False,
    verb: bool = False,
    runner: Runner | None = None,
) -> V3dNwarpApplyOutputs:
    """
    3dNwarpApply
    
    Program to apply a nonlinear 3D warp saved from 3dQwarp (or 3dNwarpCat,
    etc.) to a 3D dataset, to produce a warped version of the source dataset.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        nwarp: The name of the 3D warp dataset. Multiple warps can be\
            catenated.
        source: The name of the source dataset to be warped. Multiple datasets\
            can be supplied.
        iwarp: Invert the warp specified in '-nwarp'.
        master: The name of the master dataset which defines the output grid.
        newgrid: The new grid spacing (cubical voxels, in mm).
        dxyz: Specify a different grid spacing (cubical voxels, in mm).
        interp: The interpolation mode ('NN', 'linear', 'cubic', 'quintic',\
            'wsinc5').
        ainterp: Specify a different interpolation mode for the data than the\
            warp.
        prefix: The name of the new output dataset. Multiple names can be\
            supplied if more than one source dataset is input.
        suffix: Change the default suffix '_Nwarp' to a user-defined suffix.
        short: Write output dataset using 16-bit short integers rather than the\
            usual 32-bit floats.
        wprefix: Save every warp generated in the process to a separate\
            dataset.
        quiet: Don't be verbose.
        verb: Be extra verbose.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `V3dNwarpApplyOutputs`).
    """
    params = v_3d_nwarp_apply_params(
        nwarp=nwarp,
        iwarp=iwarp,
        source=source,
        master=master,
        newgrid=newgrid,
        dxyz=dxyz,
        interp=interp,
        ainterp=ainterp,
        prefix=prefix,
        suffix=suffix,
        short=short,
        wprefix=wprefix,
        quiet=quiet,
        verb=verb,
    )
    return v_3d_nwarp_apply_execute(params, runner)


__all__ = [
    "V3dNwarpApplyOutputs",
    "V3dNwarpApplyParamsDict",
    "V3dNwarpApplyParamsDictTagged",
    "V_3D_NWARP_APPLY_METADATA",
    "v_3d_nwarp_apply",
    "v_3d_nwarp_apply_execute",
    "v_3d_nwarp_apply_params",
]
