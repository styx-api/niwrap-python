# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

V__ELECTRO_GRID_METADATA = Metadata(
    id="8ac7f5045194e5e0a61feb132b6f3dfdbb4abcc2.boutiques",
    name="@ElectroGrid",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_VElectroGridParamsDictNoTag = typing.TypedDict('_VElectroGridParamsDictNoTag', {
    "strip": typing.NotRequired[int | None],
    "grid": typing.NotRequired[list[int] | None],
    "prefix": typing.NotRequired[str | None],
    "coords": typing.NotRequired[InputPathType | None],
    "with_markers": bool,
    "echo": bool,
})
VElectroGridParamsDictTagged = typing.TypedDict('VElectroGridParamsDictTagged', {
    "@type": typing.Literal["afni/@ElectroGrid"],
    "strip": typing.NotRequired[int | None],
    "grid": typing.NotRequired[list[int] | None],
    "prefix": typing.NotRequired[str | None],
    "coords": typing.NotRequired[InputPathType | None],
    "with_markers": bool,
    "echo": bool,
})
VElectroGridParamsDict = _VElectroGridParamsDictNoTag | VElectroGridParamsDictTagged


class VElectroGridOutputs(typing.NamedTuple):
    """
    Output object returned when calling `VElectroGridParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_surface: OutputPathType | None
    """Output surface file"""


def v__electro_grid_params(
    strip: int | None = None,
    grid: list[int] | None = None,
    prefix: str | None = None,
    coords: InputPathType | None = None,
    with_markers: bool = False,
    echo: bool = False,
) -> VElectroGridParamsDictTagged:
    """
    Build parameters.
    
    Args:
        strip: Make an Nx strip (array) of electrodes.
        grid: Make an Nx by Ny grid of electrodes. A node at (i,j) has a node\
            ID = i+Nx*j with 0<=i<Nx and 0<=j<=Ny.
        prefix: Use PREFIX for the output surface.
        coords: Specify the coordinates of the nodes on the grid, or the array.\
            XYZ.1D should have three columns, with each row specifying the\
            coordinates of one node.
        with_markers: Add markers to the surface at each electrode.
        echo: Set echo.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/@ElectroGrid",
        "with_markers": with_markers,
        "echo": echo,
    }
    if strip is not None:
        params["strip"] = strip
    if grid is not None:
        params["grid"] = grid
    if prefix is not None:
        params["prefix"] = prefix
    if coords is not None:
        params["coords"] = coords
    return params


def v__electro_grid_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `VElectroGridParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("strip", None) is not None:
        if not isinstance(params["strip"], int):
            raise StyxValidationError(f'`strip` has the wrong type: Received `{type(params.get("strip", None))}` expected `int | None`')
    if params.get("grid", None) is not None:
        if not isinstance(params["grid"], list):
            raise StyxValidationError(f'`grid` has the wrong type: Received `{type(params.get("grid", None))}` expected `list[int] | None`')
        if len(params["grid"]) != 2:
            raise StyxValidationError("Parameter `grid` must contain exactly 2 elements")
        for e in params["grid"]:
            if not isinstance(e, int):
                raise StyxValidationError(f'`grid` has the wrong type: Received `{type(params.get("grid", None))}` expected `list[int] | None`')
    if params.get("prefix", None) is not None:
        if not isinstance(params["prefix"], str):
            raise StyxValidationError(f'`prefix` has the wrong type: Received `{type(params.get("prefix", None))}` expected `str | None`')
    if params.get("coords", None) is not None:
        if not isinstance(params["coords"], (pathlib.Path, str)):
            raise StyxValidationError(f'`coords` has the wrong type: Received `{type(params.get("coords", None))}` expected `InputPathType | None`')
    if params.get("with_markers", False) is None:
        raise StyxValidationError("`with_markers` must not be None")
    if not isinstance(params["with_markers"], bool):
        raise StyxValidationError(f'`with_markers` has the wrong type: Received `{type(params.get("with_markers", False))}` expected `bool`')
    if params.get("echo", False) is None:
        raise StyxValidationError("`echo` must not be None")
    if not isinstance(params["echo"], bool):
        raise StyxValidationError(f'`echo` has the wrong type: Received `{type(params.get("echo", False))}` expected `bool`')


def v__electro_grid_cargs(
    params: VElectroGridParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("@ElectroGrid")
    if params.get("strip", None) is not None:
        cargs.extend([
            "-strip",
            str(params.get("strip", None))
        ])
    if params.get("grid", None) is not None:
        cargs.extend([
            "-grid",
            *map(str, params.get("grid", None))
        ])
    if params.get("prefix", None) is not None:
        cargs.extend([
            "-prefix",
            params.get("prefix", None)
        ])
    if params.get("coords", None) is not None:
        cargs.extend([
            "-coords",
            execution.input_file(params.get("coords", None))
        ])
    if params.get("with_markers", False):
        cargs.append("-with_markers")
    if params.get("echo", False):
        cargs.append("-echo")
    return cargs


def v__electro_grid_outputs(
    params: VElectroGridParamsDict,
    execution: Execution,
) -> VElectroGridOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = VElectroGridOutputs(
        root=execution.output_file("."),
        output_surface=execution.output_file(params.get("prefix", None) + ".gii") if (params.get("prefix") is not None) else None,
    )
    return ret


def v__electro_grid_execute(
    params: VElectroGridParamsDict,
    runner: Runner | None = None,
) -> VElectroGridOutputs:
    """
    @ElectroGrid
    
    Creates a mesh representation of an electrode grid for use with SUMA.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `VElectroGridOutputs`).
    """
    v__electro_grid_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(V__ELECTRO_GRID_METADATA)
    params = execution.params(params)
    cargs = v__electro_grid_cargs(params, execution)
    ret = v__electro_grid_outputs(params, execution)
    execution.run(cargs)
    return ret


def v__electro_grid(
    strip: int | None = None,
    grid: list[int] | None = None,
    prefix: str | None = None,
    coords: InputPathType | None = None,
    with_markers: bool = False,
    echo: bool = False,
    runner: Runner | None = None,
) -> VElectroGridOutputs:
    """
    @ElectroGrid
    
    Creates a mesh representation of an electrode grid for use with SUMA.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        strip: Make an Nx strip (array) of electrodes.
        grid: Make an Nx by Ny grid of electrodes. A node at (i,j) has a node\
            ID = i+Nx*j with 0<=i<Nx and 0<=j<=Ny.
        prefix: Use PREFIX for the output surface.
        coords: Specify the coordinates of the nodes on the grid, or the array.\
            XYZ.1D should have three columns, with each row specifying the\
            coordinates of one node.
        with_markers: Add markers to the surface at each electrode.
        echo: Set echo.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `VElectroGridOutputs`).
    """
    params = v__electro_grid_params(
        strip=strip,
        grid=grid,
        prefix=prefix,
        coords=coords,
        with_markers=with_markers,
        echo=echo,
    )
    return v__electro_grid_execute(params, runner)


__all__ = [
    "VElectroGridOutputs",
    "VElectroGridParamsDict",
    "VElectroGridParamsDictTagged",
    "V__ELECTRO_GRID_METADATA",
    "v__electro_grid",
    "v__electro_grid_execute",
    "v__electro_grid_params",
]
