# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

V_1DSVD_METADATA = Metadata(
    id="ee1dc53825eff232e33d7e748e005465a290f31a.boutiques",
    name="1dsvd",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_V1dsvdParamsDictNoTag = typing.TypedDict('_V1dsvdParamsDictNoTag', {
    "one": bool,
    "vmean": bool,
    "vnorm": bool,
    "cond": bool,
    "sing": bool,
    "sort": bool,
    "nosort": bool,
    "asort": bool,
    "left_eigenvectors": bool,
    "num_eigenvectors": typing.NotRequired[str | None],
    "input_files": list[InputPathType],
})
V1dsvdParamsDictTagged = typing.TypedDict('V1dsvdParamsDictTagged', {
    "@type": typing.Literal["afni/1dsvd"],
    "one": bool,
    "vmean": bool,
    "vnorm": bool,
    "cond": bool,
    "sing": bool,
    "sort": bool,
    "nosort": bool,
    "asort": bool,
    "left_eigenvectors": bool,
    "num_eigenvectors": typing.NotRequired[str | None],
    "input_files": list[InputPathType],
})
V1dsvdParamsDict = _V1dsvdParamsDictNoTag | V1dsvdParamsDictTagged


class V1dsvdOutputs(typing.NamedTuple):
    """
    Output object returned when calling `V1dsvdParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    stdout: OutputPathType
    """Output of the SVD computation"""


def v_1dsvd_params(
    input_files: list[InputPathType],
    one: bool = False,
    vmean: bool = False,
    vnorm: bool = False,
    cond: bool = False,
    sing: bool = False,
    sort: bool = False,
    nosort: bool = False,
    asort: bool = False,
    left_eigenvectors: bool = False,
    num_eigenvectors: str | None = None,
) -> V1dsvdParamsDictTagged:
    """
    Build parameters.
    
    Args:
        input_files: Input 1D file(s) for SVD computation.
        one: Make 1st vector be all 1's.
        vmean: Remove mean from each vector (cannot be used with -one).
        vnorm: Make L2-norm of each vector = 1 before SVD.
        cond: Only print condition number (ratio of extremes).
        sing: Only print singular values.
        sort: Sort singular values in descending order (default).
        nosort: Don't sort singular values.
        asort: Sort singular values in ascending order.
        left_eigenvectors: Only output left eigenvectors in .1D format.
        num_eigenvectors: Specify number of left eigenvectors to output.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/1dsvd",
        "one": one,
        "vmean": vmean,
        "vnorm": vnorm,
        "cond": cond,
        "sing": sing,
        "sort": sort,
        "nosort": nosort,
        "asort": asort,
        "left_eigenvectors": left_eigenvectors,
        "input_files": input_files,
    }
    if num_eigenvectors is not None:
        params["num_eigenvectors"] = num_eigenvectors
    return params


def v_1dsvd_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `V1dsvdParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("one", False) is None:
        raise StyxValidationError("`one` must not be None")
    if not isinstance(params["one"], bool):
        raise StyxValidationError(f'`one` has the wrong type: Received `{type(params.get("one", False))}` expected `bool`')
    if params.get("vmean", False) is None:
        raise StyxValidationError("`vmean` must not be None")
    if not isinstance(params["vmean"], bool):
        raise StyxValidationError(f'`vmean` has the wrong type: Received `{type(params.get("vmean", False))}` expected `bool`')
    if params.get("vnorm", False) is None:
        raise StyxValidationError("`vnorm` must not be None")
    if not isinstance(params["vnorm"], bool):
        raise StyxValidationError(f'`vnorm` has the wrong type: Received `{type(params.get("vnorm", False))}` expected `bool`')
    if params.get("cond", False) is None:
        raise StyxValidationError("`cond` must not be None")
    if not isinstance(params["cond"], bool):
        raise StyxValidationError(f'`cond` has the wrong type: Received `{type(params.get("cond", False))}` expected `bool`')
    if params.get("sing", False) is None:
        raise StyxValidationError("`sing` must not be None")
    if not isinstance(params["sing"], bool):
        raise StyxValidationError(f'`sing` has the wrong type: Received `{type(params.get("sing", False))}` expected `bool`')
    if params.get("sort", False) is None:
        raise StyxValidationError("`sort` must not be None")
    if not isinstance(params["sort"], bool):
        raise StyxValidationError(f'`sort` has the wrong type: Received `{type(params.get("sort", False))}` expected `bool`')
    if params.get("nosort", False) is None:
        raise StyxValidationError("`nosort` must not be None")
    if not isinstance(params["nosort"], bool):
        raise StyxValidationError(f'`nosort` has the wrong type: Received `{type(params.get("nosort", False))}` expected `bool`')
    if params.get("asort", False) is None:
        raise StyxValidationError("`asort` must not be None")
    if not isinstance(params["asort"], bool):
        raise StyxValidationError(f'`asort` has the wrong type: Received `{type(params.get("asort", False))}` expected `bool`')
    if params.get("left_eigenvectors", False) is None:
        raise StyxValidationError("`left_eigenvectors` must not be None")
    if not isinstance(params["left_eigenvectors"], bool):
        raise StyxValidationError(f'`left_eigenvectors` has the wrong type: Received `{type(params.get("left_eigenvectors", False))}` expected `bool`')
    if params.get("num_eigenvectors", None) is not None:
        if not isinstance(params["num_eigenvectors"], str):
            raise StyxValidationError(f'`num_eigenvectors` has the wrong type: Received `{type(params.get("num_eigenvectors", None))}` expected `str | None`')
    if params.get("input_files", None) is None:
        raise StyxValidationError("`input_files` must not be None")
    if not isinstance(params["input_files"], list):
        raise StyxValidationError(f'`input_files` has the wrong type: Received `{type(params.get("input_files", None))}` expected `list[InputPathType]`')
    for e in params["input_files"]:
        if not isinstance(e, (pathlib.Path, str)):
            raise StyxValidationError(f'`input_files` has the wrong type: Received `{type(params.get("input_files", None))}` expected `list[InputPathType]`')


def v_1dsvd_cargs(
    params: V1dsvdParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("1dsvd")
    if params.get("one", False):
        cargs.append("-one")
    if params.get("vmean", False):
        cargs.append("-vmean")
    if params.get("vnorm", False):
        cargs.append("-vnorm")
    if params.get("cond", False):
        cargs.append("-cond")
    if params.get("sing", False):
        cargs.append("-sing")
    if params.get("sort", False):
        cargs.append("-sort")
    if params.get("nosort", False):
        cargs.append("-nosort")
    if params.get("asort", False):
        cargs.append("-asort")
    if params.get("left_eigenvectors", False):
        cargs.append("-1Dleft")
    if params.get("num_eigenvectors", None) is not None:
        cargs.extend([
            "-nev",
            params.get("num_eigenvectors", None)
        ])
    cargs.extend([execution.input_file(f) for f in params.get("input_files", None)])
    return cargs


def v_1dsvd_outputs(
    params: V1dsvdParamsDict,
    execution: Execution,
) -> V1dsvdOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = V1dsvdOutputs(
        root=execution.output_file("."),
        stdout=execution.output_file("stdout"),
    )
    return ret


def v_1dsvd_execute(
    params: V1dsvdParamsDict,
    runner: Runner | None = None,
) -> V1dsvdOutputs:
    """
    1dsvd
    
    Computes SVD of the matrix formed by the 1D file(s) and outputs the result
    on stdout.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `V1dsvdOutputs`).
    """
    v_1dsvd_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(V_1DSVD_METADATA)
    params = execution.params(params)
    cargs = v_1dsvd_cargs(params, execution)
    ret = v_1dsvd_outputs(params, execution)
    execution.run(cargs)
    return ret


def v_1dsvd(
    input_files: list[InputPathType],
    one: bool = False,
    vmean: bool = False,
    vnorm: bool = False,
    cond: bool = False,
    sing: bool = False,
    sort: bool = False,
    nosort: bool = False,
    asort: bool = False,
    left_eigenvectors: bool = False,
    num_eigenvectors: str | None = None,
    runner: Runner | None = None,
) -> V1dsvdOutputs:
    """
    1dsvd
    
    Computes SVD of the matrix formed by the 1D file(s) and outputs the result
    on stdout.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        input_files: Input 1D file(s) for SVD computation.
        one: Make 1st vector be all 1's.
        vmean: Remove mean from each vector (cannot be used with -one).
        vnorm: Make L2-norm of each vector = 1 before SVD.
        cond: Only print condition number (ratio of extremes).
        sing: Only print singular values.
        sort: Sort singular values in descending order (default).
        nosort: Don't sort singular values.
        asort: Sort singular values in ascending order.
        left_eigenvectors: Only output left eigenvectors in .1D format.
        num_eigenvectors: Specify number of left eigenvectors to output.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `V1dsvdOutputs`).
    """
    params = v_1dsvd_params(
        one=one,
        vmean=vmean,
        vnorm=vnorm,
        cond=cond,
        sing=sing,
        sort=sort,
        nosort=nosort,
        asort=asort,
        left_eigenvectors=left_eigenvectors,
        num_eigenvectors=num_eigenvectors,
        input_files=input_files,
    )
    return v_1dsvd_execute(params, runner)


__all__ = [
    "V1dsvdOutputs",
    "V1dsvdParamsDict",
    "V1dsvdParamsDictTagged",
    "V_1DSVD_METADATA",
    "v_1dsvd",
    "v_1dsvd_execute",
    "v_1dsvd_params",
]
