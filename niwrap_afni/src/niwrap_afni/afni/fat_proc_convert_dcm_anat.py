# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

FAT_PROC_CONVERT_DCM_ANAT_METADATA = Metadata(
    id="00ccb72c63c849ac69cc34eadc7fc75e88bc1ced.boutiques",
    name="fat_proc_convert_dcm_anat",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_FatProcConvertDcmAnatParamsDictNoTag = typing.TypedDict('_FatProcConvertDcmAnatParamsDictNoTag', {
    "dicom_directory": typing.NotRequired[str | None],
    "nifti_input": typing.NotRequired[InputPathType | None],
    "prefix": str,
    "workdir": typing.NotRequired[str | None],
    "orient": typing.NotRequired[str | None],
    "no_clean": bool,
    "reorig_reorient_off": bool,
    "qc_prefix": typing.NotRequired[str | None],
    "no_cmd_out": bool,
    "no_qc_view": bool,
})
FatProcConvertDcmAnatParamsDictTagged = typing.TypedDict('FatProcConvertDcmAnatParamsDictTagged', {
    "@type": typing.Literal["afni/fat_proc_convert_dcm_anat"],
    "dicom_directory": typing.NotRequired[str | None],
    "nifti_input": typing.NotRequired[InputPathType | None],
    "prefix": str,
    "workdir": typing.NotRequired[str | None],
    "orient": typing.NotRequired[str | None],
    "no_clean": bool,
    "reorig_reorient_off": bool,
    "qc_prefix": typing.NotRequired[str | None],
    "no_cmd_out": bool,
    "no_qc_view": bool,
})
FatProcConvertDcmAnatParamsDict = _FatProcConvertDcmAnatParamsDictNoTag | FatProcConvertDcmAnatParamsDictTagged


class FatProcConvertDcmAnatOutputs(typing.NamedTuple):
    """
    Output object returned when calling `FatProcConvertDcmAnatParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_volume: OutputPathType
    """Converted anatomical volume output."""


def fat_proc_convert_dcm_anat_params(
    prefix: str,
    dicom_directory: str | None = None,
    nifti_input: InputPathType | None = None,
    workdir: str | None = None,
    orient: str | None = None,
    no_clean: bool = False,
    reorig_reorient_off: bool = False,
    qc_prefix: str | None = None,
    no_cmd_out: bool = False,
    no_qc_view: bool = False,
) -> FatProcConvertDcmAnatParamsDictTagged:
    """
    Build parameters.
    
    Args:
        prefix: Set prefix (and path) for output data.
        dicom_directory: Input as DICOM directory; DIR_IN should contain only\
            DICOM files; all will be selected.
        nifti_input: Input as NIFTI file (zipped or unzipped fine). Alternative\
            to '-indir ..'.
        workdir: Specify a working directory, which can be removed (default\
            name = '__WORKING_convert_dcm_anat').
        orient: Optional chance to reset orientation of the volume files\
            (default is currently 'RAI').
        no_clean: Prevents removal of working directory.
        reorig_reorient_off: Turns off the nicety of putting (0, 0, 0) at\
            brain's center of mass (-> 'reorigin' calc) and reorienting data (->\
            'reorient' calc).
        qc_prefix: Set the prefix of the QC image files separately (default is\
            '').
        no_cmd_out: Don't save the command line call and the location where it\
            was run.
        no_qc_view: Turn off generating QC image files.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/fat_proc_convert_dcm_anat",
        "prefix": prefix,
        "no_clean": no_clean,
        "reorig_reorient_off": reorig_reorient_off,
        "no_cmd_out": no_cmd_out,
        "no_qc_view": no_qc_view,
    }
    if dicom_directory is not None:
        params["dicom_directory"] = dicom_directory
    if nifti_input is not None:
        params["nifti_input"] = nifti_input
    if workdir is not None:
        params["workdir"] = workdir
    if orient is not None:
        params["orient"] = orient
    if qc_prefix is not None:
        params["qc_prefix"] = qc_prefix
    return params


def fat_proc_convert_dcm_anat_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `FatProcConvertDcmAnatParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("dicom_directory", None) is not None:
        if not isinstance(params["dicom_directory"], str):
            raise StyxValidationError(f'`dicom_directory` has the wrong type: Received `{type(params.get("dicom_directory", None))}` expected `str | None`')
    if params.get("nifti_input", None) is not None:
        if not isinstance(params["nifti_input"], (pathlib.Path, str)):
            raise StyxValidationError(f'`nifti_input` has the wrong type: Received `{type(params.get("nifti_input", None))}` expected `InputPathType | None`')
    if params.get("prefix", None) is None:
        raise StyxValidationError("`prefix` must not be None")
    if not isinstance(params["prefix"], str):
        raise StyxValidationError(f'`prefix` has the wrong type: Received `{type(params.get("prefix", None))}` expected `str`')
    if params.get("workdir", None) is not None:
        if not isinstance(params["workdir"], str):
            raise StyxValidationError(f'`workdir` has the wrong type: Received `{type(params.get("workdir", None))}` expected `str | None`')
    if params.get("orient", None) is not None:
        if not isinstance(params["orient"], str):
            raise StyxValidationError(f'`orient` has the wrong type: Received `{type(params.get("orient", None))}` expected `str | None`')
    if params.get("no_clean", False) is None:
        raise StyxValidationError("`no_clean` must not be None")
    if not isinstance(params["no_clean"], bool):
        raise StyxValidationError(f'`no_clean` has the wrong type: Received `{type(params.get("no_clean", False))}` expected `bool`')
    if params.get("reorig_reorient_off", False) is None:
        raise StyxValidationError("`reorig_reorient_off` must not be None")
    if not isinstance(params["reorig_reorient_off"], bool):
        raise StyxValidationError(f'`reorig_reorient_off` has the wrong type: Received `{type(params.get("reorig_reorient_off", False))}` expected `bool`')
    if params.get("qc_prefix", None) is not None:
        if not isinstance(params["qc_prefix"], str):
            raise StyxValidationError(f'`qc_prefix` has the wrong type: Received `{type(params.get("qc_prefix", None))}` expected `str | None`')
    if params.get("no_cmd_out", False) is None:
        raise StyxValidationError("`no_cmd_out` must not be None")
    if not isinstance(params["no_cmd_out"], bool):
        raise StyxValidationError(f'`no_cmd_out` has the wrong type: Received `{type(params.get("no_cmd_out", False))}` expected `bool`')
    if params.get("no_qc_view", False) is None:
        raise StyxValidationError("`no_qc_view` must not be None")
    if not isinstance(params["no_qc_view"], bool):
        raise StyxValidationError(f'`no_qc_view` has the wrong type: Received `{type(params.get("no_qc_view", False))}` expected `bool`')


def fat_proc_convert_dcm_anat_cargs(
    params: FatProcConvertDcmAnatParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("fat_proc_convert_dcm_anat")
    if params.get("dicom_directory", None) is not None:
        cargs.extend([
            "-indir",
            params.get("dicom_directory", None)
        ])
    if params.get("nifti_input", None) is not None:
        cargs.extend([
            "-innii",
            execution.input_file(params.get("nifti_input", None))
        ])
    cargs.extend([
        "-prefix",
        params.get("prefix", None)
    ])
    if params.get("workdir", None) is not None:
        cargs.extend([
            "-workdir",
            params.get("workdir", None)
        ])
    if params.get("orient", None) is not None:
        cargs.extend([
            "-orient",
            params.get("orient", None)
        ])
    if params.get("no_clean", False):
        cargs.append("-no_clean")
    if params.get("reorig_reorient_off", False):
        cargs.append("-reorig_reorient_off")
    if params.get("qc_prefix", None) is not None:
        cargs.extend([
            "-qc_prefix",
            params.get("qc_prefix", None)
        ])
    if params.get("no_cmd_out", False):
        cargs.append("-no_cmd_out")
    if params.get("no_qc_view", False):
        cargs.append("-no_qc_view")
    return cargs


def fat_proc_convert_dcm_anat_outputs(
    params: FatProcConvertDcmAnatParamsDict,
    execution: Execution,
) -> FatProcConvertDcmAnatOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = FatProcConvertDcmAnatOutputs(
        root=execution.output_file("."),
        output_volume=execution.output_file(params.get("prefix", None) + ".nii.gz"),
    )
    return ret


def fat_proc_convert_dcm_anat_execute(
    params: FatProcConvertDcmAnatParamsDict,
    runner: Runner | None = None,
) -> FatProcConvertDcmAnatOutputs:
    """
    fat_proc_convert_dcm_anat
    
    Converts an anatomical dataset from DICOM files into a volume, specifically
    designed to fit in line with other processing such as DTI analysis.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `FatProcConvertDcmAnatOutputs`).
    """
    fat_proc_convert_dcm_anat_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(FAT_PROC_CONVERT_DCM_ANAT_METADATA)
    params = execution.params(params)
    cargs = fat_proc_convert_dcm_anat_cargs(params, execution)
    ret = fat_proc_convert_dcm_anat_outputs(params, execution)
    execution.run(cargs)
    return ret


def fat_proc_convert_dcm_anat(
    prefix: str,
    dicom_directory: str | None = None,
    nifti_input: InputPathType | None = None,
    workdir: str | None = None,
    orient: str | None = None,
    no_clean: bool = False,
    reorig_reorient_off: bool = False,
    qc_prefix: str | None = None,
    no_cmd_out: bool = False,
    no_qc_view: bool = False,
    runner: Runner | None = None,
) -> FatProcConvertDcmAnatOutputs:
    """
    fat_proc_convert_dcm_anat
    
    Converts an anatomical dataset from DICOM files into a volume, specifically
    designed to fit in line with other processing such as DTI analysis.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        prefix: Set prefix (and path) for output data.
        dicom_directory: Input as DICOM directory; DIR_IN should contain only\
            DICOM files; all will be selected.
        nifti_input: Input as NIFTI file (zipped or unzipped fine). Alternative\
            to '-indir ..'.
        workdir: Specify a working directory, which can be removed (default\
            name = '__WORKING_convert_dcm_anat').
        orient: Optional chance to reset orientation of the volume files\
            (default is currently 'RAI').
        no_clean: Prevents removal of working directory.
        reorig_reorient_off: Turns off the nicety of putting (0, 0, 0) at\
            brain's center of mass (-> 'reorigin' calc) and reorienting data (->\
            'reorient' calc).
        qc_prefix: Set the prefix of the QC image files separately (default is\
            '').
        no_cmd_out: Don't save the command line call and the location where it\
            was run.
        no_qc_view: Turn off generating QC image files.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `FatProcConvertDcmAnatOutputs`).
    """
    params = fat_proc_convert_dcm_anat_params(
        dicom_directory=dicom_directory,
        nifti_input=nifti_input,
        prefix=prefix,
        workdir=workdir,
        orient=orient,
        no_clean=no_clean,
        reorig_reorient_off=reorig_reorient_off,
        qc_prefix=qc_prefix,
        no_cmd_out=no_cmd_out,
        no_qc_view=no_qc_view,
    )
    return fat_proc_convert_dcm_anat_execute(params, runner)


__all__ = [
    "FAT_PROC_CONVERT_DCM_ANAT_METADATA",
    "FatProcConvertDcmAnatOutputs",
    "FatProcConvertDcmAnatParamsDict",
    "FatProcConvertDcmAnatParamsDictTagged",
    "fat_proc_convert_dcm_anat",
    "fat_proc_convert_dcm_anat_execute",
    "fat_proc_convert_dcm_anat_params",
]
