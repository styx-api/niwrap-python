# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

GEN_SS_REVIEW_TABLE_PY_METADATA = Metadata(
    id="86e0a4a60a7307fdbdac8e970d36b74509c7924f.boutiques",
    name="gen_ss_review_table.py",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_GenSsReviewTablePyParamsDictNoTag = typing.TypedDict('_GenSsReviewTablePyParamsDictNoTag', {
    "infiles": list[InputPathType],
    "write_table": typing.NotRequired[InputPathType | None],
    "write_outliers": typing.NotRequired[InputPathType | None],
    "overwrite": bool,
    "empty_is_outlier": bool,
    "outlier_sep": typing.NotRequired[str | None],
    "separator": typing.NotRequired[str | None],
    "showlabs": bool,
    "show_infiles": bool,
    "show_keepers": bool,
    "report_outliers": typing.NotRequired[list[str] | None],
    "report_outliers_fill_style": typing.NotRequired[str | None],
    "show_missing": bool,
    "verbosity": typing.NotRequired[int | None],
})
GenSsReviewTablePyParamsDictTagged = typing.TypedDict('GenSsReviewTablePyParamsDictTagged', {
    "@type": typing.Literal["afni/gen_ss_review_table.py"],
    "infiles": list[InputPathType],
    "write_table": typing.NotRequired[InputPathType | None],
    "write_outliers": typing.NotRequired[InputPathType | None],
    "overwrite": bool,
    "empty_is_outlier": bool,
    "outlier_sep": typing.NotRequired[str | None],
    "separator": typing.NotRequired[str | None],
    "showlabs": bool,
    "show_infiles": bool,
    "show_keepers": bool,
    "report_outliers": typing.NotRequired[list[str] | None],
    "report_outliers_fill_style": typing.NotRequired[str | None],
    "show_missing": bool,
    "verbosity": typing.NotRequired[int | None],
})
GenSsReviewTablePyParamsDict = _GenSsReviewTablePyParamsDictNoTag | GenSsReviewTablePyParamsDictTagged


class GenSsReviewTablePyOutputs(typing.NamedTuple):
    """
    Output object returned when calling `GenSsReviewTablePyParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_table: OutputPathType | None
    """Final table output file"""
    output_outliers: OutputPathType | None
    """Outliers table output file"""


def gen_ss_review_table_py_params(
    infiles: list[InputPathType],
    write_table: InputPathType | None = None,
    write_outliers: InputPathType | None = None,
    overwrite: bool = False,
    empty_is_outlier: bool = False,
    outlier_sep: str | None = None,
    separator: str | None = None,
    showlabs: bool = False,
    show_infiles: bool = False,
    show_keepers: bool = False,
    report_outliers: list[str] | None = None,
    report_outliers_fill_style: str | None = None,
    show_missing: bool = False,
    verbosity: int | None = None,
) -> GenSsReviewTablePyParamsDictTagged:
    """
    Build parameters.
    
    Args:
        infiles: Input ss_review_basic output text files to process.
        write_table: Write final table to the given file.
        write_outliers: Write outlier table to the given file.
        overwrite: Overwrite the output -write_table, if it exists.
        empty_is_outlier: Treat empty tests as outliers.
        outlier_sep: Use SEP for the outlier table separator.
        separator: Use SEP for the label/vals separator (default = ':').
        showlabs: Display counts of all labels found, with parents.
        show_infiles: Include input files in reviewtable result.
        show_keepers: Show a table of subjects kept rather than dropped.
        report_outliers: Report outliers where the comparison holds.
        report_outliers_fill_style: How to fill non-outliers in the table.
        show_missing: Display all missing keys.
        verbosity: Verbosity level.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/gen_ss_review_table.py",
        "infiles": infiles,
        "overwrite": overwrite,
        "empty_is_outlier": empty_is_outlier,
        "showlabs": showlabs,
        "show_infiles": show_infiles,
        "show_keepers": show_keepers,
        "show_missing": show_missing,
    }
    if write_table is not None:
        params["write_table"] = write_table
    if write_outliers is not None:
        params["write_outliers"] = write_outliers
    if outlier_sep is not None:
        params["outlier_sep"] = outlier_sep
    if separator is not None:
        params["separator"] = separator
    if report_outliers is not None:
        params["report_outliers"] = report_outliers
    if report_outliers_fill_style is not None:
        params["report_outliers_fill_style"] = report_outliers_fill_style
    if verbosity is not None:
        params["verbosity"] = verbosity
    return params


def gen_ss_review_table_py_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `GenSsReviewTablePyParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("infiles", None) is None:
        raise StyxValidationError("`infiles` must not be None")
    if not isinstance(params["infiles"], list):
        raise StyxValidationError(f'`infiles` has the wrong type: Received `{type(params.get("infiles", None))}` expected `list[InputPathType]`')
    for e in params["infiles"]:
        if not isinstance(e, (pathlib.Path, str)):
            raise StyxValidationError(f'`infiles` has the wrong type: Received `{type(params.get("infiles", None))}` expected `list[InputPathType]`')
    if params.get("write_table", None) is not None:
        if not isinstance(params["write_table"], (pathlib.Path, str)):
            raise StyxValidationError(f'`write_table` has the wrong type: Received `{type(params.get("write_table", None))}` expected `InputPathType | None`')
    if params.get("write_outliers", None) is not None:
        if not isinstance(params["write_outliers"], (pathlib.Path, str)):
            raise StyxValidationError(f'`write_outliers` has the wrong type: Received `{type(params.get("write_outliers", None))}` expected `InputPathType | None`')
    if params.get("overwrite", False) is None:
        raise StyxValidationError("`overwrite` must not be None")
    if not isinstance(params["overwrite"], bool):
        raise StyxValidationError(f'`overwrite` has the wrong type: Received `{type(params.get("overwrite", False))}` expected `bool`')
    if params.get("empty_is_outlier", False) is None:
        raise StyxValidationError("`empty_is_outlier` must not be None")
    if not isinstance(params["empty_is_outlier"], bool):
        raise StyxValidationError(f'`empty_is_outlier` has the wrong type: Received `{type(params.get("empty_is_outlier", False))}` expected `bool`')
    if params.get("outlier_sep", None) is not None:
        if not isinstance(params["outlier_sep"], str):
            raise StyxValidationError(f'`outlier_sep` has the wrong type: Received `{type(params.get("outlier_sep", None))}` expected `str | None`')
    if params.get("separator", None) is not None:
        if not isinstance(params["separator"], str):
            raise StyxValidationError(f'`separator` has the wrong type: Received `{type(params.get("separator", None))}` expected `str | None`')
    if params.get("showlabs", False) is None:
        raise StyxValidationError("`showlabs` must not be None")
    if not isinstance(params["showlabs"], bool):
        raise StyxValidationError(f'`showlabs` has the wrong type: Received `{type(params.get("showlabs", False))}` expected `bool`')
    if params.get("show_infiles", False) is None:
        raise StyxValidationError("`show_infiles` must not be None")
    if not isinstance(params["show_infiles"], bool):
        raise StyxValidationError(f'`show_infiles` has the wrong type: Received `{type(params.get("show_infiles", False))}` expected `bool`')
    if params.get("show_keepers", False) is None:
        raise StyxValidationError("`show_keepers` must not be None")
    if not isinstance(params["show_keepers"], bool):
        raise StyxValidationError(f'`show_keepers` has the wrong type: Received `{type(params.get("show_keepers", False))}` expected `bool`')
    if params.get("report_outliers", None) is not None:
        if not isinstance(params["report_outliers"], list):
            raise StyxValidationError(f'`report_outliers` has the wrong type: Received `{type(params.get("report_outliers", None))}` expected `list[str] | None`')
        for e in params["report_outliers"]:
            if not isinstance(e, str):
                raise StyxValidationError(f'`report_outliers` has the wrong type: Received `{type(params.get("report_outliers", None))}` expected `list[str] | None`')
    if params.get("report_outliers_fill_style", None) is not None:
        if not isinstance(params["report_outliers_fill_style"], str):
            raise StyxValidationError(f'`report_outliers_fill_style` has the wrong type: Received `{type(params.get("report_outliers_fill_style", None))}` expected `str | None`')
    if params.get("show_missing", False) is None:
        raise StyxValidationError("`show_missing` must not be None")
    if not isinstance(params["show_missing"], bool):
        raise StyxValidationError(f'`show_missing` has the wrong type: Received `{type(params.get("show_missing", False))}` expected `bool`')
    if params.get("verbosity", None) is not None:
        if not isinstance(params["verbosity"], int):
            raise StyxValidationError(f'`verbosity` has the wrong type: Received `{type(params.get("verbosity", None))}` expected `int | None`')


def gen_ss_review_table_py_cargs(
    params: GenSsReviewTablePyParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("gen_ss_review_table.py")
    cargs.extend([execution.input_file(f) for f in params.get("infiles", None)])
    if params.get("write_table", None) is not None:
        cargs.extend([
            "-write_table",
            execution.input_file(params.get("write_table", None))
        ])
    if params.get("write_outliers", None) is not None:
        cargs.extend([
            "-write_outliers",
            execution.input_file(params.get("write_outliers", None))
        ])
    if params.get("overwrite", False):
        cargs.append("-overwrite")
    if params.get("empty_is_outlier", False):
        cargs.append("-empty_is_outlier")
    if params.get("outlier_sep", None) is not None:
        cargs.extend([
            "-outlier_sep",
            params.get("outlier_sep", None)
        ])
    if params.get("separator", None) is not None:
        cargs.extend([
            "-separator",
            params.get("separator", None)
        ])
    if params.get("showlabs", False):
        cargs.append("-showlabs")
    if params.get("show_infiles", False):
        cargs.append("-show_infiles")
    if params.get("show_keepers", False):
        cargs.append("-show_keepers")
    if params.get("report_outliers", None) is not None:
        cargs.extend([
            "-report_outliers",
            *params.get("report_outliers", None)
        ])
    if params.get("report_outliers_fill_style", None) is not None:
        cargs.extend([
            "-report_outliers_fill_style",
            params.get("report_outliers_fill_style", None)
        ])
    if params.get("show_missing", False):
        cargs.append("-show_missing")
    if params.get("verbosity", None) is not None:
        cargs.extend([
            "-verb",
            str(params.get("verbosity", None))
        ])
    return cargs


def gen_ss_review_table_py_outputs(
    params: GenSsReviewTablePyParamsDict,
    execution: Execution,
) -> GenSsReviewTablePyOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = GenSsReviewTablePyOutputs(
        root=execution.output_file("."),
        output_table=execution.output_file(pathlib.Path(params.get("write_table", None)).name) if (params.get("write_table") is not None) else None,
        output_outliers=execution.output_file(pathlib.Path(params.get("write_outliers", None)).name) if (params.get("write_outliers") is not None) else None,
    )
    return ret


def gen_ss_review_table_py_execute(
    params: GenSsReviewTablePyParamsDict,
    runner: Runner | None = None,
) -> GenSsReviewTablePyOutputs:
    """
    gen_ss_review_table.py
    
    Generate a table from ss_review_basic output files.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `GenSsReviewTablePyOutputs`).
    """
    gen_ss_review_table_py_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(GEN_SS_REVIEW_TABLE_PY_METADATA)
    params = execution.params(params)
    cargs = gen_ss_review_table_py_cargs(params, execution)
    ret = gen_ss_review_table_py_outputs(params, execution)
    execution.run(cargs)
    return ret


def gen_ss_review_table_py(
    infiles: list[InputPathType],
    write_table: InputPathType | None = None,
    write_outliers: InputPathType | None = None,
    overwrite: bool = False,
    empty_is_outlier: bool = False,
    outlier_sep: str | None = None,
    separator: str | None = None,
    showlabs: bool = False,
    show_infiles: bool = False,
    show_keepers: bool = False,
    report_outliers: list[str] | None = None,
    report_outliers_fill_style: str | None = None,
    show_missing: bool = False,
    verbosity: int | None = None,
    runner: Runner | None = None,
) -> GenSsReviewTablePyOutputs:
    """
    gen_ss_review_table.py
    
    Generate a table from ss_review_basic output files.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        infiles: Input ss_review_basic output text files to process.
        write_table: Write final table to the given file.
        write_outliers: Write outlier table to the given file.
        overwrite: Overwrite the output -write_table, if it exists.
        empty_is_outlier: Treat empty tests as outliers.
        outlier_sep: Use SEP for the outlier table separator.
        separator: Use SEP for the label/vals separator (default = ':').
        showlabs: Display counts of all labels found, with parents.
        show_infiles: Include input files in reviewtable result.
        show_keepers: Show a table of subjects kept rather than dropped.
        report_outliers: Report outliers where the comparison holds.
        report_outliers_fill_style: How to fill non-outliers in the table.
        show_missing: Display all missing keys.
        verbosity: Verbosity level.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `GenSsReviewTablePyOutputs`).
    """
    params = gen_ss_review_table_py_params(
        infiles=infiles,
        write_table=write_table,
        write_outliers=write_outliers,
        overwrite=overwrite,
        empty_is_outlier=empty_is_outlier,
        outlier_sep=outlier_sep,
        separator=separator,
        showlabs=showlabs,
        show_infiles=show_infiles,
        show_keepers=show_keepers,
        report_outliers=report_outliers,
        report_outliers_fill_style=report_outliers_fill_style,
        show_missing=show_missing,
        verbosity=verbosity,
    )
    return gen_ss_review_table_py_execute(params, runner)


__all__ = [
    "GEN_SS_REVIEW_TABLE_PY_METADATA",
    "GenSsReviewTablePyOutputs",
    "GenSsReviewTablePyParamsDict",
    "GenSsReviewTablePyParamsDictTagged",
    "gen_ss_review_table_py",
    "gen_ss_review_table_py_execute",
    "gen_ss_review_table_py_params",
]
