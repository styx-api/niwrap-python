# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

SURF_CLUST_METADATA = Metadata(
    id="af3d67f2fd2388454b25618145b4abdd170406fc.boutiques",
    name="SurfClust",
    package="afni",
    container_image_tag="afni/afni_make_build:AFNI_24.2.06",
)


_SurfClustParamsDictNoTag = typing.TypedDict('_SurfClustParamsDictNoTag', {
    "specfile": typing.NotRequired[InputPathType | None],
    "input_surface": typing.NotRequired[str | None],
    "input_surf_name": typing.NotRequired[InputPathType | None],
    "input_dataset": list[InputPathType],
    "rmm": float,
    "amm2": typing.NotRequired[float | None],
    "min_nodes": typing.NotRequired[float | None],
    "prefix": typing.NotRequired[str | None],
    "out_clusterdset": bool,
    "out_roidset": bool,
    "out_fulllist": bool,
    "sort_none": bool,
    "sort_n_nodes": bool,
    "sort_area": bool,
    "thresh_col": typing.NotRequired[float | None],
    "thresh": typing.NotRequired[float | None],
    "athresh": typing.NotRequired[float | None],
    "ir_range": typing.NotRequired[list[float] | None],
    "ex_range": typing.NotRequired[list[float] | None],
    "prepend_node_index": bool,
    "update": typing.NotRequired[float | None],
    "no_cent": bool,
    "cent": bool,
    "novolreg": bool,
    "noxform": bool,
    "set_env": typing.NotRequired[str | None],
    "trace": bool,
    "trace_extreme": bool,
    "no_memory_trace": bool,
    "yes_memory_trace": bool,
    "mini_help": bool,
    "help": bool,
    "extreme_help": bool,
    "view_help": bool,
    "web_help": bool,
    "find_help": typing.NotRequired[str | None],
    "raw_help": bool,
    "spx_help": bool,
    "aspx_help": bool,
})
SurfClustParamsDictTagged = typing.TypedDict('SurfClustParamsDictTagged', {
    "@type": typing.Literal["afni/SurfClust"],
    "specfile": typing.NotRequired[InputPathType | None],
    "input_surface": typing.NotRequired[str | None],
    "input_surf_name": typing.NotRequired[InputPathType | None],
    "input_dataset": list[InputPathType],
    "rmm": float,
    "amm2": typing.NotRequired[float | None],
    "min_nodes": typing.NotRequired[float | None],
    "prefix": typing.NotRequired[str | None],
    "out_clusterdset": bool,
    "out_roidset": bool,
    "out_fulllist": bool,
    "sort_none": bool,
    "sort_n_nodes": bool,
    "sort_area": bool,
    "thresh_col": typing.NotRequired[float | None],
    "thresh": typing.NotRequired[float | None],
    "athresh": typing.NotRequired[float | None],
    "ir_range": typing.NotRequired[list[float] | None],
    "ex_range": typing.NotRequired[list[float] | None],
    "prepend_node_index": bool,
    "update": typing.NotRequired[float | None],
    "no_cent": bool,
    "cent": bool,
    "novolreg": bool,
    "noxform": bool,
    "set_env": typing.NotRequired[str | None],
    "trace": bool,
    "trace_extreme": bool,
    "no_memory_trace": bool,
    "yes_memory_trace": bool,
    "mini_help": bool,
    "help": bool,
    "extreme_help": bool,
    "view_help": bool,
    "web_help": bool,
    "find_help": typing.NotRequired[str | None],
    "raw_help": bool,
    "spx_help": bool,
    "aspx_help": bool,
})
SurfClustParamsDict = _SurfClustParamsDictNoTag | SurfClustParamsDictTagged


class SurfClustOutputs(typing.NamedTuple):
    """
    Output object returned when calling `SurfClustParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    cluster_table: OutputPathType | None
    """Cluster table output"""
    clustered_dataset: OutputPathType | None
    """Clustered version of input dataset"""
    roi_dataset: OutputPathType | None
    """ROI dataset with rank of clusters"""


def surf_clust_params(
    input_dataset: list[InputPathType],
    rmm: float,
    specfile: InputPathType | None = None,
    input_surface: str | None = None,
    input_surf_name: InputPathType | None = None,
    amm2: float | None = None,
    min_nodes: float | None = None,
    prefix: str | None = None,
    out_clusterdset: bool = False,
    out_roidset: bool = False,
    out_fulllist: bool = False,
    sort_none: bool = False,
    sort_n_nodes: bool = False,
    sort_area: bool = False,
    thresh_col: float | None = None,
    thresh: float | None = None,
    athresh: float | None = None,
    ir_range: list[float] | None = None,
    ex_range: list[float] | None = None,
    prepend_node_index: bool = False,
    update_: float | None = None,
    no_cent: bool = False,
    cent: bool = False,
    novolreg: bool = False,
    noxform: bool = False,
    set_env: str | None = None,
    trace_: bool = False,
    trace_extreme: bool = False,
    no_memory_trace: bool = False,
    yes_memory_trace: bool = False,
    mini_help: bool = False,
    help_: bool = False,
    extreme_help: bool = False,
    view_help: bool = False,
    web_help: bool = False,
    find_help: str | None = None,
    raw_help: bool = False,
    spx_help: bool = False,
    aspx_help: bool = False,
) -> SurfClustParamsDictTagged:
    """
    Build parameters.
    
    Args:
        input_dataset: The input dataset and the index of the datacolumn to use\
            (index 0 for 1st column). Values of 0 indicate inactive nodes.
        rmm: Maximum distance between an activated node and the cluster to\
            which it belongs.
        specfile: The surface spec file.
        input_surface: The input surface name.
        input_surf_name: Full name of the input surface.
        amm2: Minimum area for clusters.
        min_nodes: Minimum nodes for clusters.
        prefix: Prefix for output. Default is the prefix of the input dataset.
        out_clusterdset: Output a clustered version of input dataset.
        out_roidset: Output an ROI dataset with the rank of its cluster.
        out_fulllist: Output a value for all nodes of input surface.
        sort_none: No sorting of ROI clusters.
        sort_n_nodes: Sorting based on number of nodes in cluster.
        sort_area: Sorting based on area of clusters (default).
        thresh_col: Index of thresholding column. Default is column 0.
        thresh: Apply thresholding prior to clustering.
        athresh: Apply absolute thresholding prior to clustering.
        ir_range: Apply thresholding in range. A node n is considered if\
            thresh_col[n] >= R0 && thresh_col[n] <= R1.
        ex_range: Apply thresholding outside of range. A node n is considered\
            if thresh_col[n] < R0 || thresh_col[n] > R1.
        prepend_node_index: Force the output dataset to have node indices in\
            column 0 of output.
        update_: Pacify me when perc of the data have been processed. perc is\
            between 1% and 50%. Default is no update.
        no_cent: Do not find the central nodes.
        cent: Do find the central nodes (default).
        novolreg: Ignore any Rotate, Volreg, Tagalign, or WarpDrive\
            transformations present in the Surface Volume.
        noxform: Same as -novolreg.
        set_env: Set environment variable ENVname to be ENVvalue. Quotes are\
            necessary.
        trace_: Turns on In/Out debug and Memory tracing.
        trace_extreme: Turns on extreme tracing.
        no_memory_trace: Turn off memory tracing.
        yes_memory_trace: Turn on memory tracing (default).
        mini_help: Mini help, same as -help in many cases.
        help_: The entire help output.
        extreme_help: Extreme help, same as -help in majority of cases.
        view_help: Open help in text editor. AFNI will try to find a GUI editor\
            on your machine. You can control which it should use by setting\
            environment variable AFNI_GUI_EDITOR.
        web_help: Open help in web browser. AFNI will try to find a browser.\
            You can control which it should use by setting environment variable\
            AFNI_GUI_EDITOR.
        find_help: Look for lines in this program's -help output that match\
            (approximately) the given word.
        raw_help: Help string unedited.
        spx_help: Help string in sphinx format, but do not try to autoformat.
        aspx_help: Help string in sphinx format with autoformatting of options.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "afni/SurfClust",
        "input_dataset": input_dataset,
        "rmm": rmm,
        "out_clusterdset": out_clusterdset,
        "out_roidset": out_roidset,
        "out_fulllist": out_fulllist,
        "sort_none": sort_none,
        "sort_n_nodes": sort_n_nodes,
        "sort_area": sort_area,
        "prepend_node_index": prepend_node_index,
        "no_cent": no_cent,
        "cent": cent,
        "novolreg": novolreg,
        "noxform": noxform,
        "trace": trace_,
        "trace_extreme": trace_extreme,
        "no_memory_trace": no_memory_trace,
        "yes_memory_trace": yes_memory_trace,
        "mini_help": mini_help,
        "help": help_,
        "extreme_help": extreme_help,
        "view_help": view_help,
        "web_help": web_help,
        "raw_help": raw_help,
        "spx_help": spx_help,
        "aspx_help": aspx_help,
    }
    if specfile is not None:
        params["specfile"] = specfile
    if input_surface is not None:
        params["input_surface"] = input_surface
    if input_surf_name is not None:
        params["input_surf_name"] = input_surf_name
    if amm2 is not None:
        params["amm2"] = amm2
    if min_nodes is not None:
        params["min_nodes"] = min_nodes
    if prefix is not None:
        params["prefix"] = prefix
    if thresh_col is not None:
        params["thresh_col"] = thresh_col
    if thresh is not None:
        params["thresh"] = thresh
    if athresh is not None:
        params["athresh"] = athresh
    if ir_range is not None:
        params["ir_range"] = ir_range
    if ex_range is not None:
        params["ex_range"] = ex_range
    if update_ is not None:
        params["update"] = update_
    if set_env is not None:
        params["set_env"] = set_env
    if find_help is not None:
        params["find_help"] = find_help
    return params


def surf_clust_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `SurfClustParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("specfile", None) is not None:
        if not isinstance(params["specfile"], (pathlib.Path, str)):
            raise StyxValidationError(f'`specfile` has the wrong type: Received `{type(params.get("specfile", None))}` expected `InputPathType | None`')
    if params.get("input_surface", None) is not None:
        if not isinstance(params["input_surface"], str):
            raise StyxValidationError(f'`input_surface` has the wrong type: Received `{type(params.get("input_surface", None))}` expected `str | None`')
    if params.get("input_surf_name", None) is not None:
        if not isinstance(params["input_surf_name"], (pathlib.Path, str)):
            raise StyxValidationError(f'`input_surf_name` has the wrong type: Received `{type(params.get("input_surf_name", None))}` expected `InputPathType | None`')
    if params.get("input_dataset", None) is None:
        raise StyxValidationError("`input_dataset` must not be None")
    if not isinstance(params["input_dataset"], list):
        raise StyxValidationError(f'`input_dataset` has the wrong type: Received `{type(params.get("input_dataset", None))}` expected `list[InputPathType]`')
    if len(params["input_dataset"]) != 2:
        raise StyxValidationError("Parameter `input_dataset` must contain exactly 2 elements")
    for e in params["input_dataset"]:
        if not isinstance(e, (pathlib.Path, str)):
            raise StyxValidationError(f'`input_dataset` has the wrong type: Received `{type(params.get("input_dataset", None))}` expected `list[InputPathType]`')
    if params.get("rmm", None) is None:
        raise StyxValidationError("`rmm` must not be None")
    if not isinstance(params["rmm"], (float, int)):
        raise StyxValidationError(f'`rmm` has the wrong type: Received `{type(params.get("rmm", None))}` expected `float`')
    if params.get("amm2", None) is not None:
        if not isinstance(params["amm2"], (float, int)):
            raise StyxValidationError(f'`amm2` has the wrong type: Received `{type(params.get("amm2", None))}` expected `float | None`')
    if params.get("min_nodes", None) is not None:
        if not isinstance(params["min_nodes"], (float, int)):
            raise StyxValidationError(f'`min_nodes` has the wrong type: Received `{type(params.get("min_nodes", None))}` expected `float | None`')
    if params.get("prefix", None) is not None:
        if not isinstance(params["prefix"], str):
            raise StyxValidationError(f'`prefix` has the wrong type: Received `{type(params.get("prefix", None))}` expected `str | None`')
    if params.get("out_clusterdset", False) is None:
        raise StyxValidationError("`out_clusterdset` must not be None")
    if not isinstance(params["out_clusterdset"], bool):
        raise StyxValidationError(f'`out_clusterdset` has the wrong type: Received `{type(params.get("out_clusterdset", False))}` expected `bool`')
    if params.get("out_roidset", False) is None:
        raise StyxValidationError("`out_roidset` must not be None")
    if not isinstance(params["out_roidset"], bool):
        raise StyxValidationError(f'`out_roidset` has the wrong type: Received `{type(params.get("out_roidset", False))}` expected `bool`')
    if params.get("out_fulllist", False) is None:
        raise StyxValidationError("`out_fulllist` must not be None")
    if not isinstance(params["out_fulllist"], bool):
        raise StyxValidationError(f'`out_fulllist` has the wrong type: Received `{type(params.get("out_fulllist", False))}` expected `bool`')
    if params.get("sort_none", False) is None:
        raise StyxValidationError("`sort_none` must not be None")
    if not isinstance(params["sort_none"], bool):
        raise StyxValidationError(f'`sort_none` has the wrong type: Received `{type(params.get("sort_none", False))}` expected `bool`')
    if params.get("sort_n_nodes", False) is None:
        raise StyxValidationError("`sort_n_nodes` must not be None")
    if not isinstance(params["sort_n_nodes"], bool):
        raise StyxValidationError(f'`sort_n_nodes` has the wrong type: Received `{type(params.get("sort_n_nodes", False))}` expected `bool`')
    if params.get("sort_area", False) is None:
        raise StyxValidationError("`sort_area` must not be None")
    if not isinstance(params["sort_area"], bool):
        raise StyxValidationError(f'`sort_area` has the wrong type: Received `{type(params.get("sort_area", False))}` expected `bool`')
    if params.get("thresh_col", None) is not None:
        if not isinstance(params["thresh_col"], (float, int)):
            raise StyxValidationError(f'`thresh_col` has the wrong type: Received `{type(params.get("thresh_col", None))}` expected `float | None`')
    if params.get("thresh", None) is not None:
        if not isinstance(params["thresh"], (float, int)):
            raise StyxValidationError(f'`thresh` has the wrong type: Received `{type(params.get("thresh", None))}` expected `float | None`')
    if params.get("athresh", None) is not None:
        if not isinstance(params["athresh"], (float, int)):
            raise StyxValidationError(f'`athresh` has the wrong type: Received `{type(params.get("athresh", None))}` expected `float | None`')
    if params.get("ir_range", None) is not None:
        if not isinstance(params["ir_range"], list):
            raise StyxValidationError(f'`ir_range` has the wrong type: Received `{type(params.get("ir_range", None))}` expected `list[float] | None`')
        if len(params["ir_range"]) != 2:
            raise StyxValidationError("Parameter `ir_range` must contain exactly 2 elements")
        for e in params["ir_range"]:
            if not isinstance(e, (float, int)):
                raise StyxValidationError(f'`ir_range` has the wrong type: Received `{type(params.get("ir_range", None))}` expected `list[float] | None`')
    if params.get("ex_range", None) is not None:
        if not isinstance(params["ex_range"], list):
            raise StyxValidationError(f'`ex_range` has the wrong type: Received `{type(params.get("ex_range", None))}` expected `list[float] | None`')
        if len(params["ex_range"]) != 2:
            raise StyxValidationError("Parameter `ex_range` must contain exactly 2 elements")
        for e in params["ex_range"]:
            if not isinstance(e, (float, int)):
                raise StyxValidationError(f'`ex_range` has the wrong type: Received `{type(params.get("ex_range", None))}` expected `list[float] | None`')
    if params.get("prepend_node_index", False) is None:
        raise StyxValidationError("`prepend_node_index` must not be None")
    if not isinstance(params["prepend_node_index"], bool):
        raise StyxValidationError(f'`prepend_node_index` has the wrong type: Received `{type(params.get("prepend_node_index", False))}` expected `bool`')
    if params.get("update", None) is not None:
        if not isinstance(params["update"], (float, int)):
            raise StyxValidationError(f'`update` has the wrong type: Received `{type(params.get("update", None))}` expected `float | None`')
    if params.get("no_cent", False) is None:
        raise StyxValidationError("`no_cent` must not be None")
    if not isinstance(params["no_cent"], bool):
        raise StyxValidationError(f'`no_cent` has the wrong type: Received `{type(params.get("no_cent", False))}` expected `bool`')
    if params.get("cent", False) is None:
        raise StyxValidationError("`cent` must not be None")
    if not isinstance(params["cent"], bool):
        raise StyxValidationError(f'`cent` has the wrong type: Received `{type(params.get("cent", False))}` expected `bool`')
    if params.get("novolreg", False) is None:
        raise StyxValidationError("`novolreg` must not be None")
    if not isinstance(params["novolreg"], bool):
        raise StyxValidationError(f'`novolreg` has the wrong type: Received `{type(params.get("novolreg", False))}` expected `bool`')
    if params.get("noxform", False) is None:
        raise StyxValidationError("`noxform` must not be None")
    if not isinstance(params["noxform"], bool):
        raise StyxValidationError(f'`noxform` has the wrong type: Received `{type(params.get("noxform", False))}` expected `bool`')
    if params.get("set_env", None) is not None:
        if not isinstance(params["set_env"], str):
            raise StyxValidationError(f'`set_env` has the wrong type: Received `{type(params.get("set_env", None))}` expected `str | None`')
    if params.get("trace", False) is None:
        raise StyxValidationError("`trace` must not be None")
    if not isinstance(params["trace"], bool):
        raise StyxValidationError(f'`trace` has the wrong type: Received `{type(params.get("trace", False))}` expected `bool`')
    if params.get("trace_extreme", False) is None:
        raise StyxValidationError("`trace_extreme` must not be None")
    if not isinstance(params["trace_extreme"], bool):
        raise StyxValidationError(f'`trace_extreme` has the wrong type: Received `{type(params.get("trace_extreme", False))}` expected `bool`')
    if params.get("no_memory_trace", False) is None:
        raise StyxValidationError("`no_memory_trace` must not be None")
    if not isinstance(params["no_memory_trace"], bool):
        raise StyxValidationError(f'`no_memory_trace` has the wrong type: Received `{type(params.get("no_memory_trace", False))}` expected `bool`')
    if params.get("yes_memory_trace", False) is None:
        raise StyxValidationError("`yes_memory_trace` must not be None")
    if not isinstance(params["yes_memory_trace"], bool):
        raise StyxValidationError(f'`yes_memory_trace` has the wrong type: Received `{type(params.get("yes_memory_trace", False))}` expected `bool`')
    if params.get("mini_help", False) is None:
        raise StyxValidationError("`mini_help` must not be None")
    if not isinstance(params["mini_help"], bool):
        raise StyxValidationError(f'`mini_help` has the wrong type: Received `{type(params.get("mini_help", False))}` expected `bool`')
    if params.get("help", False) is None:
        raise StyxValidationError("`help` must not be None")
    if not isinstance(params["help"], bool):
        raise StyxValidationError(f'`help` has the wrong type: Received `{type(params.get("help", False))}` expected `bool`')
    if params.get("extreme_help", False) is None:
        raise StyxValidationError("`extreme_help` must not be None")
    if not isinstance(params["extreme_help"], bool):
        raise StyxValidationError(f'`extreme_help` has the wrong type: Received `{type(params.get("extreme_help", False))}` expected `bool`')
    if params.get("view_help", False) is None:
        raise StyxValidationError("`view_help` must not be None")
    if not isinstance(params["view_help"], bool):
        raise StyxValidationError(f'`view_help` has the wrong type: Received `{type(params.get("view_help", False))}` expected `bool`')
    if params.get("web_help", False) is None:
        raise StyxValidationError("`web_help` must not be None")
    if not isinstance(params["web_help"], bool):
        raise StyxValidationError(f'`web_help` has the wrong type: Received `{type(params.get("web_help", False))}` expected `bool`')
    if params.get("find_help", None) is not None:
        if not isinstance(params["find_help"], str):
            raise StyxValidationError(f'`find_help` has the wrong type: Received `{type(params.get("find_help", None))}` expected `str | None`')
    if params.get("raw_help", False) is None:
        raise StyxValidationError("`raw_help` must not be None")
    if not isinstance(params["raw_help"], bool):
        raise StyxValidationError(f'`raw_help` has the wrong type: Received `{type(params.get("raw_help", False))}` expected `bool`')
    if params.get("spx_help", False) is None:
        raise StyxValidationError("`spx_help` must not be None")
    if not isinstance(params["spx_help"], bool):
        raise StyxValidationError(f'`spx_help` has the wrong type: Received `{type(params.get("spx_help", False))}` expected `bool`')
    if params.get("aspx_help", False) is None:
        raise StyxValidationError("`aspx_help` must not be None")
    if not isinstance(params["aspx_help"], bool):
        raise StyxValidationError(f'`aspx_help` has the wrong type: Received `{type(params.get("aspx_help", False))}` expected `bool`')


def surf_clust_cargs(
    params: SurfClustParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("SurfClust")
    if params.get("specfile", None) is not None:
        cargs.extend([
            "-spec",
            execution.input_file(params.get("specfile", None))
        ])
    if params.get("input_surface", None) is not None:
        cargs.extend([
            "-surf_A",
            params.get("input_surface", None)
        ])
    if params.get("input_surf_name", None) is not None:
        cargs.extend([
            "-i",
            execution.input_file(params.get("input_surf_name", None))
        ])
    cargs.extend([
        "-input",
        *[execution.input_file(f) for f in params.get("input_dataset", None)]
    ])
    cargs.extend([
        "-rmm",
        str(params.get("rmm", None))
    ])
    if params.get("amm2", None) is not None:
        cargs.extend([
            "-amm2",
            str(params.get("amm2", None))
        ])
    if params.get("min_nodes", None) is not None:
        cargs.extend([
            "-n",
            str(params.get("min_nodes", None))
        ])
    if params.get("prefix", None) is not None:
        cargs.extend([
            "-prefix",
            params.get("prefix", None)
        ])
    if params.get("out_clusterdset", False):
        cargs.append("-out_clusterdset")
    if params.get("out_roidset", False):
        cargs.append("-out_roidset")
    if params.get("out_fulllist", False):
        cargs.append("-out_fulllist")
    if params.get("sort_none", False):
        cargs.append("-sort_none")
    if params.get("sort_n_nodes", False):
        cargs.append("-sort_n_nodes")
    if params.get("sort_area", False):
        cargs.append("-sort_area")
    if params.get("thresh_col", None) is not None:
        cargs.extend([
            "-thresh_col",
            str(params.get("thresh_col", None))
        ])
    if params.get("thresh", None) is not None:
        cargs.extend([
            "-thresh",
            str(params.get("thresh", None))
        ])
    if params.get("athresh", None) is not None:
        cargs.extend([
            "-athresh",
            str(params.get("athresh", None))
        ])
    if params.get("ir_range", None) is not None:
        cargs.extend([
            "-ir_range",
            *map(str, params.get("ir_range", None))
        ])
    if params.get("ex_range", None) is not None:
        cargs.extend([
            "-ex_range",
            *map(str, params.get("ex_range", None))
        ])
    if params.get("prepend_node_index", False):
        cargs.append("-prepend_node_index")
    if params.get("update", None) is not None:
        cargs.extend([
            "-update",
            str(params.get("update", None))
        ])
    if params.get("no_cent", False):
        cargs.append("-no_cent")
    if params.get("cent", False):
        cargs.append("-cent")
    if params.get("novolreg", False):
        cargs.append("-novolreg")
    if params.get("noxform", False):
        cargs.append("-noxform")
    if params.get("set_env", None) is not None:
        cargs.extend([
            "-setenv",
            params.get("set_env", None)
        ])
    if params.get("trace", False):
        cargs.append("-trace")
    if params.get("trace_extreme", False):
        cargs.append("-TRACE")
    if params.get("no_memory_trace", False):
        cargs.append("-nomall")
    if params.get("yes_memory_trace", False):
        cargs.append("-yesmall")
    if params.get("mini_help", False):
        cargs.append("-h")
    if params.get("help", False):
        cargs.append("-help")
    if params.get("extreme_help", False):
        cargs.append("-HELP")
    if params.get("view_help", False):
        cargs.append("-h_view")
    if params.get("web_help", False):
        cargs.append("-h_web")
    if params.get("find_help", None) is not None:
        cargs.extend([
            "-h_find",
            params.get("find_help", None)
        ])
    if params.get("raw_help", False):
        cargs.append("-h_raw")
    if params.get("spx_help", False):
        cargs.append("-h_spx")
    if params.get("aspx_help", False):
        cargs.append("-h_aspx")
    return cargs


def surf_clust_outputs(
    params: SurfClustParamsDict,
    execution: Execution,
) -> SurfClustOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = SurfClustOutputs(
        root=execution.output_file("."),
        cluster_table=execution.output_file(params.get("prefix", None) + "_ClstTable_rXX_aXX.1D") if (params.get("prefix") is not None) else None,
        clustered_dataset=execution.output_file(params.get("prefix", None) + "_Clustered_rXX_aXX.dset") if (params.get("prefix") is not None) else None,
        roi_dataset=execution.output_file(params.get("prefix", None) + "_ClstMsk_rXX_aXX.dset") if (params.get("prefix") is not None) else None,
    )
    return ret


def surf_clust_execute(
    params: SurfClustParamsDict,
    runner: Runner | None = None,
) -> SurfClustOutputs:
    """
    SurfClust
    
    A program to perform clustering analysis surfaces.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `SurfClustOutputs`).
    """
    surf_clust_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(SURF_CLUST_METADATA)
    params = execution.params(params)
    cargs = surf_clust_cargs(params, execution)
    ret = surf_clust_outputs(params, execution)
    execution.run(cargs)
    return ret


def surf_clust(
    input_dataset: list[InputPathType],
    rmm: float,
    specfile: InputPathType | None = None,
    input_surface: str | None = None,
    input_surf_name: InputPathType | None = None,
    amm2: float | None = None,
    min_nodes: float | None = None,
    prefix: str | None = None,
    out_clusterdset: bool = False,
    out_roidset: bool = False,
    out_fulllist: bool = False,
    sort_none: bool = False,
    sort_n_nodes: bool = False,
    sort_area: bool = False,
    thresh_col: float | None = None,
    thresh: float | None = None,
    athresh: float | None = None,
    ir_range: list[float] | None = None,
    ex_range: list[float] | None = None,
    prepend_node_index: bool = False,
    update_: float | None = None,
    no_cent: bool = False,
    cent: bool = False,
    novolreg: bool = False,
    noxform: bool = False,
    set_env: str | None = None,
    trace_: bool = False,
    trace_extreme: bool = False,
    no_memory_trace: bool = False,
    yes_memory_trace: bool = False,
    mini_help: bool = False,
    help_: bool = False,
    extreme_help: bool = False,
    view_help: bool = False,
    web_help: bool = False,
    find_help: str | None = None,
    raw_help: bool = False,
    spx_help: bool = False,
    aspx_help: bool = False,
    runner: Runner | None = None,
) -> SurfClustOutputs:
    """
    SurfClust
    
    A program to perform clustering analysis surfaces.
    
    Author: AFNI Developers
    
    URL: https://afni.nimh.nih.gov/
    
    Args:
        input_dataset: The input dataset and the index of the datacolumn to use\
            (index 0 for 1st column). Values of 0 indicate inactive nodes.
        rmm: Maximum distance between an activated node and the cluster to\
            which it belongs.
        specfile: The surface spec file.
        input_surface: The input surface name.
        input_surf_name: Full name of the input surface.
        amm2: Minimum area for clusters.
        min_nodes: Minimum nodes for clusters.
        prefix: Prefix for output. Default is the prefix of the input dataset.
        out_clusterdset: Output a clustered version of input dataset.
        out_roidset: Output an ROI dataset with the rank of its cluster.
        out_fulllist: Output a value for all nodes of input surface.
        sort_none: No sorting of ROI clusters.
        sort_n_nodes: Sorting based on number of nodes in cluster.
        sort_area: Sorting based on area of clusters (default).
        thresh_col: Index of thresholding column. Default is column 0.
        thresh: Apply thresholding prior to clustering.
        athresh: Apply absolute thresholding prior to clustering.
        ir_range: Apply thresholding in range. A node n is considered if\
            thresh_col[n] >= R0 && thresh_col[n] <= R1.
        ex_range: Apply thresholding outside of range. A node n is considered\
            if thresh_col[n] < R0 || thresh_col[n] > R1.
        prepend_node_index: Force the output dataset to have node indices in\
            column 0 of output.
        update_: Pacify me when perc of the data have been processed. perc is\
            between 1% and 50%. Default is no update.
        no_cent: Do not find the central nodes.
        cent: Do find the central nodes (default).
        novolreg: Ignore any Rotate, Volreg, Tagalign, or WarpDrive\
            transformations present in the Surface Volume.
        noxform: Same as -novolreg.
        set_env: Set environment variable ENVname to be ENVvalue. Quotes are\
            necessary.
        trace_: Turns on In/Out debug and Memory tracing.
        trace_extreme: Turns on extreme tracing.
        no_memory_trace: Turn off memory tracing.
        yes_memory_trace: Turn on memory tracing (default).
        mini_help: Mini help, same as -help in many cases.
        help_: The entire help output.
        extreme_help: Extreme help, same as -help in majority of cases.
        view_help: Open help in text editor. AFNI will try to find a GUI editor\
            on your machine. You can control which it should use by setting\
            environment variable AFNI_GUI_EDITOR.
        web_help: Open help in web browser. AFNI will try to find a browser.\
            You can control which it should use by setting environment variable\
            AFNI_GUI_EDITOR.
        find_help: Look for lines in this program's -help output that match\
            (approximately) the given word.
        raw_help: Help string unedited.
        spx_help: Help string in sphinx format, but do not try to autoformat.
        aspx_help: Help string in sphinx format with autoformatting of options.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `SurfClustOutputs`).
    """
    params = surf_clust_params(
        specfile=specfile,
        input_surface=input_surface,
        input_surf_name=input_surf_name,
        input_dataset=input_dataset,
        rmm=rmm,
        amm2=amm2,
        min_nodes=min_nodes,
        prefix=prefix,
        out_clusterdset=out_clusterdset,
        out_roidset=out_roidset,
        out_fulllist=out_fulllist,
        sort_none=sort_none,
        sort_n_nodes=sort_n_nodes,
        sort_area=sort_area,
        thresh_col=thresh_col,
        thresh=thresh,
        athresh=athresh,
        ir_range=ir_range,
        ex_range=ex_range,
        prepend_node_index=prepend_node_index,
        update_=update_,
        no_cent=no_cent,
        cent=cent,
        novolreg=novolreg,
        noxform=noxform,
        set_env=set_env,
        trace_=trace_,
        trace_extreme=trace_extreme,
        no_memory_trace=no_memory_trace,
        yes_memory_trace=yes_memory_trace,
        mini_help=mini_help,
        help_=help_,
        extreme_help=extreme_help,
        view_help=view_help,
        web_help=web_help,
        find_help=find_help,
        raw_help=raw_help,
        spx_help=spx_help,
        aspx_help=aspx_help,
    )
    return surf_clust_execute(params, runner)


__all__ = [
    "SURF_CLUST_METADATA",
    "SurfClustOutputs",
    "SurfClustParamsDict",
    "SurfClustParamsDictTagged",
    "surf_clust",
    "surf_clust_execute",
    "surf_clust_params",
]
