# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

FOCI_CREATE_METADATA = Metadata(
    id="1960245f5f1335cfba8188182bda09435e59d575.workbench",
    name="foci-create",
    package="workbench",
    container_image_tag="nx10x/workbench:2.1.0",
)


_FociCreateClassParamsDictNoTag = typing.TypedDict('_FociCreateClassParamsDictNoTag', {
    "class-name": str,
    "foci-list-file": str,
    "surface": InputPathType,
})
FociCreateClassParamsDictTagged = typing.TypedDict('FociCreateClassParamsDictTagged', {
    "@type": typing.Literal["class"],
    "class-name": str,
    "foci-list-file": str,
    "surface": InputPathType,
})
FociCreateClassParamsDict = _FociCreateClassParamsDictNoTag | FociCreateClassParamsDictTagged


_FociCreateParamsDictNoTag = typing.TypedDict('_FociCreateParamsDictNoTag', {
    "output": str,
    "class": typing.NotRequired[list[FociCreateClassParamsDict] | None],
})
FociCreateParamsDictTagged = typing.TypedDict('FociCreateParamsDictTagged', {
    "@type": typing.Literal["workbench/foci-create"],
    "output": str,
    "class": typing.NotRequired[list[FociCreateClassParamsDict] | None],
})
FociCreateParamsDict = _FociCreateParamsDictNoTag | FociCreateParamsDictTagged


def foci_create_class(
    class_name: str,
    foci_list_file: str,
    surface: InputPathType,
) -> FociCreateClassParamsDictTagged:
    """
    Build parameters.
    
    Args:
        class_name: name of class.
        foci_list_file: text file containing foci names, coordinates, and\
            colors.
        surface: surface file for projection of foci list file.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "class",
        "class-name": class_name,
        "foci-list-file": foci_list_file,
        "surface": surface,
    }
    return params


def foci_create_class_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `FociCreateClassParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("class-name", None) is None:
        raise StyxValidationError("`class-name` must not be None")
    if not isinstance(params["class-name"], str):
        raise StyxValidationError(f'`class-name` has the wrong type: Received `{type(params.get("class-name", None))}` expected `str`')
    if params.get("foci-list-file", None) is None:
        raise StyxValidationError("`foci-list-file` must not be None")
    if not isinstance(params["foci-list-file"], str):
        raise StyxValidationError(f'`foci-list-file` has the wrong type: Received `{type(params.get("foci-list-file", None))}` expected `str`')
    if params.get("surface", None) is None:
        raise StyxValidationError("`surface` must not be None")
    if not isinstance(params["surface"], (pathlib.Path, str)):
        raise StyxValidationError(f'`surface` has the wrong type: Received `{type(params.get("surface", None))}` expected `InputPathType`')


def foci_create_class_cargs(
    params: FociCreateClassParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.extend([
        "-class",
        params.get("class-name", None),
        params.get("foci-list-file", None),
        execution.input_file(params.get("surface", None))
    ])
    return cargs


class FociCreateOutputs(typing.NamedTuple):
    """
    Output object returned when calling `FociCreateParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output: OutputPathType
    """the output foci file"""


def foci_create_params(
    output: str,
    class_: list[FociCreateClassParamsDict] | None = None,
) -> FociCreateParamsDictTagged:
    """
    Build parameters.
    
    Args:
        output: the output foci file.
        class_: specify class input data.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "workbench/foci-create",
        "output": output,
    }
    if class_ is not None:
        params["class"] = class_
    return params


def foci_create_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `FociCreateParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("output", None) is None:
        raise StyxValidationError("`output` must not be None")
    if not isinstance(params["output"], str):
        raise StyxValidationError(f'`output` has the wrong type: Received `{type(params.get("output", None))}` expected `str`')
    if params.get("class", None) is not None:
        if not isinstance(params["class"], list):
            raise StyxValidationError(f'`class` has the wrong type: Received `{type(params.get("class", None))}` expected `list[FociCreateClassParamsDict] | None`')
        for e in params["class"]:
            foci_create_class_validate(e)


def foci_create_cargs(
    params: FociCreateParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.extend([
        "wb_command",
        "-foci-create"
    ])
    cargs.append(params.get("output", None))
    if params.get("class", None) is not None:
        cargs.extend([a for c in [foci_create_class_cargs(s, execution) for s in params.get("class", None)] for a in c])
    return cargs


def foci_create_outputs(
    params: FociCreateParamsDict,
    execution: Execution,
) -> FociCreateOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = FociCreateOutputs(
        root=execution.output_file("."),
        output=execution.output_file(params.get("output", None)),
    )
    return ret


def foci_create_execute(
    params: FociCreateParamsDict,
    runner: Runner | None = None,
) -> FociCreateOutputs:
    """
    CREATE A FOCI FILE.
    
    Creates a foci file from names, coordinates, and RGB values in a text file.
    The text file must have the following format (2 lines per focus):
    
    <focus-name>
    <red> <green> <blue> <x> <y> <z>
    ...
    
    Foci names are specified on a separate line from their coordinates and
    color, in order to let foci names contain spaces. Whitespace is trimmed from
    both ends of the foci name, but is kept if it is in the middle of a name.
    The values of <red>, <green>, <blue> and must be integers from 0 to 255, and
    will specify the color the foci is drawn as.
    
    Foci are grouped into classes and the name for the class is specified using
    the <class-name> parameter.
    
    All foci within one text file must be associated with the structure
    contained in the <surface> parameter and are projected to that surface.
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `FociCreateOutputs`).
    """
    foci_create_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(FOCI_CREATE_METADATA)
    params = execution.params(params)
    cargs = foci_create_cargs(params, execution)
    ret = foci_create_outputs(params, execution)
    execution.run(cargs)
    return ret


def foci_create(
    output: str,
    class_: list[FociCreateClassParamsDict] | None = None,
    runner: Runner | None = None,
) -> FociCreateOutputs:
    """
    CREATE A FOCI FILE.
    
    Creates a foci file from names, coordinates, and RGB values in a text file.
    The text file must have the following format (2 lines per focus):
    
    <focus-name>
    <red> <green> <blue> <x> <y> <z>
    ...
    
    Foci names are specified on a separate line from their coordinates and
    color, in order to let foci names contain spaces. Whitespace is trimmed from
    both ends of the foci name, but is kept if it is in the middle of a name.
    The values of <red>, <green>, <blue> and must be integers from 0 to 255, and
    will specify the color the foci is drawn as.
    
    Foci are grouped into classes and the name for the class is specified using
    the <class-name> parameter.
    
    All foci within one text file must be associated with the structure
    contained in the <surface> parameter and are projected to that surface.
    
    Args:
        output: the output foci file.
        class_: specify class input data.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `FociCreateOutputs`).
    """
    params = foci_create_params(
        output=output,
        class_=class_,
    )
    return foci_create_execute(params, runner)


__all__ = [
    "FOCI_CREATE_METADATA",
    "FociCreateClassParamsDict",
    "FociCreateClassParamsDictTagged",
    "FociCreateOutputs",
    "FociCreateParamsDict",
    "FociCreateParamsDictTagged",
    "foci_create",
    "foci_create_class",
    "foci_create_execute",
    "foci_create_params",
]
