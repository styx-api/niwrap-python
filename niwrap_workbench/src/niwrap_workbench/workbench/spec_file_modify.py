# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

SPEC_FILE_MODIFY_METADATA = Metadata(
    id="445d6412e50c348caabba3213e8b6d10e9cc1ae4.workbench",
    name="spec-file-modify",
    package="workbench",
)


SpecFileModifyAddParameters = typing.TypedDict('SpecFileModifyAddParameters', {
    "@type": typing.NotRequired[typing.Literal["add"]],
    "structure": str,
    "file": str,
})
SpecFileModifyAddParametersTagged = typing.TypedDict('SpecFileModifyAddParametersTagged', {
    "@type": typing.Literal["add"],
    "structure": str,
    "file": str,
})


SpecFileModifyRemoveParameters = typing.TypedDict('SpecFileModifyRemoveParameters', {
    "@type": typing.NotRequired[typing.Literal["remove"]],
    "filename": str,
    "recursive": bool,
    "suffix": bool,
})
SpecFileModifyRemoveParametersTagged = typing.TypedDict('SpecFileModifyRemoveParametersTagged', {
    "@type": typing.Literal["remove"],
    "filename": str,
    "recursive": bool,
    "suffix": bool,
})


SpecFileModifyParameters = typing.TypedDict('SpecFileModifyParameters', {
    "@type": typing.NotRequired[typing.Literal["workbench/spec-file-modify"]],
    "add": typing.NotRequired[list[SpecFileModifyAddParameters] | None],
    "remove": typing.NotRequired[list[SpecFileModifyRemoveParameters] | None],
    "spec-file": str,
})
SpecFileModifyParametersTagged = typing.TypedDict('SpecFileModifyParametersTagged', {
    "@type": typing.Literal["workbench/spec-file-modify"],
    "add": typing.NotRequired[list[SpecFileModifyAddParameters] | None],
    "remove": typing.NotRequired[list[SpecFileModifyRemoveParameters] | None],
    "spec-file": str,
})


def spec_file_modify_add_params(
    structure: str,
    file: str,
) -> SpecFileModifyAddParametersTagged:
    """
    Build parameters.
    
    Args:
        structure: the structure of the data file.
        file: the file to add.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "add",
        "structure": structure,
        "file": file,
    }
    return params


def spec_file_modify_add_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `SpecFileModifyAddParameters` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("structure", None) is None:
        raise StyxValidationError("`structure` must not be None")
    if not isinstance(params["structure"], str):
        raise StyxValidationError(f'`structure` has the wrong type: Received `{type(params.get("structure", None))}` expected `str`')
    if params.get("file", None) is None:
        raise StyxValidationError("`file` must not be None")
    if not isinstance(params["file"], str):
        raise StyxValidationError(f'`file` has the wrong type: Received `{type(params.get("file", None))}` expected `str`')


def spec_file_modify_add_cargs(
    params: SpecFileModifyAddParameters,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.extend([
        "-add",
        params.get("structure", None),
        params.get("file", None)
    ])
    return cargs


def spec_file_modify_remove_params(
    filename: str,
    recursive: bool = False,
    suffix: bool = False,
) -> SpecFileModifyRemoveParametersTagged:
    """
    Build parameters.
    
    Args:
        filename: the filename to remove.
        recursive: remove all files that match the string starting from any\
            folder.
        suffix: match any file that ends with the given string (if there are\
            multiple matches, error unless -recursive was also specified).
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "remove",
        "filename": filename,
        "recursive": recursive,
        "suffix": suffix,
    }
    return params


def spec_file_modify_remove_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `SpecFileModifyRemoveParameters` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("filename", None) is None:
        raise StyxValidationError("`filename` must not be None")
    if not isinstance(params["filename"], str):
        raise StyxValidationError(f'`filename` has the wrong type: Received `{type(params.get("filename", None))}` expected `str`')
    if params.get("recursive", False) is None:
        raise StyxValidationError("`recursive` must not be None")
    if not isinstance(params["recursive"], bool):
        raise StyxValidationError(f'`recursive` has the wrong type: Received `{type(params.get("recursive", False))}` expected `bool`')
    if params.get("suffix", False) is None:
        raise StyxValidationError("`suffix` must not be None")
    if not isinstance(params["suffix"], bool):
        raise StyxValidationError(f'`suffix` has the wrong type: Received `{type(params.get("suffix", False))}` expected `bool`')


def spec_file_modify_remove_cargs(
    params: SpecFileModifyRemoveParameters,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    if params.get("recursive", False) or params.get("suffix", False):
        cargs.extend([
            "-remove",
            params.get("filename", None),
            ("-recursive" if (params.get("recursive", False)) else ""),
            ("-suffix" if (params.get("suffix", False)) else "")
        ])
    return cargs


class SpecFileModifyOutputs(typing.NamedTuple):
    """
    Output object returned when calling `SpecFileModifyParameters(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""


def spec_file_modify_params(
    spec_file: str,
    add: list[SpecFileModifyAddParameters] | None = None,
    remove: list[SpecFileModifyRemoveParameters] | None = None,
) -> SpecFileModifyParametersTagged:
    """
    Build parameters.
    
    Args:
        spec_file: the spec file to modify.
        add: add a file to the spec.
        remove: remove a file from the spec file.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "workbench/spec-file-modify",
        "spec-file": spec_file,
    }
    if add is not None:
        params["add"] = add
    if remove is not None:
        params["remove"] = remove
    return params


def spec_file_modify_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `SpecFileModifyParameters` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("add", None) is not None:
        if not isinstance(params["add"], list):
            raise StyxValidationError(f'`add` has the wrong type: Received `{type(params.get("add", None))}` expected `list[SpecFileModifyAddParameters] | None`')
        for e in params["add"]:
            spec_file_modify_add_validate(e)
    if params.get("remove", None) is not None:
        if not isinstance(params["remove"], list):
            raise StyxValidationError(f'`remove` has the wrong type: Received `{type(params.get("remove", None))}` expected `list[SpecFileModifyRemoveParameters] | None`')
        for e in params["remove"]:
            spec_file_modify_remove_validate(e)
    if params.get("spec-file", None) is None:
        raise StyxValidationError("`spec-file` must not be None")
    if not isinstance(params["spec-file"], str):
        raise StyxValidationError(f'`spec-file` has the wrong type: Received `{type(params.get("spec-file", None))}` expected `str`')


def spec_file_modify_cargs(
    params: SpecFileModifyParameters,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    if params.get("add", None) is not None or params.get("remove", None) is not None:
        cargs.extend([
            "wb_command",
            "-spec-file-modify",
            *([a for c in [spec_file_modify_add_cargs(s, execution) for s in params.get("add", None)] for a in c] if (params.get("add", None) is not None) else []),
            *([a for c in [spec_file_modify_remove_cargs(s, execution) for s in params.get("remove", None)] for a in c] if (params.get("remove", None) is not None) else [])
        ])
    cargs.append(params.get("spec-file", None))
    return cargs


def spec_file_modify_outputs(
    params: SpecFileModifyParameters,
    execution: Execution,
) -> SpecFileModifyOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = SpecFileModifyOutputs(
        root=execution.output_file("."),
    )
    return ret


def spec_file_modify_execute(
    params: SpecFileModifyParameters,
    runner: Runner | None = None,
) -> SpecFileModifyOutputs:
    """
    ADD OR REMOVE FILES FROM SPEC FILE.
    
    The input spec file is overwritten with the new version. If the spec file
    does not exist, it is created with default metadata.
    
    Removals are done before additions, so that you can remove files with a
    pattern, and then add new files even if they match that removal pattern.
    
    The <structure> argument of -add must match one of the following strings
    (you can use INVALID for cifti or volume files):CORTEX_LEFT
    CORTEX_RIGHT
    CEREBELLUM
    ACCUMBENS_LEFT
    ACCUMBENS_RIGHT
    ALL_GREY_MATTER
    ALL_WHITE_MATTER
    AMYGDALA_LEFT
    AMYGDALA_RIGHT
    BRAIN_STEM
    CAUDATE_LEFT
    CAUDATE_RIGHT
    CEREBELLAR_WHITE_MATTER_LEFT
    CEREBELLAR_WHITE_MATTER_RIGHT
    CEREBELLUM_LEFT
    CEREBELLUM_RIGHT
    CEREBRAL_WHITE_MATTER_LEFT
    CEREBRAL_WHITE_MATTER_RIGHT
    CORTEX
    DIENCEPHALON_VENTRAL_LEFT
    DIENCEPHALON_VENTRAL_RIGHT
    HIPPOCAMPUS_LEFT
    HIPPOCAMPUS_RIGHT
    HIPPOCAMPUS_DENTATE_LEFT
    HIPPOCAMPUS_DENTATE_RIGHT
    INVALID
    OTHER
    OTHER_GREY_MATTER
    OTHER_WHITE_MATTER
    PALLIDUM_LEFT
    PALLIDUM_RIGHT
    PUTAMEN_LEFT
    PUTAMEN_RIGHT
    THALAMUS_LEFT
    THALAMUS_RIGHT
    .
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `SpecFileModifyOutputs`).
    """
    spec_file_modify_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(SPEC_FILE_MODIFY_METADATA)
    params = execution.params(params)
    cargs = spec_file_modify_cargs(params, execution)
    ret = spec_file_modify_outputs(params, execution)
    execution.run(cargs)
    return ret


def spec_file_modify(
    spec_file: str,
    add: list[SpecFileModifyAddParameters] | None = None,
    remove: list[SpecFileModifyRemoveParameters] | None = None,
    runner: Runner | None = None,
) -> SpecFileModifyOutputs:
    """
    ADD OR REMOVE FILES FROM SPEC FILE.
    
    The input spec file is overwritten with the new version. If the spec file
    does not exist, it is created with default metadata.
    
    Removals are done before additions, so that you can remove files with a
    pattern, and then add new files even if they match that removal pattern.
    
    The <structure> argument of -add must match one of the following strings
    (you can use INVALID for cifti or volume files):CORTEX_LEFT
    CORTEX_RIGHT
    CEREBELLUM
    ACCUMBENS_LEFT
    ACCUMBENS_RIGHT
    ALL_GREY_MATTER
    ALL_WHITE_MATTER
    AMYGDALA_LEFT
    AMYGDALA_RIGHT
    BRAIN_STEM
    CAUDATE_LEFT
    CAUDATE_RIGHT
    CEREBELLAR_WHITE_MATTER_LEFT
    CEREBELLAR_WHITE_MATTER_RIGHT
    CEREBELLUM_LEFT
    CEREBELLUM_RIGHT
    CEREBRAL_WHITE_MATTER_LEFT
    CEREBRAL_WHITE_MATTER_RIGHT
    CORTEX
    DIENCEPHALON_VENTRAL_LEFT
    DIENCEPHALON_VENTRAL_RIGHT
    HIPPOCAMPUS_LEFT
    HIPPOCAMPUS_RIGHT
    HIPPOCAMPUS_DENTATE_LEFT
    HIPPOCAMPUS_DENTATE_RIGHT
    INVALID
    OTHER
    OTHER_GREY_MATTER
    OTHER_WHITE_MATTER
    PALLIDUM_LEFT
    PALLIDUM_RIGHT
    PUTAMEN_LEFT
    PUTAMEN_RIGHT
    THALAMUS_LEFT
    THALAMUS_RIGHT
    .
    
    Args:
        spec_file: the spec file to modify.
        add: add a file to the spec.
        remove: remove a file from the spec file.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `SpecFileModifyOutputs`).
    """
    params = spec_file_modify_params(
        add=add,
        remove=remove,
        spec_file=spec_file,
    )
    return spec_file_modify_execute(params, runner)


__all__ = [
    "SPEC_FILE_MODIFY_METADATA",
    "SpecFileModifyOutputs",
    "spec_file_modify",
    "spec_file_modify_add_params",
    "spec_file_modify_execute",
    "spec_file_modify_params",
    "spec_file_modify_remove_params",
]
