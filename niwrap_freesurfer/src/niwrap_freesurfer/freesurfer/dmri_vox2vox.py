# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

DMRI_VOX2VOX_METADATA = Metadata(
    id="e98d1aa0dd9e6a6212d4ed9294022ac34a2aae3a.boutiques",
    name="dmri_vox2vox",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_DmriVox2voxParamsDictNoTag = typing.TypedDict('_DmriVox2voxParamsDictNoTag', {
    "input_files": list[InputPathType],
    "input_directory": typing.NotRequired[str | None],
    "output_files": list[str],
    "output_directory": typing.NotRequired[str | None],
    "input_reference": InputPathType,
    "output_reference": InputPathType,
    "affine_registration": InputPathType,
    "nonlinear_registration": InputPathType,
    "inverse_nonlinear": bool,
    "debug": bool,
    "check_options": bool,
    "help": bool,
    "version": bool,
})
DmriVox2voxParamsDictTagged = typing.TypedDict('DmriVox2voxParamsDictTagged', {
    "@type": typing.Literal["freesurfer/dmri_vox2vox"],
    "input_files": list[InputPathType],
    "input_directory": typing.NotRequired[str | None],
    "output_files": list[str],
    "output_directory": typing.NotRequired[str | None],
    "input_reference": InputPathType,
    "output_reference": InputPathType,
    "affine_registration": InputPathType,
    "nonlinear_registration": InputPathType,
    "inverse_nonlinear": bool,
    "debug": bool,
    "check_options": bool,
    "help": bool,
    "version": bool,
})
DmriVox2voxParamsDict = _DmriVox2voxParamsDictNoTag | DmriVox2voxParamsDictTagged


class DmriVox2voxOutputs(typing.NamedTuple):
    """
    Output object returned when calling `DmriVox2voxParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""


def dmri_vox2vox_params(
    input_files: list[InputPathType],
    output_files: list[str],
    input_reference: InputPathType,
    output_reference: InputPathType,
    affine_registration: InputPathType,
    nonlinear_registration: InputPathType,
    input_directory: str | None = None,
    output_directory: str | None = None,
    inverse_nonlinear: bool = False,
    debug: bool = False,
    check_options: bool = False,
    help_: bool = False,
    version: bool = False,
) -> DmriVox2voxParamsDictTagged:
    """
    Build parameters.
    
    Args:
        input_files: Input text file(s).
        output_files: Output text file(s), as many as inputs.
        input_reference: Input reference volume.
        output_reference: Output reference volume.
        affine_registration: Affine registration file (.mat) to be applied\
            first.
        nonlinear_registration: Nonlinear registration file (.m3z) to be\
            applied second.
        input_directory: Input directory, if specified, names of input text\
            files are relative to this.
        output_directory: Output directory, if specified, names of output text\
            files are relative to this.
        inverse_nonlinear: Apply inverse of nonlinear warp when --regnl is used.
        debug: Turn on debugging.
        check_options: Check options and exit without running.
        help_: Print out information on how to use this program.
        version: Print out version and exit.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/dmri_vox2vox",
        "input_files": input_files,
        "output_files": output_files,
        "input_reference": input_reference,
        "output_reference": output_reference,
        "affine_registration": affine_registration,
        "nonlinear_registration": nonlinear_registration,
        "inverse_nonlinear": inverse_nonlinear,
        "debug": debug,
        "check_options": check_options,
        "help": help_,
        "version": version,
    }
    if input_directory is not None:
        params["input_directory"] = input_directory
    if output_directory is not None:
        params["output_directory"] = output_directory
    return params


def dmri_vox2vox_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `DmriVox2voxParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("input_files", None) is None:
        raise StyxValidationError("`input_files` must not be None")
    if not isinstance(params["input_files"], list):
        raise StyxValidationError(f'`input_files` has the wrong type: Received `{type(params.get("input_files", None))}` expected `list[InputPathType]`')
    for e in params["input_files"]:
        if not isinstance(e, (pathlib.Path, str)):
            raise StyxValidationError(f'`input_files` has the wrong type: Received `{type(params.get("input_files", None))}` expected `list[InputPathType]`')
    if params.get("input_directory", None) is not None:
        if not isinstance(params["input_directory"], str):
            raise StyxValidationError(f'`input_directory` has the wrong type: Received `{type(params.get("input_directory", None))}` expected `str | None`')
    if params.get("output_files", None) is None:
        raise StyxValidationError("`output_files` must not be None")
    if not isinstance(params["output_files"], list):
        raise StyxValidationError(f'`output_files` has the wrong type: Received `{type(params.get("output_files", None))}` expected `list[str]`')
    for e in params["output_files"]:
        if not isinstance(e, str):
            raise StyxValidationError(f'`output_files` has the wrong type: Received `{type(params.get("output_files", None))}` expected `list[str]`')
    if params.get("output_directory", None) is not None:
        if not isinstance(params["output_directory"], str):
            raise StyxValidationError(f'`output_directory` has the wrong type: Received `{type(params.get("output_directory", None))}` expected `str | None`')
    if params.get("input_reference", None) is None:
        raise StyxValidationError("`input_reference` must not be None")
    if not isinstance(params["input_reference"], (pathlib.Path, str)):
        raise StyxValidationError(f'`input_reference` has the wrong type: Received `{type(params.get("input_reference", None))}` expected `InputPathType`')
    if params.get("output_reference", None) is None:
        raise StyxValidationError("`output_reference` must not be None")
    if not isinstance(params["output_reference"], (pathlib.Path, str)):
        raise StyxValidationError(f'`output_reference` has the wrong type: Received `{type(params.get("output_reference", None))}` expected `InputPathType`')
    if params.get("affine_registration", None) is None:
        raise StyxValidationError("`affine_registration` must not be None")
    if not isinstance(params["affine_registration"], (pathlib.Path, str)):
        raise StyxValidationError(f'`affine_registration` has the wrong type: Received `{type(params.get("affine_registration", None))}` expected `InputPathType`')
    if params.get("nonlinear_registration", None) is None:
        raise StyxValidationError("`nonlinear_registration` must not be None")
    if not isinstance(params["nonlinear_registration"], (pathlib.Path, str)):
        raise StyxValidationError(f'`nonlinear_registration` has the wrong type: Received `{type(params.get("nonlinear_registration", None))}` expected `InputPathType`')
    if params.get("inverse_nonlinear", False) is None:
        raise StyxValidationError("`inverse_nonlinear` must not be None")
    if not isinstance(params["inverse_nonlinear"], bool):
        raise StyxValidationError(f'`inverse_nonlinear` has the wrong type: Received `{type(params.get("inverse_nonlinear", False))}` expected `bool`')
    if params.get("debug", False) is None:
        raise StyxValidationError("`debug` must not be None")
    if not isinstance(params["debug"], bool):
        raise StyxValidationError(f'`debug` has the wrong type: Received `{type(params.get("debug", False))}` expected `bool`')
    if params.get("check_options", False) is None:
        raise StyxValidationError("`check_options` must not be None")
    if not isinstance(params["check_options"], bool):
        raise StyxValidationError(f'`check_options` has the wrong type: Received `{type(params.get("check_options", False))}` expected `bool`')
    if params.get("help", False) is None:
        raise StyxValidationError("`help` must not be None")
    if not isinstance(params["help"], bool):
        raise StyxValidationError(f'`help` has the wrong type: Received `{type(params.get("help", False))}` expected `bool`')
    if params.get("version", False) is None:
        raise StyxValidationError("`version` must not be None")
    if not isinstance(params["version"], bool):
        raise StyxValidationError(f'`version` has the wrong type: Received `{type(params.get("version", False))}` expected `bool`')


def dmri_vox2vox_cargs(
    params: DmriVox2voxParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("dmri_vox2vox")
    cargs.extend([
        "--in",
        *[execution.input_file(f) for f in params.get("input_files", None)]
    ])
    if params.get("input_directory", None) is not None:
        cargs.extend([
            "--indir",
            params.get("input_directory", None)
        ])
    cargs.extend([
        "--out",
        *params.get("output_files", None)
    ])
    if params.get("output_directory", None) is not None:
        cargs.extend([
            "--outdir",
            params.get("output_directory", None)
        ])
    cargs.extend([
        "--inref",
        execution.input_file(params.get("input_reference", None))
    ])
    cargs.extend([
        "--outref",
        execution.input_file(params.get("output_reference", None))
    ])
    cargs.extend([
        "--reg",
        execution.input_file(params.get("affine_registration", None))
    ])
    cargs.extend([
        "--regnl",
        execution.input_file(params.get("nonlinear_registration", None))
    ])
    if params.get("inverse_nonlinear", False):
        cargs.append("--invnl")
    if params.get("debug", False):
        cargs.append("--debug")
    if params.get("check_options", False):
        cargs.append("--checkopts")
    if params.get("help", False):
        cargs.append("--help")
    if params.get("version", False):
        cargs.append("--version")
    return cargs


def dmri_vox2vox_outputs(
    params: DmriVox2voxParamsDict,
    execution: Execution,
) -> DmriVox2voxOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = DmriVox2voxOutputs(
        root=execution.output_file("."),
    )
    return ret


def dmri_vox2vox_execute(
    params: DmriVox2voxParamsDict,
    runner: Runner | None = None,
) -> DmriVox2voxOutputs:
    """
    dmri_vox2vox
    
    Tool for voxel-to-voxel transformations in diffusion MRI data processing.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `DmriVox2voxOutputs`).
    """
    dmri_vox2vox_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(DMRI_VOX2VOX_METADATA)
    params = execution.params(params)
    cargs = dmri_vox2vox_cargs(params, execution)
    ret = dmri_vox2vox_outputs(params, execution)
    execution.run(cargs)
    return ret


def dmri_vox2vox(
    input_files: list[InputPathType],
    output_files: list[str],
    input_reference: InputPathType,
    output_reference: InputPathType,
    affine_registration: InputPathType,
    nonlinear_registration: InputPathType,
    input_directory: str | None = None,
    output_directory: str | None = None,
    inverse_nonlinear: bool = False,
    debug: bool = False,
    check_options: bool = False,
    help_: bool = False,
    version: bool = False,
    runner: Runner | None = None,
) -> DmriVox2voxOutputs:
    """
    dmri_vox2vox
    
    Tool for voxel-to-voxel transformations in diffusion MRI data processing.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        input_files: Input text file(s).
        output_files: Output text file(s), as many as inputs.
        input_reference: Input reference volume.
        output_reference: Output reference volume.
        affine_registration: Affine registration file (.mat) to be applied\
            first.
        nonlinear_registration: Nonlinear registration file (.m3z) to be\
            applied second.
        input_directory: Input directory, if specified, names of input text\
            files are relative to this.
        output_directory: Output directory, if specified, names of output text\
            files are relative to this.
        inverse_nonlinear: Apply inverse of nonlinear warp when --regnl is used.
        debug: Turn on debugging.
        check_options: Check options and exit without running.
        help_: Print out information on how to use this program.
        version: Print out version and exit.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `DmriVox2voxOutputs`).
    """
    params = dmri_vox2vox_params(
        input_files=input_files,
        input_directory=input_directory,
        output_files=output_files,
        output_directory=output_directory,
        input_reference=input_reference,
        output_reference=output_reference,
        affine_registration=affine_registration,
        nonlinear_registration=nonlinear_registration,
        inverse_nonlinear=inverse_nonlinear,
        debug=debug,
        check_options=check_options,
        help_=help_,
        version=version,
    )
    return dmri_vox2vox_execute(params, runner)


__all__ = [
    "DMRI_VOX2VOX_METADATA",
    "DmriVox2voxOutputs",
    "DmriVox2voxParamsDict",
    "DmriVox2voxParamsDictTagged",
    "dmri_vox2vox",
    "dmri_vox2vox_execute",
    "dmri_vox2vox_params",
]
