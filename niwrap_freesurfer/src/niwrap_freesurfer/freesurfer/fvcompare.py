# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

FVCOMPARE_METADATA = Metadata(
    id="2e45e84a88f675a13ba473420447ab26c018ea25.boutiques",
    name="fvcompare",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_FvcompareParamsDictNoTag = typing.TypedDict('_FvcompareParamsDictNoTag', {
    "subject1": str,
    "subject2": str,
    "subject_dir1": typing.NotRequired[str | None],
    "subject_dir2": typing.NotRequired[str | None],
    "name1": typing.NotRequired[str | None],
    "name2": typing.NotRequired[str | None],
    "color1": typing.NotRequired[str | None],
    "volume": typing.NotRequired[str | None],
    "segmentation": typing.NotRequired[str | None],
    "aseg": bool,
    "no_seg": bool,
    "left_hemi": bool,
    "right_hemi": bool,
    "no_surf": bool,
    "gray_levels": typing.NotRequired[list[float] | None],
    "cursor_position": typing.NotRequired[list[float] | None],
    "zoom_level": typing.NotRequired[float | None],
    "annotation": typing.NotRequired[str | None],
    "aparc": bool,
    "inflated": bool,
    "white": bool,
    "orig": bool,
    "surf_name": typing.NotRequired[str | None],
    "pointset": typing.NotRequired[InputPathType | None],
    "wot2": bool,
})
FvcompareParamsDictTagged = typing.TypedDict('FvcompareParamsDictTagged', {
    "@type": typing.Literal["freesurfer/fvcompare"],
    "subject1": str,
    "subject2": str,
    "subject_dir1": typing.NotRequired[str | None],
    "subject_dir2": typing.NotRequired[str | None],
    "name1": typing.NotRequired[str | None],
    "name2": typing.NotRequired[str | None],
    "color1": typing.NotRequired[str | None],
    "volume": typing.NotRequired[str | None],
    "segmentation": typing.NotRequired[str | None],
    "aseg": bool,
    "no_seg": bool,
    "left_hemi": bool,
    "right_hemi": bool,
    "no_surf": bool,
    "gray_levels": typing.NotRequired[list[float] | None],
    "cursor_position": typing.NotRequired[list[float] | None],
    "zoom_level": typing.NotRequired[float | None],
    "annotation": typing.NotRequired[str | None],
    "aparc": bool,
    "inflated": bool,
    "white": bool,
    "orig": bool,
    "surf_name": typing.NotRequired[str | None],
    "pointset": typing.NotRequired[InputPathType | None],
    "wot2": bool,
})
FvcompareParamsDict = _FvcompareParamsDictNoTag | FvcompareParamsDictTagged


class FvcompareOutputs(typing.NamedTuple):
    """
    Output object returned when calling `FvcompareParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""


def fvcompare_params(
    subject1: str,
    subject2: str,
    subject_dir1: str | None = None,
    subject_dir2: str | None = None,
    name1: str | None = None,
    name2: str | None = None,
    color1: str | None = None,
    volume: str | None = None,
    segmentation: str | None = None,
    aseg: bool = False,
    no_seg: bool = False,
    left_hemi: bool = False,
    right_hemi: bool = False,
    no_surf: bool = False,
    gray_levels: list[float] | None = None,
    cursor_position: list[float] | None = None,
    zoom_level: float | None = None,
    annotation: str | None = None,
    aparc: bool = False,
    inflated: bool = False,
    white: bool = False,
    orig: bool = False,
    surf_name: str | None = None,
    pointset: InputPathType | None = None,
    wot2: bool = False,
) -> FvcompareParamsDictTagged:
    """
    Build parameters.
    
    Args:
        subject1: Subject 1 identifier.
        subject2: Subject 2 identifier.
        subject_dir1: Directory path for Subject 1.
        subject_dir2: Directory path for Subject 2.
        name1: Name associated with Subject 1 (default: s1).
        name2: Name associated with Subject 2 (default: s2).
        color1: Set surface colors for Subject 1.
        volume: Volume name found in subject/mri (default: brainmask.mgz, can\
            have multiple).
        segmentation: Segmentation name found in subject/mri (default:\
            aparc+aseg.mgz, can have multiple).
        aseg: Add aseg.mgz to segmentation list.
        no_seg: Do not display segmentations.
        left_hemi: Only display left hemisphere.
        right_hemi: Only display right hemisphere.
        no_surf: Do not display surfaces.
        gray_levels: Set gray scale levels.
        cursor_position: Place cursor at given location and center Field of\
            View.
        zoom_level: Set zoom level.
        annotation: Load annotation onto surfaces.
        aparc: Load aparc.annot onto surfaces.
        inflated: Load inflated surfaces in addition to white and pial.
        white: Only show white surfaces.
        orig: Only show orig.nofix and orig surfaces.
        surf_name: Only show specified surface name.
        pointset: Load point set file.
        wot2: Include the ?h.woT2.pial surfs.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/fvcompare",
        "subject1": subject1,
        "subject2": subject2,
        "aseg": aseg,
        "no_seg": no_seg,
        "left_hemi": left_hemi,
        "right_hemi": right_hemi,
        "no_surf": no_surf,
        "aparc": aparc,
        "inflated": inflated,
        "white": white,
        "orig": orig,
        "wot2": wot2,
    }
    if subject_dir1 is not None:
        params["subject_dir1"] = subject_dir1
    if subject_dir2 is not None:
        params["subject_dir2"] = subject_dir2
    if name1 is not None:
        params["name1"] = name1
    if name2 is not None:
        params["name2"] = name2
    if color1 is not None:
        params["color1"] = color1
    if volume is not None:
        params["volume"] = volume
    if segmentation is not None:
        params["segmentation"] = segmentation
    if gray_levels is not None:
        params["gray_levels"] = gray_levels
    if cursor_position is not None:
        params["cursor_position"] = cursor_position
    if zoom_level is not None:
        params["zoom_level"] = zoom_level
    if annotation is not None:
        params["annotation"] = annotation
    if surf_name is not None:
        params["surf_name"] = surf_name
    if pointset is not None:
        params["pointset"] = pointset
    return params


def fvcompare_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `FvcompareParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("subject1", None) is None:
        raise StyxValidationError("`subject1` must not be None")
    if not isinstance(params["subject1"], str):
        raise StyxValidationError(f'`subject1` has the wrong type: Received `{type(params.get("subject1", None))}` expected `str`')
    if params.get("subject2", None) is None:
        raise StyxValidationError("`subject2` must not be None")
    if not isinstance(params["subject2"], str):
        raise StyxValidationError(f'`subject2` has the wrong type: Received `{type(params.get("subject2", None))}` expected `str`')
    if params.get("subject_dir1", None) is not None:
        if not isinstance(params["subject_dir1"], str):
            raise StyxValidationError(f'`subject_dir1` has the wrong type: Received `{type(params.get("subject_dir1", None))}` expected `str | None`')
    if params.get("subject_dir2", None) is not None:
        if not isinstance(params["subject_dir2"], str):
            raise StyxValidationError(f'`subject_dir2` has the wrong type: Received `{type(params.get("subject_dir2", None))}` expected `str | None`')
    if params.get("name1", None) is not None:
        if not isinstance(params["name1"], str):
            raise StyxValidationError(f'`name1` has the wrong type: Received `{type(params.get("name1", None))}` expected `str | None`')
    if params.get("name2", None) is not None:
        if not isinstance(params["name2"], str):
            raise StyxValidationError(f'`name2` has the wrong type: Received `{type(params.get("name2", None))}` expected `str | None`')
    if params.get("color1", None) is not None:
        if not isinstance(params["color1"], str):
            raise StyxValidationError(f'`color1` has the wrong type: Received `{type(params.get("color1", None))}` expected `str | None`')
    if params.get("volume", None) is not None:
        if not isinstance(params["volume"], str):
            raise StyxValidationError(f'`volume` has the wrong type: Received `{type(params.get("volume", None))}` expected `str | None`')
    if params.get("segmentation", None) is not None:
        if not isinstance(params["segmentation"], str):
            raise StyxValidationError(f'`segmentation` has the wrong type: Received `{type(params.get("segmentation", None))}` expected `str | None`')
    if params.get("aseg", False) is None:
        raise StyxValidationError("`aseg` must not be None")
    if not isinstance(params["aseg"], bool):
        raise StyxValidationError(f'`aseg` has the wrong type: Received `{type(params.get("aseg", False))}` expected `bool`')
    if params.get("no_seg", False) is None:
        raise StyxValidationError("`no_seg` must not be None")
    if not isinstance(params["no_seg"], bool):
        raise StyxValidationError(f'`no_seg` has the wrong type: Received `{type(params.get("no_seg", False))}` expected `bool`')
    if params.get("left_hemi", False) is None:
        raise StyxValidationError("`left_hemi` must not be None")
    if not isinstance(params["left_hemi"], bool):
        raise StyxValidationError(f'`left_hemi` has the wrong type: Received `{type(params.get("left_hemi", False))}` expected `bool`')
    if params.get("right_hemi", False) is None:
        raise StyxValidationError("`right_hemi` must not be None")
    if not isinstance(params["right_hemi"], bool):
        raise StyxValidationError(f'`right_hemi` has the wrong type: Received `{type(params.get("right_hemi", False))}` expected `bool`')
    if params.get("no_surf", False) is None:
        raise StyxValidationError("`no_surf` must not be None")
    if not isinstance(params["no_surf"], bool):
        raise StyxValidationError(f'`no_surf` has the wrong type: Received `{type(params.get("no_surf", False))}` expected `bool`')
    if params.get("gray_levels", None) is not None:
        if not isinstance(params["gray_levels"], list):
            raise StyxValidationError(f'`gray_levels` has the wrong type: Received `{type(params.get("gray_levels", None))}` expected `list[float] | None`')
        if len(params["gray_levels"]) != 2:
            raise StyxValidationError("Parameter `gray_levels` must contain exactly 2 elements")
        for e in params["gray_levels"]:
            if not isinstance(e, (float, int)):
                raise StyxValidationError(f'`gray_levels` has the wrong type: Received `{type(params.get("gray_levels", None))}` expected `list[float] | None`')
    if params.get("cursor_position", None) is not None:
        if not isinstance(params["cursor_position"], list):
            raise StyxValidationError(f'`cursor_position` has the wrong type: Received `{type(params.get("cursor_position", None))}` expected `list[float] | None`')
        if len(params["cursor_position"]) != 3:
            raise StyxValidationError("Parameter `cursor_position` must contain exactly 3 elements")
        for e in params["cursor_position"]:
            if not isinstance(e, (float, int)):
                raise StyxValidationError(f'`cursor_position` has the wrong type: Received `{type(params.get("cursor_position", None))}` expected `list[float] | None`')
    if params.get("zoom_level", None) is not None:
        if not isinstance(params["zoom_level"], (float, int)):
            raise StyxValidationError(f'`zoom_level` has the wrong type: Received `{type(params.get("zoom_level", None))}` expected `float | None`')
    if params.get("annotation", None) is not None:
        if not isinstance(params["annotation"], str):
            raise StyxValidationError(f'`annotation` has the wrong type: Received `{type(params.get("annotation", None))}` expected `str | None`')
    if params.get("aparc", False) is None:
        raise StyxValidationError("`aparc` must not be None")
    if not isinstance(params["aparc"], bool):
        raise StyxValidationError(f'`aparc` has the wrong type: Received `{type(params.get("aparc", False))}` expected `bool`')
    if params.get("inflated", False) is None:
        raise StyxValidationError("`inflated` must not be None")
    if not isinstance(params["inflated"], bool):
        raise StyxValidationError(f'`inflated` has the wrong type: Received `{type(params.get("inflated", False))}` expected `bool`')
    if params.get("white", False) is None:
        raise StyxValidationError("`white` must not be None")
    if not isinstance(params["white"], bool):
        raise StyxValidationError(f'`white` has the wrong type: Received `{type(params.get("white", False))}` expected `bool`')
    if params.get("orig", False) is None:
        raise StyxValidationError("`orig` must not be None")
    if not isinstance(params["orig"], bool):
        raise StyxValidationError(f'`orig` has the wrong type: Received `{type(params.get("orig", False))}` expected `bool`')
    if params.get("surf_name", None) is not None:
        if not isinstance(params["surf_name"], str):
            raise StyxValidationError(f'`surf_name` has the wrong type: Received `{type(params.get("surf_name", None))}` expected `str | None`')
    if params.get("pointset", None) is not None:
        if not isinstance(params["pointset"], (pathlib.Path, str)):
            raise StyxValidationError(f'`pointset` has the wrong type: Received `{type(params.get("pointset", None))}` expected `InputPathType | None`')
    if params.get("wot2", False) is None:
        raise StyxValidationError("`wot2` must not be None")
    if not isinstance(params["wot2"], bool):
        raise StyxValidationError(f'`wot2` has the wrong type: Received `{type(params.get("wot2", False))}` expected `bool`')


def fvcompare_cargs(
    params: FvcompareParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("fvcompare")
    cargs.extend([
        "--s1",
        params.get("subject1", None)
    ])
    cargs.extend([
        "--s2",
        params.get("subject2", None)
    ])
    if params.get("subject_dir1", None) is not None:
        cargs.extend([
            "--sd1",
            params.get("subject_dir1", None)
        ])
    if params.get("subject_dir2", None) is not None:
        cargs.extend([
            "--sd2",
            params.get("subject_dir2", None)
        ])
    if params.get("name1", None) is not None:
        cargs.extend([
            "--n1",
            params.get("name1", None)
        ])
    if params.get("name2", None) is not None:
        cargs.extend([
            "--n2",
            params.get("name2", None)
        ])
    if params.get("color1", None) is not None:
        cargs.extend([
            "--c1",
            params.get("color1", None)
        ])
    if params.get("volume", None) is not None:
        cargs.extend([
            "--vol",
            params.get("volume", None)
        ])
    if params.get("segmentation", None) is not None:
        cargs.extend([
            "--seg",
            params.get("segmentation", None)
        ])
    if params.get("aseg", False):
        cargs.append("--aseg")
    if params.get("no_seg", False):
        cargs.append("--no-seg")
    if params.get("left_hemi", False):
        cargs.append("--lh")
    if params.get("right_hemi", False):
        cargs.append("--rh")
    if params.get("no_surf", False):
        cargs.append("--no-surf")
    if params.get("gray_levels", None) is not None:
        cargs.extend([
            "--gray",
            *map(str, params.get("gray_levels", None))
        ])
    if params.get("cursor_position", None) is not None:
        cargs.extend([
            "--crs",
            *map(str, params.get("cursor_position", None))
        ])
    if params.get("zoom_level", None) is not None:
        cargs.extend([
            "--zoom",
            str(params.get("zoom_level", None))
        ])
    if params.get("annotation", None) is not None:
        cargs.extend([
            "--annot",
            params.get("annotation", None)
        ])
    if params.get("aparc", False):
        cargs.append("--aparc")
    if params.get("inflated", False):
        cargs.append("--inflated")
    if params.get("white", False):
        cargs.append("--white")
    if params.get("orig", False):
        cargs.append("--orig")
    if params.get("surf_name", None) is not None:
        cargs.extend([
            "--surf",
            params.get("surf_name", None)
        ])
    if params.get("pointset", None) is not None:
        cargs.extend([
            "--p",
            execution.input_file(params.get("pointset", None))
        ])
    if params.get("wot2", False):
        cargs.append("--wot2")
    return cargs


def fvcompare_outputs(
    params: FvcompareParamsDict,
    execution: Execution,
) -> FvcompareOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = FvcompareOutputs(
        root=execution.output_file("."),
    )
    return ret


def fvcompare_execute(
    params: FvcompareParamsDict,
    runner: Runner | None = None,
) -> FvcompareOutputs:
    """
    fvcompare
    
    Simultaneously loads volume, segmentation, and surface data from two
    subjects in freeview, for comparing across time or different analysis
    methods.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `FvcompareOutputs`).
    """
    fvcompare_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(FVCOMPARE_METADATA)
    params = execution.params(params)
    cargs = fvcompare_cargs(params, execution)
    ret = fvcompare_outputs(params, execution)
    execution.run(cargs)
    return ret


def fvcompare(
    subject1: str,
    subject2: str,
    subject_dir1: str | None = None,
    subject_dir2: str | None = None,
    name1: str | None = None,
    name2: str | None = None,
    color1: str | None = None,
    volume: str | None = None,
    segmentation: str | None = None,
    aseg: bool = False,
    no_seg: bool = False,
    left_hemi: bool = False,
    right_hemi: bool = False,
    no_surf: bool = False,
    gray_levels: list[float] | None = None,
    cursor_position: list[float] | None = None,
    zoom_level: float | None = None,
    annotation: str | None = None,
    aparc: bool = False,
    inflated: bool = False,
    white: bool = False,
    orig: bool = False,
    surf_name: str | None = None,
    pointset: InputPathType | None = None,
    wot2: bool = False,
    runner: Runner | None = None,
) -> FvcompareOutputs:
    """
    fvcompare
    
    Simultaneously loads volume, segmentation, and surface data from two
    subjects in freeview, for comparing across time or different analysis
    methods.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        subject1: Subject 1 identifier.
        subject2: Subject 2 identifier.
        subject_dir1: Directory path for Subject 1.
        subject_dir2: Directory path for Subject 2.
        name1: Name associated with Subject 1 (default: s1).
        name2: Name associated with Subject 2 (default: s2).
        color1: Set surface colors for Subject 1.
        volume: Volume name found in subject/mri (default: brainmask.mgz, can\
            have multiple).
        segmentation: Segmentation name found in subject/mri (default:\
            aparc+aseg.mgz, can have multiple).
        aseg: Add aseg.mgz to segmentation list.
        no_seg: Do not display segmentations.
        left_hemi: Only display left hemisphere.
        right_hemi: Only display right hemisphere.
        no_surf: Do not display surfaces.
        gray_levels: Set gray scale levels.
        cursor_position: Place cursor at given location and center Field of\
            View.
        zoom_level: Set zoom level.
        annotation: Load annotation onto surfaces.
        aparc: Load aparc.annot onto surfaces.
        inflated: Load inflated surfaces in addition to white and pial.
        white: Only show white surfaces.
        orig: Only show orig.nofix and orig surfaces.
        surf_name: Only show specified surface name.
        pointset: Load point set file.
        wot2: Include the ?h.woT2.pial surfs.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `FvcompareOutputs`).
    """
    params = fvcompare_params(
        subject1=subject1,
        subject2=subject2,
        subject_dir1=subject_dir1,
        subject_dir2=subject_dir2,
        name1=name1,
        name2=name2,
        color1=color1,
        volume=volume,
        segmentation=segmentation,
        aseg=aseg,
        no_seg=no_seg,
        left_hemi=left_hemi,
        right_hemi=right_hemi,
        no_surf=no_surf,
        gray_levels=gray_levels,
        cursor_position=cursor_position,
        zoom_level=zoom_level,
        annotation=annotation,
        aparc=aparc,
        inflated=inflated,
        white=white,
        orig=orig,
        surf_name=surf_name,
        pointset=pointset,
        wot2=wot2,
    )
    return fvcompare_execute(params, runner)


__all__ = [
    "FVCOMPARE_METADATA",
    "FvcompareOutputs",
    "FvcompareParamsDict",
    "FvcompareParamsDictTagged",
    "fvcompare",
    "fvcompare_execute",
    "fvcompare_params",
]
