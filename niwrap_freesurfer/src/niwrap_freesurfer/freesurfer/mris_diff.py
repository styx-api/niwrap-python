# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

MRIS_DIFF_METADATA = Metadata(
    id="ea56ba0cce9d9257f1266cde92de0744bd3d23a5.boutiques",
    name="mris_diff",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_MrisDiffParamsDictNoTag = typing.TypedDict('_MrisDiffParamsDictNoTag', {
    "surface1": InputPathType,
    "surface2": InputPathType,
    "subject1": str,
    "subject2": str,
    "subj_dir1": typing.NotRequired[str | None],
    "subj_dir2": typing.NotRequired[str | None],
    "hemisphere": str,
    "surf": typing.NotRequired[str | None],
    "curv": typing.NotRequired[str | None],
    "aparc": typing.NotRequired[str | None],
    "aparc2": typing.NotRequired[str | None],
    "simple": bool,
    "simple_patch": bool,
    "thresh": typing.NotRequired[float | None],
    "maxerrs": typing.NotRequired[float | None],
    "renumbered": bool,
    "worst_bucket": typing.NotRequired[str | None],
    "grid": typing.NotRequired[str | None],
    "no_check_xyz": bool,
    "no_check_nxyz": bool,
    "xyz_rms": typing.NotRequired[str | None],
    "angle_rms": typing.NotRequired[str | None],
    "seed": typing.NotRequired[float | None],
    "min_dist": typing.NotRequired[str | None],
    "debug": bool,
    "gdiag_no": typing.NotRequired[float | None],
    "check_opts": bool,
    "help": bool,
    "version": bool,
})
MrisDiffParamsDictTagged = typing.TypedDict('MrisDiffParamsDictTagged', {
    "@type": typing.Literal["freesurfer/mris_diff"],
    "surface1": InputPathType,
    "surface2": InputPathType,
    "subject1": str,
    "subject2": str,
    "subj_dir1": typing.NotRequired[str | None],
    "subj_dir2": typing.NotRequired[str | None],
    "hemisphere": str,
    "surf": typing.NotRequired[str | None],
    "curv": typing.NotRequired[str | None],
    "aparc": typing.NotRequired[str | None],
    "aparc2": typing.NotRequired[str | None],
    "simple": bool,
    "simple_patch": bool,
    "thresh": typing.NotRequired[float | None],
    "maxerrs": typing.NotRequired[float | None],
    "renumbered": bool,
    "worst_bucket": typing.NotRequired[str | None],
    "grid": typing.NotRequired[str | None],
    "no_check_xyz": bool,
    "no_check_nxyz": bool,
    "xyz_rms": typing.NotRequired[str | None],
    "angle_rms": typing.NotRequired[str | None],
    "seed": typing.NotRequired[float | None],
    "min_dist": typing.NotRequired[str | None],
    "debug": bool,
    "gdiag_no": typing.NotRequired[float | None],
    "check_opts": bool,
    "help": bool,
    "version": bool,
})
MrisDiffParamsDict = _MrisDiffParamsDictNoTag | MrisDiffParamsDictTagged


class MrisDiffOutputs(typing.NamedTuple):
    """
    Output object returned when calling `MrisDiffParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""


def mris_diff_params(
    surface1: InputPathType,
    surface2: InputPathType,
    subject1: str,
    subject2: str,
    hemisphere: str,
    subj_dir1: str | None = None,
    subj_dir2: str | None = None,
    surf: str | None = None,
    curv: str | None = None,
    aparc: str | None = None,
    aparc2: str | None = None,
    simple: bool = False,
    simple_patch: bool = False,
    thresh: float | None = None,
    maxerrs: float | None = None,
    renumbered: bool = False,
    worst_bucket: str | None = None,
    grid: str | None = None,
    no_check_xyz: bool = False,
    no_check_nxyz: bool = False,
    xyz_rms: str | None = None,
    angle_rms: str | None = None,
    seed: float | None = None,
    min_dist: str | None = None,
    debug: bool = False,
    gdiag_no: float | None = None,
    check_opts: bool = False,
    help_: bool = False,
    version: bool = False,
) -> MrisDiffParamsDictTagged:
    """
    Build parameters.
    
    Args:
        surface1: First surface file.
        surface2: Second surface file.
        subject1: Subject 1 name.
        subject2: Subject 2 name.
        hemisphere: Hemisphere (rh or lh).
        subj_dir1: Directory for Subject 1 (default is SUBJECTS_DIR).
        subj_dir2: Directory for Subject 2 (default is SUBJECTS_DIR).
        surf: Compare surface.
        curv: Compare curvature.
        aparc: Compare aparc annotation.
        aparc2: Optional different name to compare to aparc.
        simple: Simple comparison of two surfaces to just report differences.
        simple_patch: Simple comparison of two patches.
        thresh: Threshold (default=0) [Note: Not currently implemented!].
        maxerrs: Stop looping after N errors (default=10).
        renumbered: Vertices or faces may have been renumbered and a few\
            deleted.
        worst_bucket: Compute the worst histogram bucket each vertex is in.
        grid: Label the vertices of edges that span a grid based on the\
            provided spacing float.
        no_check_xyz: Do not check vertex xyz.
        no_check_nxyz: Do not check vertex normals.
        xyz_rms: Compute and save RMS diff between xyz.
        angle_rms: Compute angle on sphere between xyz.
        seed: Set random seed for degenerate normals.
        min_dist: Compute vertex-by-vertex RMS distance between surfaces.
        debug: Enable debugging output.
        gdiag_no: Specify Gdiag_no.
        check_opts: Only check options and exit.
        help_: Display help information.
        version: Display version information.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/mris_diff",
        "surface1": surface1,
        "surface2": surface2,
        "subject1": subject1,
        "subject2": subject2,
        "hemisphere": hemisphere,
        "simple": simple,
        "simple_patch": simple_patch,
        "renumbered": renumbered,
        "no_check_xyz": no_check_xyz,
        "no_check_nxyz": no_check_nxyz,
        "debug": debug,
        "check_opts": check_opts,
        "help": help_,
        "version": version,
    }
    if subj_dir1 is not None:
        params["subj_dir1"] = subj_dir1
    if subj_dir2 is not None:
        params["subj_dir2"] = subj_dir2
    if surf is not None:
        params["surf"] = surf
    if curv is not None:
        params["curv"] = curv
    if aparc is not None:
        params["aparc"] = aparc
    if aparc2 is not None:
        params["aparc2"] = aparc2
    if thresh is not None:
        params["thresh"] = thresh
    if maxerrs is not None:
        params["maxerrs"] = maxerrs
    if worst_bucket is not None:
        params["worst_bucket"] = worst_bucket
    if grid is not None:
        params["grid"] = grid
    if xyz_rms is not None:
        params["xyz_rms"] = xyz_rms
    if angle_rms is not None:
        params["angle_rms"] = angle_rms
    if seed is not None:
        params["seed"] = seed
    if min_dist is not None:
        params["min_dist"] = min_dist
    if gdiag_no is not None:
        params["gdiag_no"] = gdiag_no
    return params


def mris_diff_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `MrisDiffParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("surface1", None) is None:
        raise StyxValidationError("`surface1` must not be None")
    if not isinstance(params["surface1"], (pathlib.Path, str)):
        raise StyxValidationError(f'`surface1` has the wrong type: Received `{type(params.get("surface1", None))}` expected `InputPathType`')
    if params.get("surface2", None) is None:
        raise StyxValidationError("`surface2` must not be None")
    if not isinstance(params["surface2"], (pathlib.Path, str)):
        raise StyxValidationError(f'`surface2` has the wrong type: Received `{type(params.get("surface2", None))}` expected `InputPathType`')
    if params.get("subject1", None) is None:
        raise StyxValidationError("`subject1` must not be None")
    if not isinstance(params["subject1"], str):
        raise StyxValidationError(f'`subject1` has the wrong type: Received `{type(params.get("subject1", None))}` expected `str`')
    if params.get("subject2", None) is None:
        raise StyxValidationError("`subject2` must not be None")
    if not isinstance(params["subject2"], str):
        raise StyxValidationError(f'`subject2` has the wrong type: Received `{type(params.get("subject2", None))}` expected `str`')
    if params.get("subj_dir1", None) is not None:
        if not isinstance(params["subj_dir1"], str):
            raise StyxValidationError(f'`subj_dir1` has the wrong type: Received `{type(params.get("subj_dir1", None))}` expected `str | None`')
    if params.get("subj_dir2", None) is not None:
        if not isinstance(params["subj_dir2"], str):
            raise StyxValidationError(f'`subj_dir2` has the wrong type: Received `{type(params.get("subj_dir2", None))}` expected `str | None`')
    if params.get("hemisphere", None) is None:
        raise StyxValidationError("`hemisphere` must not be None")
    if not isinstance(params["hemisphere"], str):
        raise StyxValidationError(f'`hemisphere` has the wrong type: Received `{type(params.get("hemisphere", None))}` expected `str`')
    if params.get("surf", None) is not None:
        if not isinstance(params["surf"], str):
            raise StyxValidationError(f'`surf` has the wrong type: Received `{type(params.get("surf", None))}` expected `str | None`')
    if params.get("curv", None) is not None:
        if not isinstance(params["curv"], str):
            raise StyxValidationError(f'`curv` has the wrong type: Received `{type(params.get("curv", None))}` expected `str | None`')
    if params.get("aparc", None) is not None:
        if not isinstance(params["aparc"], str):
            raise StyxValidationError(f'`aparc` has the wrong type: Received `{type(params.get("aparc", None))}` expected `str | None`')
    if params.get("aparc2", None) is not None:
        if not isinstance(params["aparc2"], str):
            raise StyxValidationError(f'`aparc2` has the wrong type: Received `{type(params.get("aparc2", None))}` expected `str | None`')
    if params.get("simple", False) is None:
        raise StyxValidationError("`simple` must not be None")
    if not isinstance(params["simple"], bool):
        raise StyxValidationError(f'`simple` has the wrong type: Received `{type(params.get("simple", False))}` expected `bool`')
    if params.get("simple_patch", False) is None:
        raise StyxValidationError("`simple_patch` must not be None")
    if not isinstance(params["simple_patch"], bool):
        raise StyxValidationError(f'`simple_patch` has the wrong type: Received `{type(params.get("simple_patch", False))}` expected `bool`')
    if params.get("thresh", None) is not None:
        if not isinstance(params["thresh"], (float, int)):
            raise StyxValidationError(f'`thresh` has the wrong type: Received `{type(params.get("thresh", None))}` expected `float | None`')
    if params.get("maxerrs", None) is not None:
        if not isinstance(params["maxerrs"], (float, int)):
            raise StyxValidationError(f'`maxerrs` has the wrong type: Received `{type(params.get("maxerrs", None))}` expected `float | None`')
    if params.get("renumbered", False) is None:
        raise StyxValidationError("`renumbered` must not be None")
    if not isinstance(params["renumbered"], bool):
        raise StyxValidationError(f'`renumbered` has the wrong type: Received `{type(params.get("renumbered", False))}` expected `bool`')
    if params.get("worst_bucket", None) is not None:
        if not isinstance(params["worst_bucket"], str):
            raise StyxValidationError(f'`worst_bucket` has the wrong type: Received `{type(params.get("worst_bucket", None))}` expected `str | None`')
    if params.get("grid", None) is not None:
        if not isinstance(params["grid"], str):
            raise StyxValidationError(f'`grid` has the wrong type: Received `{type(params.get("grid", None))}` expected `str | None`')
    if params.get("no_check_xyz", False) is None:
        raise StyxValidationError("`no_check_xyz` must not be None")
    if not isinstance(params["no_check_xyz"], bool):
        raise StyxValidationError(f'`no_check_xyz` has the wrong type: Received `{type(params.get("no_check_xyz", False))}` expected `bool`')
    if params.get("no_check_nxyz", False) is None:
        raise StyxValidationError("`no_check_nxyz` must not be None")
    if not isinstance(params["no_check_nxyz"], bool):
        raise StyxValidationError(f'`no_check_nxyz` has the wrong type: Received `{type(params.get("no_check_nxyz", False))}` expected `bool`')
    if params.get("xyz_rms", None) is not None:
        if not isinstance(params["xyz_rms"], str):
            raise StyxValidationError(f'`xyz_rms` has the wrong type: Received `{type(params.get("xyz_rms", None))}` expected `str | None`')
    if params.get("angle_rms", None) is not None:
        if not isinstance(params["angle_rms"], str):
            raise StyxValidationError(f'`angle_rms` has the wrong type: Received `{type(params.get("angle_rms", None))}` expected `str | None`')
    if params.get("seed", None) is not None:
        if not isinstance(params["seed"], (float, int)):
            raise StyxValidationError(f'`seed` has the wrong type: Received `{type(params.get("seed", None))}` expected `float | None`')
    if params.get("min_dist", None) is not None:
        if not isinstance(params["min_dist"], str):
            raise StyxValidationError(f'`min_dist` has the wrong type: Received `{type(params.get("min_dist", None))}` expected `str | None`')
    if params.get("debug", False) is None:
        raise StyxValidationError("`debug` must not be None")
    if not isinstance(params["debug"], bool):
        raise StyxValidationError(f'`debug` has the wrong type: Received `{type(params.get("debug", False))}` expected `bool`')
    if params.get("gdiag_no", None) is not None:
        if not isinstance(params["gdiag_no"], (float, int)):
            raise StyxValidationError(f'`gdiag_no` has the wrong type: Received `{type(params.get("gdiag_no", None))}` expected `float | None`')
    if params.get("check_opts", False) is None:
        raise StyxValidationError("`check_opts` must not be None")
    if not isinstance(params["check_opts"], bool):
        raise StyxValidationError(f'`check_opts` has the wrong type: Received `{type(params.get("check_opts", False))}` expected `bool`')
    if params.get("help", False) is None:
        raise StyxValidationError("`help` must not be None")
    if not isinstance(params["help"], bool):
        raise StyxValidationError(f'`help` has the wrong type: Received `{type(params.get("help", False))}` expected `bool`')
    if params.get("version", False) is None:
        raise StyxValidationError("`version` must not be None")
    if not isinstance(params["version"], bool):
        raise StyxValidationError(f'`version` has the wrong type: Received `{type(params.get("version", False))}` expected `bool`')


def mris_diff_cargs(
    params: MrisDiffParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("mris_diff")
    cargs.append(execution.input_file(params.get("surface1", None)))
    cargs.append(execution.input_file(params.get("surface2", None)))
    cargs.extend([
        "--s1",
        params.get("subject1", None)
    ])
    cargs.extend([
        "--s2",
        params.get("subject2", None)
    ])
    if params.get("subj_dir1", None) is not None:
        cargs.extend([
            "--sd1",
            params.get("subj_dir1", None)
        ])
    if params.get("subj_dir2", None) is not None:
        cargs.extend([
            "--sd2",
            params.get("subj_dir2", None)
        ])
    cargs.extend([
        "--hemi",
        params.get("hemisphere", None)
    ])
    if params.get("surf", None) is not None:
        cargs.extend([
            "--surf",
            params.get("surf", None)
        ])
    if params.get("curv", None) is not None:
        cargs.extend([
            "--curv",
            params.get("curv", None)
        ])
    if params.get("aparc", None) is not None:
        cargs.extend([
            "--aparc",
            params.get("aparc", None)
        ])
    if params.get("aparc2", None) is not None:
        cargs.extend([
            "--aparc2",
            params.get("aparc2", None)
        ])
    if params.get("simple", False):
        cargs.append("--simple")
    if params.get("simple_patch", False):
        cargs.append("--simple-patch")
    if params.get("thresh", None) is not None:
        cargs.extend([
            "--thresh",
            str(params.get("thresh", None))
        ])
    if params.get("maxerrs", None) is not None:
        cargs.extend([
            "--maxerrs",
            str(params.get("maxerrs", None))
        ])
    if params.get("renumbered", False):
        cargs.append("--renumbered")
    if params.get("worst_bucket", None) is not None:
        cargs.extend([
            "--worst-bucket",
            params.get("worst_bucket", None)
        ])
    if params.get("grid", None) is not None:
        cargs.extend([
            "--grid",
            params.get("grid", None)
        ])
    if params.get("no_check_xyz", False):
        cargs.append("--no-check-xyz")
    if params.get("no_check_nxyz", False):
        cargs.append("--no-check-nxyz")
    if params.get("xyz_rms", None) is not None:
        cargs.extend([
            "--xyz-rms",
            params.get("xyz_rms", None)
        ])
    if params.get("angle_rms", None) is not None:
        cargs.extend([
            "--angle-rms",
            params.get("angle_rms", None)
        ])
    if params.get("seed", None) is not None:
        cargs.extend([
            "--seed",
            str(params.get("seed", None))
        ])
    if params.get("min_dist", None) is not None:
        cargs.extend([
            "--min-dist",
            params.get("min_dist", None)
        ])
    if params.get("debug", False):
        cargs.append("--debug")
    if params.get("gdiag_no", None) is not None:
        cargs.extend([
            "--gdiag_no",
            str(params.get("gdiag_no", None))
        ])
    if params.get("check_opts", False):
        cargs.append("--checkopts")
    if params.get("help", False):
        cargs.append("--help")
    if params.get("version", False):
        cargs.append("--version")
    return cargs


def mris_diff_outputs(
    params: MrisDiffParamsDict,
    execution: Execution,
) -> MrisDiffOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = MrisDiffOutputs(
        root=execution.output_file("."),
    )
    return ret


def mris_diff_execute(
    params: MrisDiffParamsDict,
    runner: Runner | None = None,
) -> MrisDiffOutputs:
    """
    mris_diff
    
    A tool for comparing differences between surface files in FreeSurfer.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MrisDiffOutputs`).
    """
    mris_diff_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(MRIS_DIFF_METADATA)
    params = execution.params(params)
    cargs = mris_diff_cargs(params, execution)
    ret = mris_diff_outputs(params, execution)
    execution.run(cargs)
    return ret


def mris_diff(
    surface1: InputPathType,
    surface2: InputPathType,
    subject1: str,
    subject2: str,
    hemisphere: str,
    subj_dir1: str | None = None,
    subj_dir2: str | None = None,
    surf: str | None = None,
    curv: str | None = None,
    aparc: str | None = None,
    aparc2: str | None = None,
    simple: bool = False,
    simple_patch: bool = False,
    thresh: float | None = None,
    maxerrs: float | None = None,
    renumbered: bool = False,
    worst_bucket: str | None = None,
    grid: str | None = None,
    no_check_xyz: bool = False,
    no_check_nxyz: bool = False,
    xyz_rms: str | None = None,
    angle_rms: str | None = None,
    seed: float | None = None,
    min_dist: str | None = None,
    debug: bool = False,
    gdiag_no: float | None = None,
    check_opts: bool = False,
    help_: bool = False,
    version: bool = False,
    runner: Runner | None = None,
) -> MrisDiffOutputs:
    """
    mris_diff
    
    A tool for comparing differences between surface files in FreeSurfer.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        surface1: First surface file.
        surface2: Second surface file.
        subject1: Subject 1 name.
        subject2: Subject 2 name.
        hemisphere: Hemisphere (rh or lh).
        subj_dir1: Directory for Subject 1 (default is SUBJECTS_DIR).
        subj_dir2: Directory for Subject 2 (default is SUBJECTS_DIR).
        surf: Compare surface.
        curv: Compare curvature.
        aparc: Compare aparc annotation.
        aparc2: Optional different name to compare to aparc.
        simple: Simple comparison of two surfaces to just report differences.
        simple_patch: Simple comparison of two patches.
        thresh: Threshold (default=0) [Note: Not currently implemented!].
        maxerrs: Stop looping after N errors (default=10).
        renumbered: Vertices or faces may have been renumbered and a few\
            deleted.
        worst_bucket: Compute the worst histogram bucket each vertex is in.
        grid: Label the vertices of edges that span a grid based on the\
            provided spacing float.
        no_check_xyz: Do not check vertex xyz.
        no_check_nxyz: Do not check vertex normals.
        xyz_rms: Compute and save RMS diff between xyz.
        angle_rms: Compute angle on sphere between xyz.
        seed: Set random seed for degenerate normals.
        min_dist: Compute vertex-by-vertex RMS distance between surfaces.
        debug: Enable debugging output.
        gdiag_no: Specify Gdiag_no.
        check_opts: Only check options and exit.
        help_: Display help information.
        version: Display version information.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MrisDiffOutputs`).
    """
    params = mris_diff_params(
        surface1=surface1,
        surface2=surface2,
        subject1=subject1,
        subject2=subject2,
        subj_dir1=subj_dir1,
        subj_dir2=subj_dir2,
        hemisphere=hemisphere,
        surf=surf,
        curv=curv,
        aparc=aparc,
        aparc2=aparc2,
        simple=simple,
        simple_patch=simple_patch,
        thresh=thresh,
        maxerrs=maxerrs,
        renumbered=renumbered,
        worst_bucket=worst_bucket,
        grid=grid,
        no_check_xyz=no_check_xyz,
        no_check_nxyz=no_check_nxyz,
        xyz_rms=xyz_rms,
        angle_rms=angle_rms,
        seed=seed,
        min_dist=min_dist,
        debug=debug,
        gdiag_no=gdiag_no,
        check_opts=check_opts,
        help_=help_,
        version=version,
    )
    return mris_diff_execute(params, runner)


__all__ = [
    "MRIS_DIFF_METADATA",
    "MrisDiffOutputs",
    "MrisDiffParamsDict",
    "MrisDiffParamsDictTagged",
    "mris_diff",
    "mris_diff_execute",
    "mris_diff_params",
]
