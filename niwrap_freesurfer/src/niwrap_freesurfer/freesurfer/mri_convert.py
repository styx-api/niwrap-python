# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

MRI_CONVERT_METADATA = Metadata(
    id="9406949087be72683c99241b992dfb378a7af3d7.boutiques",
    name="mri_convert",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_MriConvertParamsDictNoTag = typing.TypedDict('_MriConvertParamsDictNoTag', {
    "inp_volume": InputPathType,
    "out_volume": str,
    "read_only": bool,
    "no_write": bool,
    "in_info": bool,
    "out_info": bool,
    "in_stats": bool,
    "out_stats": bool,
    "upsample": typing.NotRequired[float | None],
    "force_ras_good": bool,
    "apply_transform": typing.NotRequired[InputPathType | None],
    "apply_inverse_transform": typing.NotRequired[InputPathType | None],
    "in_type": typing.NotRequired[str | None],
    "out_type": typing.NotRequired[str | None],
    "in_orientation": typing.NotRequired[str | None],
    "out_orientation": typing.NotRequired[str | None],
    "scale_factor": typing.NotRequired[float | None],
    "bfile_little_endian": bool,
    "sphinx": bool,
})
MriConvertParamsDictTagged = typing.TypedDict('MriConvertParamsDictTagged', {
    "@type": typing.Literal["freesurfer/mri_convert"],
    "inp_volume": InputPathType,
    "out_volume": str,
    "read_only": bool,
    "no_write": bool,
    "in_info": bool,
    "out_info": bool,
    "in_stats": bool,
    "out_stats": bool,
    "upsample": typing.NotRequired[float | None],
    "force_ras_good": bool,
    "apply_transform": typing.NotRequired[InputPathType | None],
    "apply_inverse_transform": typing.NotRequired[InputPathType | None],
    "in_type": typing.NotRequired[str | None],
    "out_type": typing.NotRequired[str | None],
    "in_orientation": typing.NotRequired[str | None],
    "out_orientation": typing.NotRequired[str | None],
    "scale_factor": typing.NotRequired[float | None],
    "bfile_little_endian": bool,
    "sphinx": bool,
})
MriConvertParamsDict = _MriConvertParamsDictNoTag | MriConvertParamsDictTagged


class MriConvertOutputs(typing.NamedTuple):
    """
    Output object returned when calling `MriConvertParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    converted_volume: OutputPathType
    """Converted volume output file"""


def mri_convert_params(
    inp_volume: InputPathType,
    out_volume: str,
    read_only: bool = False,
    no_write: bool = False,
    in_info: bool = False,
    out_info: bool = False,
    in_stats: bool = False,
    out_stats: bool = False,
    upsample: float | None = None,
    force_ras_good: bool = False,
    apply_transform: InputPathType | None = None,
    apply_inverse_transform: InputPathType | None = None,
    in_type: str | None = None,
    out_type: str | None = None,
    in_orientation: str | None = None,
    out_orientation: str | None = None,
    scale_factor: float | None = None,
    bfile_little_endian: bool = False,
    sphinx: bool = False,
) -> MriConvertParamsDictTagged:
    """
    Build parameters.
    
    Args:
        inp_volume: The input volume file.
        out_volume: The output volume file.
        read_only: Open in read-only mode.
        no_write: Do not write output.
        in_info: Print input volume information.
        out_info: Print output volume information.
        in_stats: Print statistics on input volume.
        out_stats: Print statistics on output volume.
        upsample: Reduce voxel size by a factor in all dimensions.
        force_ras_good: Use default when orientation info absent.
        apply_transform: Apply transform given by xfm or m3z file.
        apply_inverse_transform: Apply inverse of transform given by xfm or m3z\
            file.
        in_type: Specify input file type.
        out_type: Specify output file type.
        in_orientation: Specify input orientation.
        out_orientation: Specify output orientation.
        scale_factor: Input intensity scale factor.
        bfile_little_endian: Write out bshort/bfloat files in little endian.
        sphinx: Reorient to sphinx position.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/mri_convert",
        "inp_volume": inp_volume,
        "out_volume": out_volume,
        "read_only": read_only,
        "no_write": no_write,
        "in_info": in_info,
        "out_info": out_info,
        "in_stats": in_stats,
        "out_stats": out_stats,
        "force_ras_good": force_ras_good,
        "bfile_little_endian": bfile_little_endian,
        "sphinx": sphinx,
    }
    if upsample is not None:
        params["upsample"] = upsample
    if apply_transform is not None:
        params["apply_transform"] = apply_transform
    if apply_inverse_transform is not None:
        params["apply_inverse_transform"] = apply_inverse_transform
    if in_type is not None:
        params["in_type"] = in_type
    if out_type is not None:
        params["out_type"] = out_type
    if in_orientation is not None:
        params["in_orientation"] = in_orientation
    if out_orientation is not None:
        params["out_orientation"] = out_orientation
    if scale_factor is not None:
        params["scale_factor"] = scale_factor
    return params


def mri_convert_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `MriConvertParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("inp_volume", None) is None:
        raise StyxValidationError("`inp_volume` must not be None")
    if not isinstance(params["inp_volume"], (pathlib.Path, str)):
        raise StyxValidationError(f'`inp_volume` has the wrong type: Received `{type(params.get("inp_volume", None))}` expected `InputPathType`')
    if params.get("out_volume", None) is None:
        raise StyxValidationError("`out_volume` must not be None")
    if not isinstance(params["out_volume"], str):
        raise StyxValidationError(f'`out_volume` has the wrong type: Received `{type(params.get("out_volume", None))}` expected `str`')
    if params.get("read_only", False) is None:
        raise StyxValidationError("`read_only` must not be None")
    if not isinstance(params["read_only"], bool):
        raise StyxValidationError(f'`read_only` has the wrong type: Received `{type(params.get("read_only", False))}` expected `bool`')
    if params.get("no_write", False) is None:
        raise StyxValidationError("`no_write` must not be None")
    if not isinstance(params["no_write"], bool):
        raise StyxValidationError(f'`no_write` has the wrong type: Received `{type(params.get("no_write", False))}` expected `bool`')
    if params.get("in_info", False) is None:
        raise StyxValidationError("`in_info` must not be None")
    if not isinstance(params["in_info"], bool):
        raise StyxValidationError(f'`in_info` has the wrong type: Received `{type(params.get("in_info", False))}` expected `bool`')
    if params.get("out_info", False) is None:
        raise StyxValidationError("`out_info` must not be None")
    if not isinstance(params["out_info"], bool):
        raise StyxValidationError(f'`out_info` has the wrong type: Received `{type(params.get("out_info", False))}` expected `bool`')
    if params.get("in_stats", False) is None:
        raise StyxValidationError("`in_stats` must not be None")
    if not isinstance(params["in_stats"], bool):
        raise StyxValidationError(f'`in_stats` has the wrong type: Received `{type(params.get("in_stats", False))}` expected `bool`')
    if params.get("out_stats", False) is None:
        raise StyxValidationError("`out_stats` must not be None")
    if not isinstance(params["out_stats"], bool):
        raise StyxValidationError(f'`out_stats` has the wrong type: Received `{type(params.get("out_stats", False))}` expected `bool`')
    if params.get("upsample", None) is not None:
        if not isinstance(params["upsample"], (float, int)):
            raise StyxValidationError(f'`upsample` has the wrong type: Received `{type(params.get("upsample", None))}` expected `float | None`')
    if params.get("force_ras_good", False) is None:
        raise StyxValidationError("`force_ras_good` must not be None")
    if not isinstance(params["force_ras_good"], bool):
        raise StyxValidationError(f'`force_ras_good` has the wrong type: Received `{type(params.get("force_ras_good", False))}` expected `bool`')
    if params.get("apply_transform", None) is not None:
        if not isinstance(params["apply_transform"], (pathlib.Path, str)):
            raise StyxValidationError(f'`apply_transform` has the wrong type: Received `{type(params.get("apply_transform", None))}` expected `InputPathType | None`')
    if params.get("apply_inverse_transform", None) is not None:
        if not isinstance(params["apply_inverse_transform"], (pathlib.Path, str)):
            raise StyxValidationError(f'`apply_inverse_transform` has the wrong type: Received `{type(params.get("apply_inverse_transform", None))}` expected `InputPathType | None`')
    if params.get("in_type", None) is not None:
        if not isinstance(params["in_type"], str):
            raise StyxValidationError(f'`in_type` has the wrong type: Received `{type(params.get("in_type", None))}` expected `str | None`')
    if params.get("out_type", None) is not None:
        if not isinstance(params["out_type"], str):
            raise StyxValidationError(f'`out_type` has the wrong type: Received `{type(params.get("out_type", None))}` expected `str | None`')
    if params.get("in_orientation", None) is not None:
        if not isinstance(params["in_orientation"], str):
            raise StyxValidationError(f'`in_orientation` has the wrong type: Received `{type(params.get("in_orientation", None))}` expected `str | None`')
    if params.get("out_orientation", None) is not None:
        if not isinstance(params["out_orientation"], str):
            raise StyxValidationError(f'`out_orientation` has the wrong type: Received `{type(params.get("out_orientation", None))}` expected `str | None`')
    if params.get("scale_factor", None) is not None:
        if not isinstance(params["scale_factor"], (float, int)):
            raise StyxValidationError(f'`scale_factor` has the wrong type: Received `{type(params.get("scale_factor", None))}` expected `float | None`')
    if params.get("bfile_little_endian", False) is None:
        raise StyxValidationError("`bfile_little_endian` must not be None")
    if not isinstance(params["bfile_little_endian"], bool):
        raise StyxValidationError(f'`bfile_little_endian` has the wrong type: Received `{type(params.get("bfile_little_endian", False))}` expected `bool`')
    if params.get("sphinx", False) is None:
        raise StyxValidationError("`sphinx` must not be None")
    if not isinstance(params["sphinx"], bool):
        raise StyxValidationError(f'`sphinx` has the wrong type: Received `{type(params.get("sphinx", False))}` expected `bool`')


def mri_convert_cargs(
    params: MriConvertParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("mri_convert")
    cargs.append(execution.input_file(params.get("inp_volume", None)))
    cargs.append(params.get("out_volume", None))
    if params.get("read_only", False):
        cargs.append("-ro")
    if params.get("no_write", False):
        cargs.append("-nw")
    if params.get("in_info", False):
        cargs.append("-ii")
    if params.get("out_info", False):
        cargs.append("-oi")
    if params.get("in_stats", False):
        cargs.append("-is")
    if params.get("out_stats", False):
        cargs.append("-os")
    if params.get("upsample", None) is not None:
        cargs.extend([
            "--upsample",
            str(params.get("upsample", None))
        ])
    if params.get("force_ras_good", False):
        cargs.append("--force_ras_good")
    if params.get("apply_transform", None) is not None:
        cargs.extend([
            "--apply_transform",
            execution.input_file(params.get("apply_transform", None))
        ])
    if params.get("apply_inverse_transform", None) is not None:
        cargs.extend([
            "--apply_inverse_transform",
            execution.input_file(params.get("apply_inverse_transform", None))
        ])
    if params.get("in_type", None) is not None:
        cargs.extend([
            "--in_type",
            params.get("in_type", None)
        ])
    if params.get("out_type", None) is not None:
        cargs.extend([
            "--out_type",
            params.get("out_type", None)
        ])
    if params.get("in_orientation", None) is not None:
        cargs.extend([
            "--in_orientation",
            params.get("in_orientation", None)
        ])
    if params.get("out_orientation", None) is not None:
        cargs.extend([
            "--out_orientation",
            params.get("out_orientation", None)
        ])
    if params.get("scale_factor", None) is not None:
        cargs.extend([
            "--scale",
            str(params.get("scale_factor", None))
        ])
    if params.get("bfile_little_endian", False):
        cargs.append("--bfile-little-endian")
    if params.get("sphinx", False):
        cargs.append("--sphinx")
    return cargs


def mri_convert_outputs(
    params: MriConvertParamsDict,
    execution: Execution,
) -> MriConvertOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = MriConvertOutputs(
        root=execution.output_file("."),
        converted_volume=execution.output_file(params.get("out_volume", None)),
    )
    return ret


def mri_convert_execute(
    params: MriConvertParamsDict,
    runner: Runner | None = None,
) -> MriConvertOutputs:
    """
    mri_convert
    
    A general purpose utility for converting between different file formats
    supported by FreeSurfer.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MriConvertOutputs`).
    """
    mri_convert_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(MRI_CONVERT_METADATA)
    params = execution.params(params)
    cargs = mri_convert_cargs(params, execution)
    ret = mri_convert_outputs(params, execution)
    execution.run(cargs)
    return ret


def mri_convert(
    inp_volume: InputPathType,
    out_volume: str,
    read_only: bool = False,
    no_write: bool = False,
    in_info: bool = False,
    out_info: bool = False,
    in_stats: bool = False,
    out_stats: bool = False,
    upsample: float | None = None,
    force_ras_good: bool = False,
    apply_transform: InputPathType | None = None,
    apply_inverse_transform: InputPathType | None = None,
    in_type: str | None = None,
    out_type: str | None = None,
    in_orientation: str | None = None,
    out_orientation: str | None = None,
    scale_factor: float | None = None,
    bfile_little_endian: bool = False,
    sphinx: bool = False,
    runner: Runner | None = None,
) -> MriConvertOutputs:
    """
    mri_convert
    
    A general purpose utility for converting between different file formats
    supported by FreeSurfer.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        inp_volume: The input volume file.
        out_volume: The output volume file.
        read_only: Open in read-only mode.
        no_write: Do not write output.
        in_info: Print input volume information.
        out_info: Print output volume information.
        in_stats: Print statistics on input volume.
        out_stats: Print statistics on output volume.
        upsample: Reduce voxel size by a factor in all dimensions.
        force_ras_good: Use default when orientation info absent.
        apply_transform: Apply transform given by xfm or m3z file.
        apply_inverse_transform: Apply inverse of transform given by xfm or m3z\
            file.
        in_type: Specify input file type.
        out_type: Specify output file type.
        in_orientation: Specify input orientation.
        out_orientation: Specify output orientation.
        scale_factor: Input intensity scale factor.
        bfile_little_endian: Write out bshort/bfloat files in little endian.
        sphinx: Reorient to sphinx position.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MriConvertOutputs`).
    """
    params = mri_convert_params(
        inp_volume=inp_volume,
        out_volume=out_volume,
        read_only=read_only,
        no_write=no_write,
        in_info=in_info,
        out_info=out_info,
        in_stats=in_stats,
        out_stats=out_stats,
        upsample=upsample,
        force_ras_good=force_ras_good,
        apply_transform=apply_transform,
        apply_inverse_transform=apply_inverse_transform,
        in_type=in_type,
        out_type=out_type,
        in_orientation=in_orientation,
        out_orientation=out_orientation,
        scale_factor=scale_factor,
        bfile_little_endian=bfile_little_endian,
        sphinx=sphinx,
    )
    return mri_convert_execute(params, runner)


__all__ = [
    "MRI_CONVERT_METADATA",
    "MriConvertOutputs",
    "MriConvertParamsDict",
    "MriConvertParamsDictTagged",
    "mri_convert",
    "mri_convert_execute",
    "mri_convert_params",
]
