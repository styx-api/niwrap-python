# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

MRI_FUNC2SPH_METADATA = Metadata(
    id="513183fc43583bba0e42d4b2f95a3e588f6e1b58.boutiques",
    name="mri-func2sph",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_MriFunc2sphParamsDictNoTag = typing.TypedDict('_MriFunc2sphParamsDictNoTag', {
    "instem": str,
    "outstem": str,
    "hemisphere": typing.Literal["lh", "rh"],
    "fvitdir": str,
    "hole_filling_iters": typing.NotRequired[float | None],
    "icosahedron_size": typing.NotRequired[float | None],
    "input_type": typing.NotRequired[str | None],
    "umask": typing.NotRequired[str | None],
})
MriFunc2sphParamsDictTagged = typing.TypedDict('MriFunc2sphParamsDictTagged', {
    "@type": typing.Literal["freesurfer/mri-func2sph"],
    "instem": str,
    "outstem": str,
    "hemisphere": typing.Literal["lh", "rh"],
    "fvitdir": str,
    "hole_filling_iters": typing.NotRequired[float | None],
    "icosahedron_size": typing.NotRequired[float | None],
    "input_type": typing.NotRequired[str | None],
    "umask": typing.NotRequired[str | None],
})
MriFunc2sphParamsDict = _MriFunc2sphParamsDictNoTag | MriFunc2sphParamsDictTagged


class MriFunc2sphOutputs(typing.NamedTuple):
    """
    Output object returned when calling `MriFunc2sphParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""


def mri_func2sph_params(
    instem: str,
    outstem: str,
    hemisphere: typing.Literal["lh", "rh"],
    fvitdir: str,
    hole_filling_iters: float | None = None,
    icosahedron_size: float | None = None,
    input_type: str | None = None,
    umask: str | None = None,
) -> MriFunc2sphParamsDictTagged:
    """
    Build parameters.
    
    Args:
        instem: Input file stem.
        outstem: Output file stem.
        hemisphere: Hemisphere to process, can be 'lh' or 'rh'.
        fvitdir: Functional vertex information directory.
        hole_filling_iters: Number of hole-filling iterations.
        icosahedron_size: Size of the icosahedron.
        input_type: Type of input data, will be auto-detected if not specified.
        umask: New umask value.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/mri-func2sph",
        "instem": instem,
        "outstem": outstem,
        "hemisphere": hemisphere,
        "fvitdir": fvitdir,
    }
    if hole_filling_iters is not None:
        params["hole_filling_iters"] = hole_filling_iters
    if icosahedron_size is not None:
        params["icosahedron_size"] = icosahedron_size
    if input_type is not None:
        params["input_type"] = input_type
    if umask is not None:
        params["umask"] = umask
    return params


def mri_func2sph_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `MriFunc2sphParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("instem", None) is None:
        raise StyxValidationError("`instem` must not be None")
    if not isinstance(params["instem"], str):
        raise StyxValidationError(f'`instem` has the wrong type: Received `{type(params.get("instem", None))}` expected `str`')
    if params.get("outstem", None) is None:
        raise StyxValidationError("`outstem` must not be None")
    if not isinstance(params["outstem"], str):
        raise StyxValidationError(f'`outstem` has the wrong type: Received `{type(params.get("outstem", None))}` expected `str`')
    if params.get("hemisphere", None) is None:
        raise StyxValidationError("`hemisphere` must not be None")
    if not isinstance(params["hemisphere"], str):
        raise StyxValidationError(f'`hemisphere` has the wrong type: Received `{type(params.get("hemisphere", None))}` expected `typing.Literal["lh", "rh"]`')
    if params["hemisphere"] not in ["lh", "rh"]:
        raise StyxValidationError("Parameter `hemisphere` must be one of [\"lh\", \"rh\"]")
    if params.get("fvitdir", None) is None:
        raise StyxValidationError("`fvitdir` must not be None")
    if not isinstance(params["fvitdir"], str):
        raise StyxValidationError(f'`fvitdir` has the wrong type: Received `{type(params.get("fvitdir", None))}` expected `str`')
    if params.get("hole_filling_iters", None) is not None:
        if not isinstance(params["hole_filling_iters"], (float, int)):
            raise StyxValidationError(f'`hole_filling_iters` has the wrong type: Received `{type(params.get("hole_filling_iters", None))}` expected `float | None`')
    if params.get("icosahedron_size", None) is not None:
        if not isinstance(params["icosahedron_size"], (float, int)):
            raise StyxValidationError(f'`icosahedron_size` has the wrong type: Received `{type(params.get("icosahedron_size", None))}` expected `float | None`')
    if params.get("input_type", None) is not None:
        if not isinstance(params["input_type"], str):
            raise StyxValidationError(f'`input_type` has the wrong type: Received `{type(params.get("input_type", None))}` expected `str | None`')
    if params.get("umask", None) is not None:
        if not isinstance(params["umask"], str):
            raise StyxValidationError(f'`umask` has the wrong type: Received `{type(params.get("umask", None))}` expected `str | None`')


def mri_func2sph_cargs(
    params: MriFunc2sphParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("mri-func2sph")
    cargs.extend([
        "-i",
        params.get("instem", None)
    ])
    cargs.extend([
        "-o",
        params.get("outstem", None)
    ])
    cargs.extend([
        "-hemi",
        params.get("hemisphere", None)
    ])
    cargs.extend([
        "-fvitdir",
        params.get("fvitdir", None)
    ])
    if params.get("hole_filling_iters", None) is not None:
        cargs.extend([
            "-niters",
            str(params.get("hole_filling_iters", None))
        ])
    if params.get("icosahedron_size", None) is not None:
        cargs.extend([
            "-icosize",
            str(params.get("icosahedron_size", None))
        ])
    if params.get("input_type", None) is not None:
        cargs.extend([
            "-intype",
            params.get("input_type", None)
        ])
    if params.get("umask", None) is not None:
        cargs.extend([
            "-umask",
            params.get("umask", None)
        ])
    return cargs


def mri_func2sph_outputs(
    params: MriFunc2sphParamsDict,
    execution: Execution,
) -> MriFunc2sphOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = MriFunc2sphOutputs(
        root=execution.output_file("."),
    )
    return ret


def mri_func2sph_execute(
    params: MriFunc2sphParamsDict,
    runner: Runner | None = None,
) -> MriFunc2sphOutputs:
    """
    mri-func2sph
    
    Maps functional data from volume space to spherical surface space.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MriFunc2sphOutputs`).
    """
    mri_func2sph_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(MRI_FUNC2SPH_METADATA)
    params = execution.params(params)
    cargs = mri_func2sph_cargs(params, execution)
    ret = mri_func2sph_outputs(params, execution)
    execution.run(cargs)
    return ret


def mri_func2sph(
    instem: str,
    outstem: str,
    hemisphere: typing.Literal["lh", "rh"],
    fvitdir: str,
    hole_filling_iters: float | None = None,
    icosahedron_size: float | None = None,
    input_type: str | None = None,
    umask: str | None = None,
    runner: Runner | None = None,
) -> MriFunc2sphOutputs:
    """
    mri-func2sph
    
    Maps functional data from volume space to spherical surface space.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        instem: Input file stem.
        outstem: Output file stem.
        hemisphere: Hemisphere to process, can be 'lh' or 'rh'.
        fvitdir: Functional vertex information directory.
        hole_filling_iters: Number of hole-filling iterations.
        icosahedron_size: Size of the icosahedron.
        input_type: Type of input data, will be auto-detected if not specified.
        umask: New umask value.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MriFunc2sphOutputs`).
    """
    params = mri_func2sph_params(
        instem=instem,
        outstem=outstem,
        hemisphere=hemisphere,
        fvitdir=fvitdir,
        hole_filling_iters=hole_filling_iters,
        icosahedron_size=icosahedron_size,
        input_type=input_type,
        umask=umask,
    )
    return mri_func2sph_execute(params, runner)


__all__ = [
    "MRI_FUNC2SPH_METADATA",
    "MriFunc2sphOutputs",
    "MriFunc2sphParamsDict",
    "MriFunc2sphParamsDictTagged",
    "mri_func2sph",
    "mri_func2sph_execute",
    "mri_func2sph_params",
]
