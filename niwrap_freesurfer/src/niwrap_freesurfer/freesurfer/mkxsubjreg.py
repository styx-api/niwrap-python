# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

MKXSUBJREG_METADATA = Metadata(
    id="bfc691a659657a1a0a2502dff6f140048c147a07.boutiques",
    name="mkxsubjreg",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_MkxsubjregParamsDictNoTag = typing.TypedDict('_MkxsubjregParamsDictNoTag', {
    "srcreg": InputPathType,
    "targreg": InputPathType,
    "targsubj": typing.NotRequired[str | None],
    "xfm": typing.NotRequired[str | None],
    "sd": typing.NotRequired[str | None],
    "fvol": typing.NotRequired[InputPathType | None],
    "help": bool,
    "version": bool,
})
MkxsubjregParamsDictTagged = typing.TypedDict('MkxsubjregParamsDictTagged', {
    "@type": typing.Literal["freesurfer/mkxsubjreg"],
    "srcreg": InputPathType,
    "targreg": InputPathType,
    "targsubj": typing.NotRequired[str | None],
    "xfm": typing.NotRequired[str | None],
    "sd": typing.NotRequired[str | None],
    "fvol": typing.NotRequired[InputPathType | None],
    "help": bool,
    "version": bool,
})
MkxsubjregParamsDict = _MkxsubjregParamsDictNoTag | MkxsubjregParamsDictTagged


class MkxsubjregOutputs(typing.NamedTuple):
    """
    Output object returned when calling `MkxsubjregParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""


def mkxsubjreg_params(
    srcreg: InputPathType,
    targreg: InputPathType,
    targsubj: str | None = None,
    xfm: str | None = None,
    sd: str | None = None,
    fvol: InputPathType | None = None,
    help_: bool = False,
    version: bool = False,
) -> MkxsubjregParamsDictTagged:
    """
    Build parameters.
    
    Args:
        srcreg: Path to the source registration file (srcreg.dat).
        targreg: Path to the target registration file (targreg.dat).
        targsubj: Target subject ID; default is talairach.
        xfm: XFM file name relative to transforms.
        sd: Directory containing subject data; default is env SUBJECTS_DIR.
        fvol: Path to example functional volume.
        help_: Display help information.
        version: Display version information.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/mkxsubjreg",
        "srcreg": srcreg,
        "targreg": targreg,
        "help": help_,
        "version": version,
    }
    if targsubj is not None:
        params["targsubj"] = targsubj
    if xfm is not None:
        params["xfm"] = xfm
    if sd is not None:
        params["sd"] = sd
    if fvol is not None:
        params["fvol"] = fvol
    return params


def mkxsubjreg_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `MkxsubjregParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("srcreg", None) is None:
        raise StyxValidationError("`srcreg` must not be None")
    if not isinstance(params["srcreg"], (pathlib.Path, str)):
        raise StyxValidationError(f'`srcreg` has the wrong type: Received `{type(params.get("srcreg", None))}` expected `InputPathType`')
    if params.get("targreg", None) is None:
        raise StyxValidationError("`targreg` must not be None")
    if not isinstance(params["targreg"], (pathlib.Path, str)):
        raise StyxValidationError(f'`targreg` has the wrong type: Received `{type(params.get("targreg", None))}` expected `InputPathType`')
    if params.get("targsubj", None) is not None:
        if not isinstance(params["targsubj"], str):
            raise StyxValidationError(f'`targsubj` has the wrong type: Received `{type(params.get("targsubj", None))}` expected `str | None`')
    if params.get("xfm", None) is not None:
        if not isinstance(params["xfm"], str):
            raise StyxValidationError(f'`xfm` has the wrong type: Received `{type(params.get("xfm", None))}` expected `str | None`')
    if params.get("sd", None) is not None:
        if not isinstance(params["sd"], str):
            raise StyxValidationError(f'`sd` has the wrong type: Received `{type(params.get("sd", None))}` expected `str | None`')
    if params.get("fvol", None) is not None:
        if not isinstance(params["fvol"], (pathlib.Path, str)):
            raise StyxValidationError(f'`fvol` has the wrong type: Received `{type(params.get("fvol", None))}` expected `InputPathType | None`')
    if params.get("help", False) is None:
        raise StyxValidationError("`help` must not be None")
    if not isinstance(params["help"], bool):
        raise StyxValidationError(f'`help` has the wrong type: Received `{type(params.get("help", False))}` expected `bool`')
    if params.get("version", False) is None:
        raise StyxValidationError("`version` must not be None")
    if not isinstance(params["version"], bool):
        raise StyxValidationError(f'`version` has the wrong type: Received `{type(params.get("version", False))}` expected `bool`')


def mkxsubjreg_cargs(
    params: MkxsubjregParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("mkxsubjreg")
    cargs.extend([
        "--srcreg",
        execution.input_file(params.get("srcreg", None))
    ])
    cargs.extend([
        "--targreg",
        execution.input_file(params.get("targreg", None))
    ])
    if params.get("targsubj", None) is not None:
        cargs.extend([
            "--targsubj",
            params.get("targsubj", None)
        ])
    if params.get("xfm", None) is not None:
        cargs.extend([
            "--xfm",
            params.get("xfm", None)
        ])
    if params.get("sd", None) is not None:
        cargs.extend([
            "--sd",
            params.get("sd", None)
        ])
    if params.get("fvol", None) is not None:
        cargs.extend([
            "--fvol",
            execution.input_file(params.get("fvol", None))
        ])
    if params.get("help", False):
        cargs.append("--help")
    if params.get("version", False):
        cargs.append("--version")
    return cargs


def mkxsubjreg_outputs(
    params: MkxsubjregParamsDict,
    execution: Execution,
) -> MkxsubjregOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = MkxsubjregOutputs(
        root=execution.output_file("."),
    )
    return ret


def mkxsubjreg_execute(
    params: MkxsubjregParamsDict,
    runner: Runner | None = None,
) -> MkxsubjregOutputs:
    """
    mkxsubjreg
    
    Creates a new registration matrix that maps from the functional volume of
    the source subject to the orig of the target subject through the talairach
    transform.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MkxsubjregOutputs`).
    """
    mkxsubjreg_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(MKXSUBJREG_METADATA)
    params = execution.params(params)
    cargs = mkxsubjreg_cargs(params, execution)
    ret = mkxsubjreg_outputs(params, execution)
    execution.run(cargs)
    return ret


def mkxsubjreg(
    srcreg: InputPathType,
    targreg: InputPathType,
    targsubj: str | None = None,
    xfm: str | None = None,
    sd: str | None = None,
    fvol: InputPathType | None = None,
    help_: bool = False,
    version: bool = False,
    runner: Runner | None = None,
) -> MkxsubjregOutputs:
    """
    mkxsubjreg
    
    Creates a new registration matrix that maps from the functional volume of
    the source subject to the orig of the target subject through the talairach
    transform.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        srcreg: Path to the source registration file (srcreg.dat).
        targreg: Path to the target registration file (targreg.dat).
        targsubj: Target subject ID; default is talairach.
        xfm: XFM file name relative to transforms.
        sd: Directory containing subject data; default is env SUBJECTS_DIR.
        fvol: Path to example functional volume.
        help_: Display help information.
        version: Display version information.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MkxsubjregOutputs`).
    """
    params = mkxsubjreg_params(
        srcreg=srcreg,
        targreg=targreg,
        targsubj=targsubj,
        xfm=xfm,
        sd=sd,
        fvol=fvol,
        help_=help_,
        version=version,
    )
    return mkxsubjreg_execute(params, runner)


__all__ = [
    "MKXSUBJREG_METADATA",
    "MkxsubjregOutputs",
    "MkxsubjregParamsDict",
    "MkxsubjregParamsDictTagged",
    "mkxsubjreg",
    "mkxsubjreg_execute",
    "mkxsubjreg_params",
]
