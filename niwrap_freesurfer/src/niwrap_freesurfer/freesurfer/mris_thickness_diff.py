# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

MRIS_THICKNESS_DIFF_METADATA = Metadata(
    id="a3ec581547cad53689b40c2404afc383dac2983f.boutiques",
    name="mris_thickness_diff",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_MrisThicknessDiffParamsDictNoTag = typing.TypedDict('_MrisThicknessDiffParamsDictNoTag', {
    "src_type": typing.NotRequired[str | None],
    "trg_type": typing.NotRequired[str | None],
    "out_file": str,
    "out_resampled": typing.NotRequired[str | None],
    "nsmooth": typing.NotRequired[float | None],
    "register": bool,
    "xform": typing.NotRequired[InputPathType | None],
    "invert": bool,
    "src_volume": typing.NotRequired[InputPathType | None],
    "dst_volume": typing.NotRequired[InputPathType | None],
    "abs": bool,
    "log_file": typing.NotRequired[InputPathType | None],
    "subject_name": typing.NotRequired[str | None],
})
MrisThicknessDiffParamsDictTagged = typing.TypedDict('MrisThicknessDiffParamsDictTagged', {
    "@type": typing.Literal["freesurfer/mris_thickness_diff"],
    "src_type": typing.NotRequired[str | None],
    "trg_type": typing.NotRequired[str | None],
    "out_file": str,
    "out_resampled": typing.NotRequired[str | None],
    "nsmooth": typing.NotRequired[float | None],
    "register": bool,
    "xform": typing.NotRequired[InputPathType | None],
    "invert": bool,
    "src_volume": typing.NotRequired[InputPathType | None],
    "dst_volume": typing.NotRequired[InputPathType | None],
    "abs": bool,
    "log_file": typing.NotRequired[InputPathType | None],
    "subject_name": typing.NotRequired[str | None],
})
MrisThicknessDiffParamsDict = _MrisThicknessDiffParamsDictNoTag | MrisThicknessDiffParamsDictTagged


class MrisThicknessDiffOutputs(typing.NamedTuple):
    """
    Output object returned when calling `MrisThicknessDiffParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_difference: OutputPathType
    """Output file with the difference mapped onto the surface"""
    output_resampled: OutputPathType | None
    """Resampled output thickness file"""


def mris_thickness_diff_params(
    out_file: str,
    src_type: str | None = None,
    trg_type: str | None = None,
    out_resampled: str | None = None,
    nsmooth: float | None = None,
    register: bool = False,
    xform: InputPathType | None = None,
    invert: bool = False,
    src_volume: InputPathType | None = None,
    dst_volume: InputPathType | None = None,
    abs_: bool = False,
    log_file: InputPathType | None = None,
    subject_name: str | None = None,
) -> MrisThicknessDiffParamsDictTagged:
    """
    Build parameters.
    
    Args:
        out_file: Output file name.
        src_type: Input surface data format (curv, paint or w).
        trg_type: Output format (paint or w).
        out_resampled: Output resampled thickness.
        nsmooth: Number of smoothing steps.
        register: Perform ICP rigid registration.
        xform: Apply LTA transform to align input surface1 to surface2.
        invert: Reversely apply -xform.
        src_volume: Source volume for -xform.
        dst_volume: Target volume for -xform.
        abs_: Compute the std of abs-thickness-diff.
        log_file: Log file name.
        subject_name: Subject name (to be recorded in logfile).
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/mris_thickness_diff",
        "out_file": out_file,
        "register": register,
        "invert": invert,
        "abs": abs_,
    }
    if src_type is not None:
        params["src_type"] = src_type
    if trg_type is not None:
        params["trg_type"] = trg_type
    if out_resampled is not None:
        params["out_resampled"] = out_resampled
    if nsmooth is not None:
        params["nsmooth"] = nsmooth
    if xform is not None:
        params["xform"] = xform
    if src_volume is not None:
        params["src_volume"] = src_volume
    if dst_volume is not None:
        params["dst_volume"] = dst_volume
    if log_file is not None:
        params["log_file"] = log_file
    if subject_name is not None:
        params["subject_name"] = subject_name
    return params


def mris_thickness_diff_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `MrisThicknessDiffParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("src_type", None) is not None:
        if not isinstance(params["src_type"], str):
            raise StyxValidationError(f'`src_type` has the wrong type: Received `{type(params.get("src_type", None))}` expected `str | None`')
    if params.get("trg_type", None) is not None:
        if not isinstance(params["trg_type"], str):
            raise StyxValidationError(f'`trg_type` has the wrong type: Received `{type(params.get("trg_type", None))}` expected `str | None`')
    if params.get("out_file", None) is None:
        raise StyxValidationError("`out_file` must not be None")
    if not isinstance(params["out_file"], str):
        raise StyxValidationError(f'`out_file` has the wrong type: Received `{type(params.get("out_file", None))}` expected `str`')
    if params.get("out_resampled", None) is not None:
        if not isinstance(params["out_resampled"], str):
            raise StyxValidationError(f'`out_resampled` has the wrong type: Received `{type(params.get("out_resampled", None))}` expected `str | None`')
    if params.get("nsmooth", None) is not None:
        if not isinstance(params["nsmooth"], (float, int)):
            raise StyxValidationError(f'`nsmooth` has the wrong type: Received `{type(params.get("nsmooth", None))}` expected `float | None`')
    if params.get("register", False) is None:
        raise StyxValidationError("`register` must not be None")
    if not isinstance(params["register"], bool):
        raise StyxValidationError(f'`register` has the wrong type: Received `{type(params.get("register", False))}` expected `bool`')
    if params.get("xform", None) is not None:
        if not isinstance(params["xform"], (pathlib.Path, str)):
            raise StyxValidationError(f'`xform` has the wrong type: Received `{type(params.get("xform", None))}` expected `InputPathType | None`')
    if params.get("invert", False) is None:
        raise StyxValidationError("`invert` must not be None")
    if not isinstance(params["invert"], bool):
        raise StyxValidationError(f'`invert` has the wrong type: Received `{type(params.get("invert", False))}` expected `bool`')
    if params.get("src_volume", None) is not None:
        if not isinstance(params["src_volume"], (pathlib.Path, str)):
            raise StyxValidationError(f'`src_volume` has the wrong type: Received `{type(params.get("src_volume", None))}` expected `InputPathType | None`')
    if params.get("dst_volume", None) is not None:
        if not isinstance(params["dst_volume"], (pathlib.Path, str)):
            raise StyxValidationError(f'`dst_volume` has the wrong type: Received `{type(params.get("dst_volume", None))}` expected `InputPathType | None`')
    if params.get("abs", False) is None:
        raise StyxValidationError("`abs` must not be None")
    if not isinstance(params["abs"], bool):
        raise StyxValidationError(f'`abs` has the wrong type: Received `{type(params.get("abs", False))}` expected `bool`')
    if params.get("log_file", None) is not None:
        if not isinstance(params["log_file"], (pathlib.Path, str)):
            raise StyxValidationError(f'`log_file` has the wrong type: Received `{type(params.get("log_file", None))}` expected `InputPathType | None`')
    if params.get("subject_name", None) is not None:
        if not isinstance(params["subject_name"], str):
            raise StyxValidationError(f'`subject_name` has the wrong type: Received `{type(params.get("subject_name", None))}` expected `str | None`')


def mris_thickness_diff_cargs(
    params: MrisThicknessDiffParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("mris_thickness_diff")
    if params.get("src_type", None) is not None:
        cargs.extend([
            "-src_type",
            params.get("src_type", None)
        ])
    if params.get("trg_type", None) is not None:
        cargs.extend([
            "-trg_type",
            params.get("trg_type", None)
        ])
    cargs.extend([
        "-out",
        params.get("out_file", None)
    ])
    if params.get("out_resampled", None) is not None:
        cargs.extend([
            "-out_resampled",
            params.get("out_resampled", None)
        ])
    if params.get("nsmooth", None) is not None:
        cargs.extend([
            "-nsmooth",
            str(params.get("nsmooth", None))
        ])
    if params.get("register", False):
        cargs.append("-register")
    if params.get("xform", None) is not None:
        cargs.extend([
            "-xform",
            execution.input_file(params.get("xform", None))
        ])
    if params.get("invert", False):
        cargs.append("-invert")
    if params.get("src_volume", None) is not None:
        cargs.extend([
            "-src",
            execution.input_file(params.get("src_volume", None))
        ])
    if params.get("dst_volume", None) is not None:
        cargs.extend([
            "-dst",
            execution.input_file(params.get("dst_volume", None))
        ])
    if params.get("abs", False):
        cargs.append("-abs")
    if params.get("log_file", None) is not None:
        cargs.extend([
            "-L",
            execution.input_file(params.get("log_file", None))
        ])
    if params.get("subject_name", None) is not None:
        cargs.extend([
            "-S",
            params.get("subject_name", None)
        ])
    return cargs


def mris_thickness_diff_outputs(
    params: MrisThicknessDiffParamsDict,
    execution: Execution,
) -> MrisThicknessDiffOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = MrisThicknessDiffOutputs(
        root=execution.output_file("."),
        output_difference=execution.output_file(params.get("out_file", None)),
        output_resampled=execution.output_file(params.get("out_resampled", None)) if (params.get("out_resampled") is not None) else None,
    )
    return ret


def mris_thickness_diff_execute(
    params: MrisThicknessDiffParamsDict,
    runner: Runner | None = None,
) -> MrisThicknessDiffOutputs:
    """
    mris_thickness_diff
    
    Computes the difference of two surface data sets defined on two surface
    meshes.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MrisThicknessDiffOutputs`).
    """
    mris_thickness_diff_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(MRIS_THICKNESS_DIFF_METADATA)
    params = execution.params(params)
    cargs = mris_thickness_diff_cargs(params, execution)
    ret = mris_thickness_diff_outputs(params, execution)
    execution.run(cargs)
    return ret


def mris_thickness_diff(
    out_file: str,
    src_type: str | None = None,
    trg_type: str | None = None,
    out_resampled: str | None = None,
    nsmooth: float | None = None,
    register: bool = False,
    xform: InputPathType | None = None,
    invert: bool = False,
    src_volume: InputPathType | None = None,
    dst_volume: InputPathType | None = None,
    abs_: bool = False,
    log_file: InputPathType | None = None,
    subject_name: str | None = None,
    runner: Runner | None = None,
) -> MrisThicknessDiffOutputs:
    """
    mris_thickness_diff
    
    Computes the difference of two surface data sets defined on two surface
    meshes.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        out_file: Output file name.
        src_type: Input surface data format (curv, paint or w).
        trg_type: Output format (paint or w).
        out_resampled: Output resampled thickness.
        nsmooth: Number of smoothing steps.
        register: Perform ICP rigid registration.
        xform: Apply LTA transform to align input surface1 to surface2.
        invert: Reversely apply -xform.
        src_volume: Source volume for -xform.
        dst_volume: Target volume for -xform.
        abs_: Compute the std of abs-thickness-diff.
        log_file: Log file name.
        subject_name: Subject name (to be recorded in logfile).
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `MrisThicknessDiffOutputs`).
    """
    params = mris_thickness_diff_params(
        src_type=src_type,
        trg_type=trg_type,
        out_file=out_file,
        out_resampled=out_resampled,
        nsmooth=nsmooth,
        register=register,
        xform=xform,
        invert=invert,
        src_volume=src_volume,
        dst_volume=dst_volume,
        abs_=abs_,
        log_file=log_file,
        subject_name=subject_name,
    )
    return mris_thickness_diff_execute(params, runner)


__all__ = [
    "MRIS_THICKNESS_DIFF_METADATA",
    "MrisThicknessDiffOutputs",
    "MrisThicknessDiffParamsDict",
    "MrisThicknessDiffParamsDictTagged",
    "mris_thickness_diff",
    "mris_thickness_diff_execute",
    "mris_thickness_diff_params",
]
