# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

STATTABLEDIFF_METADATA = Metadata(
    id="0d32fce001061fdd4d4df206d102f4e4d60f9666.boutiques",
    name="stattablediff",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_StattablediffParamsDictNoTag = typing.TypedDict('_StattablediffParamsDictNoTag', {
    "t1": InputPathType,
    "t2": InputPathType,
    "output": str,
    "percent_diff": bool,
    "percent_diff_t1": bool,
    "percent_diff_t2": bool,
    "multiply": typing.NotRequired[float | None],
    "divide": typing.NotRequired[float | None],
    "common": bool,
    "remove_exvivo": bool,
    "diff_subjects": bool,
    "noreplace53": bool,
})
StattablediffParamsDictTagged = typing.TypedDict('StattablediffParamsDictTagged', {
    "@type": typing.Literal["freesurfer/stattablediff"],
    "t1": InputPathType,
    "t2": InputPathType,
    "output": str,
    "percent_diff": bool,
    "percent_diff_t1": bool,
    "percent_diff_t2": bool,
    "multiply": typing.NotRequired[float | None],
    "divide": typing.NotRequired[float | None],
    "common": bool,
    "remove_exvivo": bool,
    "diff_subjects": bool,
    "noreplace53": bool,
})
StattablediffParamsDict = _StattablediffParamsDictNoTag | StattablediffParamsDictTagged


class StattablediffOutputs(typing.NamedTuple):
    """
    Output object returned when calling `StattablediffParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_diff_table: OutputPathType
    """Generated table of differences"""


def stattablediff_params(
    t1: InputPathType,
    t2: InputPathType,
    output: str,
    percent_diff: bool = False,
    percent_diff_t1: bool = False,
    percent_diff_t2: bool = False,
    multiply: float | None = None,
    divide: float | None = None,
    common: bool = False,
    remove_exvivo: bool = False,
    diff_subjects: bool = False,
    noreplace53: bool = False,
) -> StattablediffParamsDictTagged:
    """
    Build parameters.
    
    Args:
        t1: Input table 1 (output of asegstats2table or aparcstats2table).
        t2: Input table 2 (output of asegstats2table or aparcstats2table).
        output: Output file for the table of differences.
        percent_diff: Compute percent difference with respect to mean of tables.
        percent_diff_t1: Compute percent difference with respect to table 1.
        percent_diff_t2: Compute percent difference with respect to table 2.
        multiply: Multiply by mulval.
        divide: Divide by divval.
        common: Compute difference on common segments (may reorder).
        remove_exvivo: Remove the string '_exvivo' from the column header.
        diff_subjects: Compare subjects with different names.
        noreplace53: Do not replace 5.3 structure names with later names.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/stattablediff",
        "t1": t1,
        "t2": t2,
        "output": output,
        "percent_diff": percent_diff,
        "percent_diff_t1": percent_diff_t1,
        "percent_diff_t2": percent_diff_t2,
        "common": common,
        "remove_exvivo": remove_exvivo,
        "diff_subjects": diff_subjects,
        "noreplace53": noreplace53,
    }
    if multiply is not None:
        params["multiply"] = multiply
    if divide is not None:
        params["divide"] = divide
    return params


def stattablediff_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `StattablediffParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("t1", None) is None:
        raise StyxValidationError("`t1` must not be None")
    if not isinstance(params["t1"], (pathlib.Path, str)):
        raise StyxValidationError(f'`t1` has the wrong type: Received `{type(params.get("t1", None))}` expected `InputPathType`')
    if params.get("t2", None) is None:
        raise StyxValidationError("`t2` must not be None")
    if not isinstance(params["t2"], (pathlib.Path, str)):
        raise StyxValidationError(f'`t2` has the wrong type: Received `{type(params.get("t2", None))}` expected `InputPathType`')
    if params.get("output", None) is None:
        raise StyxValidationError("`output` must not be None")
    if not isinstance(params["output"], str):
        raise StyxValidationError(f'`output` has the wrong type: Received `{type(params.get("output", None))}` expected `str`')
    if params.get("percent_diff", False) is None:
        raise StyxValidationError("`percent_diff` must not be None")
    if not isinstance(params["percent_diff"], bool):
        raise StyxValidationError(f'`percent_diff` has the wrong type: Received `{type(params.get("percent_diff", False))}` expected `bool`')
    if params.get("percent_diff_t1", False) is None:
        raise StyxValidationError("`percent_diff_t1` must not be None")
    if not isinstance(params["percent_diff_t1"], bool):
        raise StyxValidationError(f'`percent_diff_t1` has the wrong type: Received `{type(params.get("percent_diff_t1", False))}` expected `bool`')
    if params.get("percent_diff_t2", False) is None:
        raise StyxValidationError("`percent_diff_t2` must not be None")
    if not isinstance(params["percent_diff_t2"], bool):
        raise StyxValidationError(f'`percent_diff_t2` has the wrong type: Received `{type(params.get("percent_diff_t2", False))}` expected `bool`')
    if params.get("multiply", None) is not None:
        if not isinstance(params["multiply"], (float, int)):
            raise StyxValidationError(f'`multiply` has the wrong type: Received `{type(params.get("multiply", None))}` expected `float | None`')
    if params.get("divide", None) is not None:
        if not isinstance(params["divide"], (float, int)):
            raise StyxValidationError(f'`divide` has the wrong type: Received `{type(params.get("divide", None))}` expected `float | None`')
    if params.get("common", False) is None:
        raise StyxValidationError("`common` must not be None")
    if not isinstance(params["common"], bool):
        raise StyxValidationError(f'`common` has the wrong type: Received `{type(params.get("common", False))}` expected `bool`')
    if params.get("remove_exvivo", False) is None:
        raise StyxValidationError("`remove_exvivo` must not be None")
    if not isinstance(params["remove_exvivo"], bool):
        raise StyxValidationError(f'`remove_exvivo` has the wrong type: Received `{type(params.get("remove_exvivo", False))}` expected `bool`')
    if params.get("diff_subjects", False) is None:
        raise StyxValidationError("`diff_subjects` must not be None")
    if not isinstance(params["diff_subjects"], bool):
        raise StyxValidationError(f'`diff_subjects` has the wrong type: Received `{type(params.get("diff_subjects", False))}` expected `bool`')
    if params.get("noreplace53", False) is None:
        raise StyxValidationError("`noreplace53` must not be None")
    if not isinstance(params["noreplace53"], bool):
        raise StyxValidationError(f'`noreplace53` has the wrong type: Received `{type(params.get("noreplace53", False))}` expected `bool`')


def stattablediff_cargs(
    params: StattablediffParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("stattablediff")
    cargs.append(execution.input_file(params.get("t1", None)))
    cargs.append(execution.input_file(params.get("t2", None)))
    cargs.append(params.get("output", None))
    if params.get("percent_diff", False):
        cargs.append("--percent")
    if params.get("percent_diff_t1", False):
        cargs.append("--percent1")
    if params.get("percent_diff_t2", False):
        cargs.append("--percent2")
    if params.get("multiply", None) is not None:
        cargs.extend([
            "--mul",
            str(params.get("multiply", None))
        ])
    if params.get("divide", None) is not None:
        cargs.extend([
            "--div",
            str(params.get("divide", None))
        ])
    if params.get("common", False):
        cargs.append("--common")
    if params.get("remove_exvivo", False):
        cargs.append("--rm-exvivo")
    if params.get("diff_subjects", False):
        cargs.append("--diff-subjs")
    if params.get("noreplace53", False):
        cargs.append("--noreplace53")
    return cargs


def stattablediff_outputs(
    params: StattablediffParamsDict,
    execution: Execution,
) -> StattablediffOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = StattablediffOutputs(
        root=execution.output_file("."),
        output_diff_table=execution.output_file(params.get("output", None)),
    )
    return ret


def stattablediff_execute(
    params: StattablediffParamsDict,
    runner: Runner | None = None,
) -> StattablediffOutputs:
    """
    stattablediff
    
    Creates a table of the differences between two stats tables.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `StattablediffOutputs`).
    """
    stattablediff_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(STATTABLEDIFF_METADATA)
    params = execution.params(params)
    cargs = stattablediff_cargs(params, execution)
    ret = stattablediff_outputs(params, execution)
    execution.run(cargs)
    return ret


def stattablediff(
    t1: InputPathType,
    t2: InputPathType,
    output: str,
    percent_diff: bool = False,
    percent_diff_t1: bool = False,
    percent_diff_t2: bool = False,
    multiply: float | None = None,
    divide: float | None = None,
    common: bool = False,
    remove_exvivo: bool = False,
    diff_subjects: bool = False,
    noreplace53: bool = False,
    runner: Runner | None = None,
) -> StattablediffOutputs:
    """
    stattablediff
    
    Creates a table of the differences between two stats tables.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        t1: Input table 1 (output of asegstats2table or aparcstats2table).
        t2: Input table 2 (output of asegstats2table or aparcstats2table).
        output: Output file for the table of differences.
        percent_diff: Compute percent difference with respect to mean of tables.
        percent_diff_t1: Compute percent difference with respect to table 1.
        percent_diff_t2: Compute percent difference with respect to table 2.
        multiply: Multiply by mulval.
        divide: Divide by divval.
        common: Compute difference on common segments (may reorder).
        remove_exvivo: Remove the string '_exvivo' from the column header.
        diff_subjects: Compare subjects with different names.
        noreplace53: Do not replace 5.3 structure names with later names.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `StattablediffOutputs`).
    """
    params = stattablediff_params(
        t1=t1,
        t2=t2,
        output=output,
        percent_diff=percent_diff,
        percent_diff_t1=percent_diff_t1,
        percent_diff_t2=percent_diff_t2,
        multiply=multiply,
        divide=divide,
        common=common,
        remove_exvivo=remove_exvivo,
        diff_subjects=diff_subjects,
        noreplace53=noreplace53,
    )
    return stattablediff_execute(params, runner)


__all__ = [
    "STATTABLEDIFF_METADATA",
    "StattablediffOutputs",
    "StattablediffParamsDict",
    "StattablediffParamsDictTagged",
    "stattablediff",
    "stattablediff_execute",
    "stattablediff_params",
]
