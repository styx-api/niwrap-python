# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

DMRI_ANATOMI_CUTS_METADATA = Metadata(
    id="b662e297e903b2bd669c0571dc3606bff1e0a3b4.boutiques",
    name="dmri_AnatomiCuts",
    package="freesurfer",
    container_image_tag="freesurfer/freesurfer:7.4.1",
)


_DmriAnatomiCutsParamsDictNoTag = typing.TypedDict('_DmriAnatomiCutsParamsDictNoTag', {
    "segmentation_file": InputPathType,
    "fiber_file": InputPathType,
    "clusters": float,
    "points": float,
    "fibers_eigen": float,
    "output_folder": str,
    "direction_flag": typing.Literal["s", "d", "a", "o"],
})
DmriAnatomiCutsParamsDictTagged = typing.TypedDict('DmriAnatomiCutsParamsDictTagged', {
    "@type": typing.Literal["freesurfer/dmri_AnatomiCuts"],
    "segmentation_file": InputPathType,
    "fiber_file": InputPathType,
    "clusters": float,
    "points": float,
    "fibers_eigen": float,
    "output_folder": str,
    "direction_flag": typing.Literal["s", "d", "a", "o"],
})
DmriAnatomiCutsParamsDict = _DmriAnatomiCutsParamsDictNoTag | DmriAnatomiCutsParamsDictTagged


class DmriAnatomiCutsOutputs(typing.NamedTuple):
    """
    Output object returned when calling `DmriAnatomiCutsParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_vtk: OutputPathType
    """Output VTK file of the segmentation"""


def dmri_anatomi_cuts_params(
    segmentation_file: InputPathType,
    fiber_file: InputPathType,
    clusters: float,
    points: float,
    fibers_eigen: float,
    output_folder: str,
    direction_flag: typing.Literal["s", "d", "a", "o"],
) -> DmriAnatomiCutsParamsDictTagged:
    """
    Build parameters.
    
    Args:
        segmentation_file: Segmentation file.
        fiber_file: VTK fiber file.
        clusters: Number of clusters.
        points: Number of points.
        fibers_eigen: Number of fibers for eigen decomposition.
        output_folder: Output folder.
        direction_flag: Direction flag: 's' for straight, 'd' for diagonal, 'a'\
            for all, 'o' for none.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "freesurfer/dmri_AnatomiCuts",
        "segmentation_file": segmentation_file,
        "fiber_file": fiber_file,
        "clusters": clusters,
        "points": points,
        "fibers_eigen": fibers_eigen,
        "output_folder": output_folder,
        "direction_flag": direction_flag,
    }
    return params


def dmri_anatomi_cuts_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `DmriAnatomiCutsParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("segmentation_file", None) is None:
        raise StyxValidationError("`segmentation_file` must not be None")
    if not isinstance(params["segmentation_file"], (pathlib.Path, str)):
        raise StyxValidationError(f'`segmentation_file` has the wrong type: Received `{type(params.get("segmentation_file", None))}` expected `InputPathType`')
    if params.get("fiber_file", None) is None:
        raise StyxValidationError("`fiber_file` must not be None")
    if not isinstance(params["fiber_file"], (pathlib.Path, str)):
        raise StyxValidationError(f'`fiber_file` has the wrong type: Received `{type(params.get("fiber_file", None))}` expected `InputPathType`')
    if params.get("clusters", None) is None:
        raise StyxValidationError("`clusters` must not be None")
    if not isinstance(params["clusters"], (float, int)):
        raise StyxValidationError(f'`clusters` has the wrong type: Received `{type(params.get("clusters", None))}` expected `float`')
    if params.get("points", None) is None:
        raise StyxValidationError("`points` must not be None")
    if not isinstance(params["points"], (float, int)):
        raise StyxValidationError(f'`points` has the wrong type: Received `{type(params.get("points", None))}` expected `float`')
    if params.get("fibers_eigen", None) is None:
        raise StyxValidationError("`fibers_eigen` must not be None")
    if not isinstance(params["fibers_eigen"], (float, int)):
        raise StyxValidationError(f'`fibers_eigen` has the wrong type: Received `{type(params.get("fibers_eigen", None))}` expected `float`')
    if params.get("output_folder", None) is None:
        raise StyxValidationError("`output_folder` must not be None")
    if not isinstance(params["output_folder"], str):
        raise StyxValidationError(f'`output_folder` has the wrong type: Received `{type(params.get("output_folder", None))}` expected `str`')
    if params.get("direction_flag", None) is None:
        raise StyxValidationError("`direction_flag` must not be None")
    if not isinstance(params["direction_flag"], str):
        raise StyxValidationError(f'`direction_flag` has the wrong type: Received `{type(params.get("direction_flag", None))}` expected `typing.Literal["s", "d", "a", "o"]`')
    if params["direction_flag"] not in ["s", "d", "a", "o"]:
        raise StyxValidationError("Parameter `direction_flag` must be one of [\"s\", \"d\", \"a\", \"o\"]")


def dmri_anatomi_cuts_cargs(
    params: DmriAnatomiCutsParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("dmri_AnatomiCuts")
    cargs.extend([
        "-s",
        execution.input_file(params.get("segmentation_file", None))
    ])
    cargs.extend([
        "-f",
        execution.input_file(params.get("fiber_file", None))
    ])
    cargs.extend([
        "-c",
        str(params.get("clusters", None))
    ])
    cargs.extend([
        "-n",
        str(params.get("points", None))
    ])
    cargs.extend([
        "-e",
        str(params.get("fibers_eigen", None))
    ])
    cargs.extend([
        "-o",
        params.get("output_folder", None)
    ])
    cargs.extend([
        "-d",
        params.get("direction_flag", None)
    ])
    return cargs


def dmri_anatomi_cuts_outputs(
    params: DmriAnatomiCutsParamsDict,
    execution: Execution,
) -> DmriAnatomiCutsOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = DmriAnatomiCutsOutputs(
        root=execution.output_file("."),
        output_vtk=execution.output_file(params.get("output_folder", None) + "/output.vtk"),
    )
    return ret


def dmri_anatomi_cuts_execute(
    params: DmriAnatomiCutsParamsDict,
    runner: Runner | None = None,
) -> DmriAnatomiCutsOutputs:
    """
    dmri_AnatomiCuts
    
    AnatomiCuts tool for DTI fibers segmentation.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `DmriAnatomiCutsOutputs`).
    """
    dmri_anatomi_cuts_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(DMRI_ANATOMI_CUTS_METADATA)
    params = execution.params(params)
    cargs = dmri_anatomi_cuts_cargs(params, execution)
    ret = dmri_anatomi_cuts_outputs(params, execution)
    execution.run(cargs)
    return ret


def dmri_anatomi_cuts(
    segmentation_file: InputPathType,
    fiber_file: InputPathType,
    clusters: float,
    points: float,
    fibers_eigen: float,
    output_folder: str,
    direction_flag: typing.Literal["s", "d", "a", "o"],
    runner: Runner | None = None,
) -> DmriAnatomiCutsOutputs:
    """
    dmri_AnatomiCuts
    
    AnatomiCuts tool for DTI fibers segmentation.
    
    Author: FreeSurfer Developers
    
    URL: https://github.com/freesurfer/freesurfer
    
    Args:
        segmentation_file: Segmentation file.
        fiber_file: VTK fiber file.
        clusters: Number of clusters.
        points: Number of points.
        fibers_eigen: Number of fibers for eigen decomposition.
        output_folder: Output folder.
        direction_flag: Direction flag: 's' for straight, 'd' for diagonal, 'a'\
            for all, 'o' for none.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `DmriAnatomiCutsOutputs`).
    """
    params = dmri_anatomi_cuts_params(
        segmentation_file=segmentation_file,
        fiber_file=fiber_file,
        clusters=clusters,
        points=points,
        fibers_eigen=fibers_eigen,
        output_folder=output_folder,
        direction_flag=direction_flag,
    )
    return dmri_anatomi_cuts_execute(params, runner)


__all__ = [
    "DMRI_ANATOMI_CUTS_METADATA",
    "DmriAnatomiCutsOutputs",
    "DmriAnatomiCutsParamsDict",
    "DmriAnatomiCutsParamsDictTagged",
    "dmri_anatomi_cuts",
    "dmri_anatomi_cuts_execute",
    "dmri_anatomi_cuts_params",
]
