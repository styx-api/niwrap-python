# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

FABBER_CEST_METADATA = Metadata(
    id="a60d5831e1e86f659c02557a4cf9fa96af5f7477.boutiques",
    name="fabber_cest",
    package="fsl",
    container_image_tag="brainlife/fsl:6.0.4-patched2",
)


_FabberCestParamsDictNoTag = typing.TypedDict('_FabberCestParamsDictNoTag', {
    "output": str,
    "method": str,
    "model": str,
    "data": InputPathType,
    "help": bool,
    "listmethods": bool,
    "listmodels": bool,
    "listparams": bool,
    "descparams": bool,
    "listoutputs": bool,
    "evaluate": typing.NotRequired[str | None],
    "evaluate_params": typing.NotRequired[str | None],
    "evaluate_nt": typing.NotRequired[int | None],
    "simple_output": bool,
    "overwrite": bool,
    "link_to_latest": bool,
    "loadmodels": typing.NotRequired[InputPathType | None],
    "data_multi": typing.NotRequired[InputPathType | None],
    "data_order": typing.NotRequired[str | None],
    "mask": typing.NotRequired[InputPathType | None],
    "masked_timepoints": typing.NotRequired[int | None],
    "suppdata": typing.NotRequired[InputPathType | None],
    "dump_param_names": bool,
    "save_model_fit": bool,
    "save_residuals": bool,
    "save_model_extras": bool,
    "save_mvn": bool,
    "save_mean": bool,
    "save_std": bool,
    "save_var": bool,
    "save_zstat": bool,
    "save_noise_mean": bool,
    "save_noise_std": bool,
    "save_free_energy": bool,
    "optfile": typing.NotRequired[InputPathType | None],
    "debug": bool,
})
FabberCestParamsDictTagged = typing.TypedDict('FabberCestParamsDictTagged', {
    "@type": typing.Literal["fsl/fabber_cest"],
    "output": str,
    "method": str,
    "model": str,
    "data": InputPathType,
    "help": bool,
    "listmethods": bool,
    "listmodels": bool,
    "listparams": bool,
    "descparams": bool,
    "listoutputs": bool,
    "evaluate": typing.NotRequired[str | None],
    "evaluate_params": typing.NotRequired[str | None],
    "evaluate_nt": typing.NotRequired[int | None],
    "simple_output": bool,
    "overwrite": bool,
    "link_to_latest": bool,
    "loadmodels": typing.NotRequired[InputPathType | None],
    "data_multi": typing.NotRequired[InputPathType | None],
    "data_order": typing.NotRequired[str | None],
    "mask": typing.NotRequired[InputPathType | None],
    "masked_timepoints": typing.NotRequired[int | None],
    "suppdata": typing.NotRequired[InputPathType | None],
    "dump_param_names": bool,
    "save_model_fit": bool,
    "save_residuals": bool,
    "save_model_extras": bool,
    "save_mvn": bool,
    "save_mean": bool,
    "save_std": bool,
    "save_var": bool,
    "save_zstat": bool,
    "save_noise_mean": bool,
    "save_noise_std": bool,
    "save_free_energy": bool,
    "optfile": typing.NotRequired[InputPathType | None],
    "debug": bool,
})
FabberCestParamsDict = _FabberCestParamsDictNoTag | FabberCestParamsDictTagged


class FabberCestOutputs(typing.NamedTuple):
    """
    Output object returned when calling `FabberCestParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    logfile: OutputPathType
    """Log file"""
    modelfit_out: OutputPathType
    """Model fit output as a 4d volume"""
    residuals_out: OutputPathType
    """Residuals output as a 4d volume"""
    modelextras_out: OutputPathType
    """Model extras output"""
    mvn_out: OutputPathType
    """Final MVN distributions output"""
    mean_out: OutputPathType
    """Parameter means output"""
    std_out: OutputPathType
    """Parameter standard deviations output"""
    var_out: OutputPathType
    """Parameter variances output"""
    zstat_out: OutputPathType
    """Parameter Z statistics output"""
    noise_mean_out: OutputPathType
    """Noise means output"""
    noise_std_out: OutputPathType
    """Noise standard deviations output"""
    free_energy_out: OutputPathType
    """Free energy output"""


def fabber_cest_params(
    output: str,
    method: str,
    model: str,
    data: InputPathType,
    help_: bool = False,
    listmethods: bool = False,
    listmodels: bool = False,
    listparams: bool = False,
    descparams: bool = False,
    listoutputs: bool = False,
    evaluate: str | None = None,
    evaluate_params: str | None = None,
    evaluate_nt: int | None = None,
    simple_output: bool = False,
    overwrite: bool = False,
    link_to_latest: bool = False,
    loadmodels: InputPathType | None = None,
    data_multi: InputPathType | None = None,
    data_order: str | None = None,
    mask: InputPathType | None = None,
    masked_timepoints: int | None = None,
    suppdata: InputPathType | None = None,
    dump_param_names: bool = False,
    save_model_fit: bool = False,
    save_residuals: bool = False,
    save_model_extras: bool = False,
    save_mvn: bool = False,
    save_mean: bool = False,
    save_std: bool = False,
    save_var: bool = False,
    save_zstat: bool = False,
    save_noise_mean: bool = False,
    save_noise_std: bool = False,
    save_free_energy: bool = False,
    optfile: InputPathType | None = None,
    debug: bool = False,
) -> FabberCestParamsDictTagged:
    """
    Build parameters.
    
    Args:
        output: Directory for output files.
        method: Inference method.
        model: Forward model.
        data: Input data file.
        help_: Print usage help.
        listmethods: List all known inference methods.
        listmodels: List all known forward models.
        listparams: List model parameters.
        descparams: Describe model parameters.
        listoutputs: List additional model outputs.
        evaluate: Evaluate model and set to name of output required.
        evaluate_params: List of parameter values for evaluation.
        evaluate_nt: Number of time points for evaluation.
        simple_output: Simple output series of lines each giving progress as\
            percentage.
        overwrite: Overwrite existing output.
        link_to_latest: Create a link to the most recent output directory with\
            the prefix _latest.
        loadmodels: Load models dynamically from the specified filename.
        data_multi: Specify multiple data files (data<n>).
        data_order: Handling of multiple data files (concatenate or interleave).
        mask: Mask file. Inference performed where mask value > 0.
        masked_timepoints: List of masked time points to ignore (mt<n>).
        suppdata: Supplemental timeseries data required for some models.
        dump_param_names: Write the file paramnames.txt containing the names of\
            the model parameters.
        save_model_fit: Output the model prediction as a 4d volume.
        save_residuals: Output the residuals (difference between the data and\
            the model prediction).
        save_model_extras: Output additional model-specific timeseries data.
        save_mvn: Output the final MVN distributions.
        save_mean: Output the parameter means.
        save_std: Output the parameter standard deviations.
        save_var: Output the parameter variances.
        save_zstat: Output the parameter Zstats.
        save_noise_mean: Output the noise means.
        save_noise_std: Output the noise standard deviations.
        save_free_energy: Output the free energy, if calculated.
        optfile: File containing additional options, one per line, in the same\
            form as specified on the command line.
        debug: Output large amounts of debug information. ONLY USE WITH VERY\
            SMALL NUMBERS OF VOXELS.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "fsl/fabber_cest",
        "output": output,
        "method": method,
        "model": model,
        "data": data,
        "help": help_,
        "listmethods": listmethods,
        "listmodels": listmodels,
        "listparams": listparams,
        "descparams": descparams,
        "listoutputs": listoutputs,
        "simple_output": simple_output,
        "overwrite": overwrite,
        "link_to_latest": link_to_latest,
        "dump_param_names": dump_param_names,
        "save_model_fit": save_model_fit,
        "save_residuals": save_residuals,
        "save_model_extras": save_model_extras,
        "save_mvn": save_mvn,
        "save_mean": save_mean,
        "save_std": save_std,
        "save_var": save_var,
        "save_zstat": save_zstat,
        "save_noise_mean": save_noise_mean,
        "save_noise_std": save_noise_std,
        "save_free_energy": save_free_energy,
        "debug": debug,
    }
    if evaluate is not None:
        params["evaluate"] = evaluate
    if evaluate_params is not None:
        params["evaluate_params"] = evaluate_params
    if evaluate_nt is not None:
        params["evaluate_nt"] = evaluate_nt
    if loadmodels is not None:
        params["loadmodels"] = loadmodels
    if data_multi is not None:
        params["data_multi"] = data_multi
    if data_order is not None:
        params["data_order"] = data_order
    if mask is not None:
        params["mask"] = mask
    if masked_timepoints is not None:
        params["masked_timepoints"] = masked_timepoints
    if suppdata is not None:
        params["suppdata"] = suppdata
    if optfile is not None:
        params["optfile"] = optfile
    return params


def fabber_cest_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `FabberCestParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("output", None) is None:
        raise StyxValidationError("`output` must not be None")
    if not isinstance(params["output"], str):
        raise StyxValidationError(f'`output` has the wrong type: Received `{type(params.get("output", None))}` expected `str`')
    if params.get("method", None) is None:
        raise StyxValidationError("`method` must not be None")
    if not isinstance(params["method"], str):
        raise StyxValidationError(f'`method` has the wrong type: Received `{type(params.get("method", None))}` expected `str`')
    if params.get("model", None) is None:
        raise StyxValidationError("`model` must not be None")
    if not isinstance(params["model"], str):
        raise StyxValidationError(f'`model` has the wrong type: Received `{type(params.get("model", None))}` expected `str`')
    if params.get("data", None) is None:
        raise StyxValidationError("`data` must not be None")
    if not isinstance(params["data"], (pathlib.Path, str)):
        raise StyxValidationError(f'`data` has the wrong type: Received `{type(params.get("data", None))}` expected `InputPathType`')
    if params.get("help", False) is None:
        raise StyxValidationError("`help` must not be None")
    if not isinstance(params["help"], bool):
        raise StyxValidationError(f'`help` has the wrong type: Received `{type(params.get("help", False))}` expected `bool`')
    if params.get("listmethods", False) is None:
        raise StyxValidationError("`listmethods` must not be None")
    if not isinstance(params["listmethods"], bool):
        raise StyxValidationError(f'`listmethods` has the wrong type: Received `{type(params.get("listmethods", False))}` expected `bool`')
    if params.get("listmodels", False) is None:
        raise StyxValidationError("`listmodels` must not be None")
    if not isinstance(params["listmodels"], bool):
        raise StyxValidationError(f'`listmodels` has the wrong type: Received `{type(params.get("listmodels", False))}` expected `bool`')
    if params.get("listparams", False) is None:
        raise StyxValidationError("`listparams` must not be None")
    if not isinstance(params["listparams"], bool):
        raise StyxValidationError(f'`listparams` has the wrong type: Received `{type(params.get("listparams", False))}` expected `bool`')
    if params.get("descparams", False) is None:
        raise StyxValidationError("`descparams` must not be None")
    if not isinstance(params["descparams"], bool):
        raise StyxValidationError(f'`descparams` has the wrong type: Received `{type(params.get("descparams", False))}` expected `bool`')
    if params.get("listoutputs", False) is None:
        raise StyxValidationError("`listoutputs` must not be None")
    if not isinstance(params["listoutputs"], bool):
        raise StyxValidationError(f'`listoutputs` has the wrong type: Received `{type(params.get("listoutputs", False))}` expected `bool`')
    if params.get("evaluate", None) is not None:
        if not isinstance(params["evaluate"], str):
            raise StyxValidationError(f'`evaluate` has the wrong type: Received `{type(params.get("evaluate", None))}` expected `str | None`')
    if params.get("evaluate_params", None) is not None:
        if not isinstance(params["evaluate_params"], str):
            raise StyxValidationError(f'`evaluate_params` has the wrong type: Received `{type(params.get("evaluate_params", None))}` expected `str | None`')
    if params.get("evaluate_nt", None) is not None:
        if not isinstance(params["evaluate_nt"], int):
            raise StyxValidationError(f'`evaluate_nt` has the wrong type: Received `{type(params.get("evaluate_nt", None))}` expected `int | None`')
    if params.get("simple_output", False) is None:
        raise StyxValidationError("`simple_output` must not be None")
    if not isinstance(params["simple_output"], bool):
        raise StyxValidationError(f'`simple_output` has the wrong type: Received `{type(params.get("simple_output", False))}` expected `bool`')
    if params.get("overwrite", False) is None:
        raise StyxValidationError("`overwrite` must not be None")
    if not isinstance(params["overwrite"], bool):
        raise StyxValidationError(f'`overwrite` has the wrong type: Received `{type(params.get("overwrite", False))}` expected `bool`')
    if params.get("link_to_latest", False) is None:
        raise StyxValidationError("`link_to_latest` must not be None")
    if not isinstance(params["link_to_latest"], bool):
        raise StyxValidationError(f'`link_to_latest` has the wrong type: Received `{type(params.get("link_to_latest", False))}` expected `bool`')
    if params.get("loadmodels", None) is not None:
        if not isinstance(params["loadmodels"], (pathlib.Path, str)):
            raise StyxValidationError(f'`loadmodels` has the wrong type: Received `{type(params.get("loadmodels", None))}` expected `InputPathType | None`')
    if params.get("data_multi", None) is not None:
        if not isinstance(params["data_multi"], (pathlib.Path, str)):
            raise StyxValidationError(f'`data_multi` has the wrong type: Received `{type(params.get("data_multi", None))}` expected `InputPathType | None`')
    if params.get("data_order", None) is not None:
        if not isinstance(params["data_order"], str):
            raise StyxValidationError(f'`data_order` has the wrong type: Received `{type(params.get("data_order", None))}` expected `str | None`')
    if params.get("mask", None) is not None:
        if not isinstance(params["mask"], (pathlib.Path, str)):
            raise StyxValidationError(f'`mask` has the wrong type: Received `{type(params.get("mask", None))}` expected `InputPathType | None`')
    if params.get("masked_timepoints", None) is not None:
        if not isinstance(params["masked_timepoints"], int):
            raise StyxValidationError(f'`masked_timepoints` has the wrong type: Received `{type(params.get("masked_timepoints", None))}` expected `int | None`')
    if params.get("suppdata", None) is not None:
        if not isinstance(params["suppdata"], (pathlib.Path, str)):
            raise StyxValidationError(f'`suppdata` has the wrong type: Received `{type(params.get("suppdata", None))}` expected `InputPathType | None`')
    if params.get("dump_param_names", False) is None:
        raise StyxValidationError("`dump_param_names` must not be None")
    if not isinstance(params["dump_param_names"], bool):
        raise StyxValidationError(f'`dump_param_names` has the wrong type: Received `{type(params.get("dump_param_names", False))}` expected `bool`')
    if params.get("save_model_fit", False) is None:
        raise StyxValidationError("`save_model_fit` must not be None")
    if not isinstance(params["save_model_fit"], bool):
        raise StyxValidationError(f'`save_model_fit` has the wrong type: Received `{type(params.get("save_model_fit", False))}` expected `bool`')
    if params.get("save_residuals", False) is None:
        raise StyxValidationError("`save_residuals` must not be None")
    if not isinstance(params["save_residuals"], bool):
        raise StyxValidationError(f'`save_residuals` has the wrong type: Received `{type(params.get("save_residuals", False))}` expected `bool`')
    if params.get("save_model_extras", False) is None:
        raise StyxValidationError("`save_model_extras` must not be None")
    if not isinstance(params["save_model_extras"], bool):
        raise StyxValidationError(f'`save_model_extras` has the wrong type: Received `{type(params.get("save_model_extras", False))}` expected `bool`')
    if params.get("save_mvn", False) is None:
        raise StyxValidationError("`save_mvn` must not be None")
    if not isinstance(params["save_mvn"], bool):
        raise StyxValidationError(f'`save_mvn` has the wrong type: Received `{type(params.get("save_mvn", False))}` expected `bool`')
    if params.get("save_mean", False) is None:
        raise StyxValidationError("`save_mean` must not be None")
    if not isinstance(params["save_mean"], bool):
        raise StyxValidationError(f'`save_mean` has the wrong type: Received `{type(params.get("save_mean", False))}` expected `bool`')
    if params.get("save_std", False) is None:
        raise StyxValidationError("`save_std` must not be None")
    if not isinstance(params["save_std"], bool):
        raise StyxValidationError(f'`save_std` has the wrong type: Received `{type(params.get("save_std", False))}` expected `bool`')
    if params.get("save_var", False) is None:
        raise StyxValidationError("`save_var` must not be None")
    if not isinstance(params["save_var"], bool):
        raise StyxValidationError(f'`save_var` has the wrong type: Received `{type(params.get("save_var", False))}` expected `bool`')
    if params.get("save_zstat", False) is None:
        raise StyxValidationError("`save_zstat` must not be None")
    if not isinstance(params["save_zstat"], bool):
        raise StyxValidationError(f'`save_zstat` has the wrong type: Received `{type(params.get("save_zstat", False))}` expected `bool`')
    if params.get("save_noise_mean", False) is None:
        raise StyxValidationError("`save_noise_mean` must not be None")
    if not isinstance(params["save_noise_mean"], bool):
        raise StyxValidationError(f'`save_noise_mean` has the wrong type: Received `{type(params.get("save_noise_mean", False))}` expected `bool`')
    if params.get("save_noise_std", False) is None:
        raise StyxValidationError("`save_noise_std` must not be None")
    if not isinstance(params["save_noise_std"], bool):
        raise StyxValidationError(f'`save_noise_std` has the wrong type: Received `{type(params.get("save_noise_std", False))}` expected `bool`')
    if params.get("save_free_energy", False) is None:
        raise StyxValidationError("`save_free_energy` must not be None")
    if not isinstance(params["save_free_energy"], bool):
        raise StyxValidationError(f'`save_free_energy` has the wrong type: Received `{type(params.get("save_free_energy", False))}` expected `bool`')
    if params.get("optfile", None) is not None:
        if not isinstance(params["optfile"], (pathlib.Path, str)):
            raise StyxValidationError(f'`optfile` has the wrong type: Received `{type(params.get("optfile", None))}` expected `InputPathType | None`')
    if params.get("debug", False) is None:
        raise StyxValidationError("`debug` must not be None")
    if not isinstance(params["debug"], bool):
        raise StyxValidationError(f'`debug` has the wrong type: Received `{type(params.get("debug", False))}` expected `bool`')


def fabber_cest_cargs(
    params: FabberCestParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("fabber_cest")
    cargs.extend([
        "--output",
        params.get("output", None)
    ])
    cargs.extend([
        "--method",
        params.get("method", None)
    ])
    cargs.extend([
        "--model",
        params.get("model", None)
    ])
    cargs.extend([
        "--data",
        execution.input_file(params.get("data", None))
    ])
    if params.get("help", False):
        cargs.append("--help")
    if params.get("listmethods", False):
        cargs.append("--listmethods")
    if params.get("listmodels", False):
        cargs.append("--listmodels")
    if params.get("listparams", False):
        cargs.append("--listparams")
    if params.get("descparams", False):
        cargs.append("--descparams")
    if params.get("listoutputs", False):
        cargs.append("--listoutputs")
    if params.get("evaluate", None) is not None:
        cargs.extend([
            "--evaluate",
            params.get("evaluate", None)
        ])
    if params.get("evaluate_params", None) is not None:
        cargs.extend([
            "--evaluate-params",
            params.get("evaluate_params", None)
        ])
    if params.get("evaluate_nt", None) is not None:
        cargs.extend([
            "--evaluate-nt",
            str(params.get("evaluate_nt", None))
        ])
    if params.get("simple_output", False):
        cargs.append("--simple-output")
    if params.get("overwrite", False):
        cargs.append("--overwrite")
    if params.get("link_to_latest", False):
        cargs.append("--link-to-latest")
    if params.get("loadmodels", None) is not None:
        cargs.extend([
            "--loadmodels",
            execution.input_file(params.get("loadmodels", None))
        ])
    if params.get("data_multi", None) is not None:
        cargs.extend([
            "--data",
            execution.input_file(params.get("data_multi", None))
        ])
    if params.get("data_order", None) is not None:
        cargs.extend([
            "--data-order",
            params.get("data_order", None)
        ])
    if params.get("mask", None) is not None:
        cargs.extend([
            "--mask",
            execution.input_file(params.get("mask", None))
        ])
    if params.get("masked_timepoints", None) is not None:
        cargs.extend([
            "--mt",
            str(params.get("masked_timepoints", None))
        ])
    if params.get("suppdata", None) is not None:
        cargs.extend([
            "--suppdata",
            execution.input_file(params.get("suppdata", None))
        ])
    if params.get("dump_param_names", False):
        cargs.append("--dump-param-names")
    if params.get("save_model_fit", False):
        cargs.append("--save-model-fit")
    if params.get("save_residuals", False):
        cargs.append("--save-residuals")
    if params.get("save_model_extras", False):
        cargs.append("--save-model-extras")
    if params.get("save_mvn", False):
        cargs.append("--save-mvn")
    if params.get("save_mean", False):
        cargs.append("--save-mean")
    if params.get("save_std", False):
        cargs.append("--save-std")
    if params.get("save_var", False):
        cargs.append("--save-var")
    if params.get("save_zstat", False):
        cargs.append("--save-zstat")
    if params.get("save_noise_mean", False):
        cargs.append("--save-noise-mean")
    if params.get("save_noise_std", False):
        cargs.append("--save-noise-std")
    if params.get("save_free_energy", False):
        cargs.append("--save-free-energy")
    if params.get("optfile", None) is not None:
        cargs.extend([
            "--optfile",
            execution.input_file(params.get("optfile", None))
        ])
    if params.get("debug", False):
        cargs.append("--debug")
    return cargs


def fabber_cest_outputs(
    params: FabberCestParamsDict,
    execution: Execution,
) -> FabberCestOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = FabberCestOutputs(
        root=execution.output_file("."),
        logfile=execution.output_file(params.get("output", None) + "/logfile.log"),
        modelfit_out=execution.output_file(params.get("output", None) + "/model_fit.nii.gz"),
        residuals_out=execution.output_file(params.get("output", None) + "/residuals.nii.gz"),
        modelextras_out=execution.output_file(params.get("output", None) + "/model_extras.nii.gz"),
        mvn_out=execution.output_file(params.get("output", None) + "/mvn.nii.gz"),
        mean_out=execution.output_file(params.get("output", None) + "/mean.nii.gz"),
        std_out=execution.output_file(params.get("output", None) + "/std.nii.gz"),
        var_out=execution.output_file(params.get("output", None) + "/var.nii.gz"),
        zstat_out=execution.output_file(params.get("output", None) + "/zstat.nii.gz"),
        noise_mean_out=execution.output_file(params.get("output", None) + "/noise_mean.nii.gz"),
        noise_std_out=execution.output_file(params.get("output", None) + "/noise_std.nii.gz"),
        free_energy_out=execution.output_file(params.get("output", None) + "/free_energy.nii.gz"),
    )
    return ret


def fabber_cest_execute(
    params: FabberCestParamsDict,
    runner: Runner | None = None,
) -> FabberCestOutputs:
    """
    fabber_cest
    
    Fabber Model-based Analysis.
    
    Author: FMRIB Analysis Group, University of Oxford
    
    URL: https://fsl.fmrib.ox.ac.uk/fsl/fslwiki
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `FabberCestOutputs`).
    """
    fabber_cest_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(FABBER_CEST_METADATA)
    params = execution.params(params)
    cargs = fabber_cest_cargs(params, execution)
    ret = fabber_cest_outputs(params, execution)
    execution.run(cargs)
    return ret


def fabber_cest(
    output: str,
    method: str,
    model: str,
    data: InputPathType,
    help_: bool = False,
    listmethods: bool = False,
    listmodels: bool = False,
    listparams: bool = False,
    descparams: bool = False,
    listoutputs: bool = False,
    evaluate: str | None = None,
    evaluate_params: str | None = None,
    evaluate_nt: int | None = None,
    simple_output: bool = False,
    overwrite: bool = False,
    link_to_latest: bool = False,
    loadmodels: InputPathType | None = None,
    data_multi: InputPathType | None = None,
    data_order: str | None = None,
    mask: InputPathType | None = None,
    masked_timepoints: int | None = None,
    suppdata: InputPathType | None = None,
    dump_param_names: bool = False,
    save_model_fit: bool = False,
    save_residuals: bool = False,
    save_model_extras: bool = False,
    save_mvn: bool = False,
    save_mean: bool = False,
    save_std: bool = False,
    save_var: bool = False,
    save_zstat: bool = False,
    save_noise_mean: bool = False,
    save_noise_std: bool = False,
    save_free_energy: bool = False,
    optfile: InputPathType | None = None,
    debug: bool = False,
    runner: Runner | None = None,
) -> FabberCestOutputs:
    """
    fabber_cest
    
    Fabber Model-based Analysis.
    
    Author: FMRIB Analysis Group, University of Oxford
    
    URL: https://fsl.fmrib.ox.ac.uk/fsl/fslwiki
    
    Args:
        output: Directory for output files.
        method: Inference method.
        model: Forward model.
        data: Input data file.
        help_: Print usage help.
        listmethods: List all known inference methods.
        listmodels: List all known forward models.
        listparams: List model parameters.
        descparams: Describe model parameters.
        listoutputs: List additional model outputs.
        evaluate: Evaluate model and set to name of output required.
        evaluate_params: List of parameter values for evaluation.
        evaluate_nt: Number of time points for evaluation.
        simple_output: Simple output series of lines each giving progress as\
            percentage.
        overwrite: Overwrite existing output.
        link_to_latest: Create a link to the most recent output directory with\
            the prefix _latest.
        loadmodels: Load models dynamically from the specified filename.
        data_multi: Specify multiple data files (data<n>).
        data_order: Handling of multiple data files (concatenate or interleave).
        mask: Mask file. Inference performed where mask value > 0.
        masked_timepoints: List of masked time points to ignore (mt<n>).
        suppdata: Supplemental timeseries data required for some models.
        dump_param_names: Write the file paramnames.txt containing the names of\
            the model parameters.
        save_model_fit: Output the model prediction as a 4d volume.
        save_residuals: Output the residuals (difference between the data and\
            the model prediction).
        save_model_extras: Output additional model-specific timeseries data.
        save_mvn: Output the final MVN distributions.
        save_mean: Output the parameter means.
        save_std: Output the parameter standard deviations.
        save_var: Output the parameter variances.
        save_zstat: Output the parameter Zstats.
        save_noise_mean: Output the noise means.
        save_noise_std: Output the noise standard deviations.
        save_free_energy: Output the free energy, if calculated.
        optfile: File containing additional options, one per line, in the same\
            form as specified on the command line.
        debug: Output large amounts of debug information. ONLY USE WITH VERY\
            SMALL NUMBERS OF VOXELS.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `FabberCestOutputs`).
    """
    params = fabber_cest_params(
        output=output,
        method=method,
        model=model,
        data=data,
        help_=help_,
        listmethods=listmethods,
        listmodels=listmodels,
        listparams=listparams,
        descparams=descparams,
        listoutputs=listoutputs,
        evaluate=evaluate,
        evaluate_params=evaluate_params,
        evaluate_nt=evaluate_nt,
        simple_output=simple_output,
        overwrite=overwrite,
        link_to_latest=link_to_latest,
        loadmodels=loadmodels,
        data_multi=data_multi,
        data_order=data_order,
        mask=mask,
        masked_timepoints=masked_timepoints,
        suppdata=suppdata,
        dump_param_names=dump_param_names,
        save_model_fit=save_model_fit,
        save_residuals=save_residuals,
        save_model_extras=save_model_extras,
        save_mvn=save_mvn,
        save_mean=save_mean,
        save_std=save_std,
        save_var=save_var,
        save_zstat=save_zstat,
        save_noise_mean=save_noise_mean,
        save_noise_std=save_noise_std,
        save_free_energy=save_free_energy,
        optfile=optfile,
        debug=debug,
    )
    return fabber_cest_execute(params, runner)


__all__ = [
    "FABBER_CEST_METADATA",
    "FabberCestOutputs",
    "FabberCestParamsDict",
    "FabberCestParamsDictTagged",
    "fabber_cest",
    "fabber_cest_execute",
    "fabber_cest_params",
]
