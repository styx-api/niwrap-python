# This file was auto generated by Styx.
# Do not edit this file directly.

import typing
import pathlib
from styxdefs import *

FSLVBM_1_BET_METADATA = Metadata(
    id="8628a122c6bfde9e9d1d22e80d9d897649f86bd1.boutiques",
    name="fslvbm_1_bet",
    package="fsl",
    container_image_tag="brainlife/fsl:6.0.4-patched2",
)


_Fslvbm1BetParamsDictNoTag = typing.TypedDict('_Fslvbm1BetParamsDictNoTag', {
    "default_bet": bool,
    "increased_robustness": bool,
    "bet_parameters": typing.NotRequired[str | None],
})
Fslvbm1BetParamsDictTagged = typing.TypedDict('Fslvbm1BetParamsDictTagged', {
    "@type": typing.Literal["fsl/fslvbm_1_bet"],
    "default_bet": bool,
    "increased_robustness": bool,
    "bet_parameters": typing.NotRequired[str | None],
})
Fslvbm1BetParamsDict = _Fslvbm1BetParamsDictNoTag | Fslvbm1BetParamsDictTagged


class Fslvbm1BetOutputs(typing.NamedTuple):
    """
    Output object returned when calling `Fslvbm1BetParamsDict(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""


def fslvbm_1_bet_params(
    default_bet: bool = False,
    increased_robustness: bool = False,
    bet_parameters: str | None = None,
) -> Fslvbm1BetParamsDictTagged:
    """
    Build parameters.
    
    Args:
        default_bet: Default BET brain extraction with -f 0.4.
        increased_robustness: Increased robustness in the brain extraction when\
            a lot of neck is present.
        bet_parameters: Additional options to be passed on to BET.
    Returns:
        Parameter dictionary
    """
    params = {
        "@type": "fsl/fslvbm_1_bet",
        "default_bet": default_bet,
        "increased_robustness": increased_robustness,
    }
    if bet_parameters is not None:
        params["bet_parameters"] = bet_parameters
    return params


def fslvbm_1_bet_validate(
    params: typing.Any,
) -> None:
    """
    Validate parameters. Throws an error if `params` is not a valid
    `Fslvbm1BetParamsDict` object.
    
    Args:
        params: The parameters object to validate.
    """
    if params is None or not isinstance(params, dict):
        raise StyxValidationError(f'Params object has the wrong type \'{type(params)}\'')
    if params.get("default_bet", False) is None:
        raise StyxValidationError("`default_bet` must not be None")
    if not isinstance(params["default_bet"], bool):
        raise StyxValidationError(f'`default_bet` has the wrong type: Received `{type(params.get("default_bet", False))}` expected `bool`')
    if params.get("increased_robustness", False) is None:
        raise StyxValidationError("`increased_robustness` must not be None")
    if not isinstance(params["increased_robustness"], bool):
        raise StyxValidationError(f'`increased_robustness` has the wrong type: Received `{type(params.get("increased_robustness", False))}` expected `bool`')
    if params.get("bet_parameters", None) is not None:
        if not isinstance(params["bet_parameters"], str):
            raise StyxValidationError(f'`bet_parameters` has the wrong type: Received `{type(params.get("bet_parameters", None))}` expected `str | None`')


def fslvbm_1_bet_cargs(
    params: Fslvbm1BetParamsDict,
    execution: Execution,
) -> list[str]:
    """
    Build command-line arguments from parameters.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Command-line arguments.
    """
    cargs = []
    cargs.append("fslvbm_1_bet")
    if params.get("default_bet", False):
        cargs.append("-b")
    if params.get("increased_robustness", False):
        cargs.append("-N")
    if params.get("bet_parameters", None) is not None:
        cargs.append(params.get("bet_parameters", None))
    return cargs


def fslvbm_1_bet_outputs(
    params: Fslvbm1BetParamsDict,
    execution: Execution,
) -> Fslvbm1BetOutputs:
    """
    Build outputs object containing output file paths and possibly stdout/stderr.
    
    Args:
        params: The parameters.
        execution: The execution object for resolving input paths.
    Returns:
        Outputs object.
    """
    ret = Fslvbm1BetOutputs(
        root=execution.output_file("."),
    )
    return ret


def fslvbm_1_bet_execute(
    params: Fslvbm1BetParamsDict,
    runner: Runner | None = None,
) -> Fslvbm1BetOutputs:
    """
    fslvbm_1_bet
    
    Brain extraction for VBM using FSL BET.
    
    Author: FMRIB Analysis Group, University of Oxford
    
    URL: https://fsl.fmrib.ox.ac.uk/fsl/fslwiki
    
    Args:
        params: The parameters.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `Fslvbm1BetOutputs`).
    """
    fslvbm_1_bet_validate(params)
    runner = runner or get_global_runner()
    execution = runner.start_execution(FSLVBM_1_BET_METADATA)
    params = execution.params(params)
    cargs = fslvbm_1_bet_cargs(params, execution)
    ret = fslvbm_1_bet_outputs(params, execution)
    execution.run(cargs)
    return ret


def fslvbm_1_bet(
    default_bet: bool = False,
    increased_robustness: bool = False,
    bet_parameters: str | None = None,
    runner: Runner | None = None,
) -> Fslvbm1BetOutputs:
    """
    fslvbm_1_bet
    
    Brain extraction for VBM using FSL BET.
    
    Author: FMRIB Analysis Group, University of Oxford
    
    URL: https://fsl.fmrib.ox.ac.uk/fsl/fslwiki
    
    Args:
        default_bet: Default BET brain extraction with -f 0.4.
        increased_robustness: Increased robustness in the brain extraction when\
            a lot of neck is present.
        bet_parameters: Additional options to be passed on to BET.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `Fslvbm1BetOutputs`).
    """
    params = fslvbm_1_bet_params(
        default_bet=default_bet,
        increased_robustness=increased_robustness,
        bet_parameters=bet_parameters,
    )
    return fslvbm_1_bet_execute(params, runner)


__all__ = [
    "FSLVBM_1_BET_METADATA",
    "Fslvbm1BetOutputs",
    "Fslvbm1BetParamsDict",
    "Fslvbm1BetParamsDictTagged",
    "fslvbm_1_bet",
    "fslvbm_1_bet_execute",
    "fslvbm_1_bet_params",
]
